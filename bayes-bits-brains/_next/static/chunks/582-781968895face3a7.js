(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{916:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081),r=s(82149);let l=e=>{let{title:t="Entropy Explorer",numCategories:s=4}=e,l=Array(s).fill(1/s),[i,n]=(0,r.useState)(l),[o,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{c(window.matchMedia&&window.matchMedia("(pointer: coarse)").matches||"ontouchstart"in window||navigator.maxTouchPoints>0)},[]);let[d,x]=(0,r.useState)(400);(0,r.useEffect)(()=>{let e=()=>{x(Math.min(400,window.innerWidth-80))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let m=Math.min(250,.625*d),h={top:20,right:20,bottom:40,left:40},u=d-h.left-h.right,p=m-h.top-h.bottom,g=u/s,f=.8*g,b=.1*g,y=(0,r.useMemo)(()=>-i.reduce((e,t)=>t>0?e+t*Math.log2(t):e,0),[i]),j=Math.log2(s),v=(0,r.useCallback)((e,t)=>{let s=Math.max(0,Math.min(1,t)),a=[...i],r=1-s,l=i.reduce((t,s,a)=>a===e?t:t+s,0);if(l>0){let t=r/l;for(let r=0;r<a.length;r++)r===e?a[r]=s:a[r]=i[r]*t}else{a[e]=s;let t=(1-s)/(a.length-1);for(let s=0;s<a.length;s++)s!==e&&(a[s]=t)}n(a)},[i]),N=(0,r.useCallback)((e,t)=>{var s,a,r,l;if(!o)return;let i=t.currentTarget.closest("svg").getBoundingClientRect();v(e,Math.max(0,Math.min(1,1-((null!==(l=null!==(r=t.clientY)&&void 0!==r?r:null===(a=t.touches)||void 0===a?void 0:null===(s=a[0])||void 0===s?void 0:s.clientY)&&void 0!==l?l:0)-i.top-h.top)/p)))},[o,h.top,p,v]),w=(0,r.useCallback)((e,t)=>{let s=t.currentTarget.closest("svg").getBoundingClientRect(),a=t=>{v(e,Math.max(0,Math.min(1,1-(t.clientY-s.top-h.top)/p)))},r=()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",r)},[v,p]),k=[{name:"Uniform",dist:Array(s).fill(1/s)},{name:"Skewed",dist:[.7,.2,.07,.03,0,0].slice(0,s)},{name:"Binary",dist:[.5,.5,0,0,0,0].slice(0,s)},{name:"Extreme",dist:[1,0,0,0,0,0].slice(0,s)}];return(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg space-y-4 max-w-2xl mx-auto",children:[t&&(0,a.jsx)("h3",{className:"text-lg font-semibold text-center text-gray-800",children:t}),(0,a.jsx)("div",{className:"flex justify-center overflow-x-auto",children:(0,a.jsxs)("svg",{width:d,height:m,className:"border rounded bg-white min-w-0 max-w-full",children:[(0,a.jsx)("rect",{x:h.left,y:h.top,width:u,height:p,fill:"#f9fafb",stroke:"#e5e7eb"}),[.2,.4,.6,.8,1].map(e=>{let t=h.top+p-e*p;return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:h.left,y1:t,x2:h.left+u,y2:t,stroke:"#e5e7eb",strokeDasharray:"2,2"}),(0,a.jsx)("text",{x:h.left-10,y:t+4,textAnchor:"end",fontSize:"10",fill:"#6b7280",children:e.toFixed(1)})]},e)}),Array.from({length:s},(e,t)=>(0,a.jsx)("text",{x:h.left+t*g+g/2,y:h.top+p+20,textAnchor:"middle",fontSize:"12",fill:"#374151",fontWeight:"bold",children:String.fromCharCode(65+t)},t)),i.map((e,t)=>{let s=h.left+t*g,r=Math.max(20,e*p),l=s+b,i=h.top+p-r,n=0===e?20:Math.floor(200*e+55),c=0===e?"#f3f4f6":"rgb(".concat(Math.max(0,255-n),", ").concat(Math.max(0,255-.7*n),", ").concat(255-.3*n,")");return(0,a.jsxs)("g",{children:[o&&(0,a.jsx)("rect",{x:s,y:h.top,width:g,height:p,fill:"transparent",onClick:e=>N(t,e)}),(0,a.jsx)("rect",{x:l,y:i,width:f,height:r,fill:c,stroke:"#374151",strokeWidth:"1",className:"cursor-ns-resize hover:opacity-80 transition-opacity",onMouseDown:e=>w(t,e),onClick:e=>N(t,e)}),r<=30&&(0,a.jsx)("rect",{x:l,y:h.top+p-30,width:f,height:30,fill:"transparent",className:"cursor-ns-resize",onMouseDown:e=>w(t,e),onClick:e=>N(t,e)}),(0,a.jsx)("text",{x:l+f/2,y:i-5,textAnchor:"middle",fontSize:"10",fill:"#374151",fontWeight:"bold",children:e.toFixed(2)})]},t)}),(0,a.jsx)("line",{x1:h.left,y1:h.top+p,x2:h.left+u,y2:h.top+p,stroke:"#374151",strokeWidth:"2"}),(0,a.jsx)("line",{x1:h.left,y1:h.top,x2:h.left,y2:h.top+p,stroke:"#374151",strokeWidth:"2"}),(0,a.jsx)("text",{x:15,y:h.top+p/2,textAnchor:"middle",fontSize:"12",fill:"#374151",fontWeight:"bold",transform:"rotate(-90, 15, ".concat(h.top+p/2,")"),children:"Probability"})]})}),(0,a.jsx)("div",{className:"widget-explanation",children:o?"Tap above or below a bar to adjust probabilities. Other bars adjust automatically.":"Drag any bar up or down to adjust probabilities. Other bars adjust automatically."}),(0,a.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm text-gray-700 mb-2",children:"Entropy"}),(0,a.jsxs)("div",{className:"text-3xl font-mono font-bold text-blue-600",children:[y.toFixed(3)," bits"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Maximum possible: ",j.toFixed(3)," bits"]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(y/j*100,"%")}})})]})}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:k.map(e=>(0,a.jsx)("button",{onClick:()=>n([...e.dist]),className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50 transition-colors",children:e.name},e.name))})]})}},1896:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081),r=s(82149);let l=()=>{let[e,t]=(0,r.useState)(0),s=[{name:"Elephant",description:"Von Neumann's famous elephant that can be made to wiggle its trunk",xParams:[-60,30,-8,10],yParams:[50,18,-12,14],xTerms:["cos(t)","sin(t)","sin(2t)","sin(3t)"],yTerms:["sin(t)","sin(2t)","cos(3t)","cos(5t)"],evaluateX:(e,t)=>t[0]*Math.cos(e)+t[1]*Math.sin(e)+t[2]*Math.sin(2*e)+t[3]*Math.sin(3*e),evaluateY:(e,t)=>t[0]*Math.sin(e)+t[1]*Math.sin(2*e)+t[2]*Math.cos(3*e)+t[3]*Math.cos(5*e)},{name:"Heart",description:"Heart-shaped curve: 12sin(t) - 4sin(3t), 13cos(t) - 5cos(2t) - 2cos(3t) - cos(4t)",xParams:[12,-4,0,0],yParams:[13,-5,-2,-1],xTerms:["sin(t)","sin(3t)","—","—"],yTerms:["cos(t)","cos(2t)","cos(3t)","cos(4t)"],evaluateX:(e,t)=>t[0]*Math.sin(e)+t[1]*Math.sin(3*e),evaluateY:(e,t)=>t[0]*Math.cos(e)+t[1]*Math.cos(2*e)+t[2]*Math.cos(3*e)+t[3]*Math.cos(4*e)},{name:"Lissajous",description:"Classic figure-eight shape: A\xb7sin(at), B\xb7sin(bt)",xParams:[1,3,0,0],yParams:[1,2,0,0],xTerms:["sin(3t)","sin(t)","—","—"],yTerms:["sin(2t)","cos(2t)","—","—"],evaluateX:(e,t)=>t[0]*Math.sin(3*e)+t[1]*Math.sin(e),evaluateY:(e,t)=>t[0]*Math.sin(2*e)+t[1]*Math.cos(2*e)}],[l,i]=(0,r.useState)(s[0].xParams),[n,o]=(0,r.useState)(s[0].yParams),c={top:20,right:20,bottom:20,left:20},d=600-c.left-c.right,x=400-c.top-c.bottom,m=(0,r.useMemo)(()=>{let t=[],a=s[e];for(let e=0;e<=1e3;e++){let s=e/1e3*2*Math.PI,r=a.evaluateX(s,l),i=a.evaluateY(s,n);t.push({x:r,y:i})}return t},[l,n,e]),h=(0,r.useMemo)(()=>{if(0===m.length)return{minX:-100,maxX:100,minY:-100,maxY:100};let e=m.map(e=>e.x),t=m.map(e=>e.y),s=Math.min(...e),a=Math.max(...e),r=Math.min(...t),l=Math.max(...t),i=a-s,n=l-r;return{minX:s-.1*i,maxX:a+.1*i,minY:r-.1*n,maxY:l+.1*n}},[m]),u=(0,r.useCallback)((e,t)=>({x:c.left+(e-h.minX)/(h.maxX-h.minX)*d,y:c.top+(h.maxY-t)/(h.maxY-h.minY)*x}),[h,d,x]),p=e=>{let a=s[e];t(e),i([...a.xParams]),o([...a.yParams])},g=(e,t)=>{let s=[...l];s[e]=t,i(s)},f=(e,t)=>{let s=[...n];s[e]=t,o(s)};return(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 space-y-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Parametric Curve Explorer"}),(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:s.map((t,s)=>(0,a.jsx)("button",{onClick:()=>p(s),className:"px-3 py-2 rounded transition-colors text-sm ".concat(e===s?"bg-blue-600 text-white":"bg-blue-500 text-white hover:bg-blue-600"),title:t.description,children:t.name},s))}),(0,a.jsx)("div",{className:"border rounded p-4",children:(0,a.jsxs)("svg",{width:600,height:400,className:"w-full border",style:{maxWidth:"".concat(600,"px")},children:[(0,a.jsx)("defs",{children:(0,a.jsx)("pattern",{id:"grid",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:(0,a.jsx)("path",{d:"M 20 0 L 0 0 0 20",fill:"none",stroke:"#e5e7eb",strokeWidth:"0.5"})})}),(0,a.jsx)("rect",{width:600,height:400,fill:"url(#grid)"}),(0,a.jsx)("line",{x1:c.left,y1:200,x2:600-c.right,y2:200,stroke:"#9ca3af",strokeWidth:"1",strokeDasharray:"2,2"}),(0,a.jsx)("line",{x1:300,y1:c.top,x2:300,y2:400-c.bottom,stroke:"#9ca3af",strokeWidth:"1",strokeDasharray:"2,2"}),m.length>0&&(0,a.jsx)("path",{d:m.map((e,t)=>{let s=u(e.x,e.y);return"".concat(0===t?"M":"L"," ").concat(s.x," ").concat(s.y)}).join(" "),fill:"none",stroke:"#3b82f6",strokeWidth:"2"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-3",children:"X(t) Parameters"}),(0,a.jsx)("div",{className:"space-y-3",children:l.map((t,r)=>{let l=s[e].xTerms[r];return"—"===l||"0"===l?null:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("label",{className:"w-20 text-sm font-mono",children:[l,":"]}),(0,a.jsx)("input",{type:"range",min:"-100",max:"100",step:"0.1",value:t,onChange:e=>g(r,parseFloat(e.target.value)),className:"flex-1"}),(0,a.jsx)("input",{type:"number",value:t.toFixed(2),onChange:e=>g(r,parseFloat(e.target.value)||0),className:"w-20 px-2 py-1 border rounded text-sm",step:"0.1"})]},r)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-3",children:"Y(t) Parameters"}),(0,a.jsx)("div",{className:"space-y-3",children:n.map((t,r)=>{let l=s[e].yTerms[r];return"—"===l||"0"===l?null:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("label",{className:"w-20 text-sm font-mono",children:[l,":"]}),(0,a.jsx)("input",{type:"range",min:"-100",max:"100",step:"0.1",value:t,onChange:e=>f(r,parseFloat(e.target.value)),className:"flex-1"}),(0,a.jsx)("input",{type:"number",value:t.toFixed(2),onChange:e=>f(r,parseFloat(e.target.value)||0),className:"w-20 px-2 py-1 border rounded text-sm",step:"0.1"})]},r)})})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded",children:[(0,a.jsx)("h4",{className:"text-md font-semibold mb-2",children:"Current Equations"}),(0,a.jsxs)("div",{className:"font-mono text-sm space-y-1",children:[(0,a.jsxs)("div",{children:["x(t) = ",l.map((t,a)=>{let r=s[e].xTerms[a];if("—"===r||"0"===r)return"";let l=t>=0&&a>0?" + ":" ";return"".concat(l).concat(t.toFixed(2)).concat(r)}).filter(e=>e).join("")]}),(0,a.jsxs)("div",{children:["y(t) = ",n.map((t,a)=>{let r=s[e].yTerms[a];if("—"===r||"0"===r)return"";let l=t>=0&&a>0?" + ":" ";return"".concat(l).concat(t.toFixed(2)).concat(r)}).filter(e=>e).join("")]})]})]})]})}},3590:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081),r=s(82149);function l(e){let{data:t,modelName:s,experimentName:l,width:i,height:n=120}=e,[o,c]=(0,r.useState)(null);if(0===t.length)return null;let d={top:10,right:15,bottom:25,left:35},x=400-d.left-d.right,m=n-d.top-d.bottom,h=Math.max(...t.map(e=>e.bitsPerChar)),u=Math.min(...t.map(e=>e.bitsPerChar)),p=t.reduce((e,t)=>e+t.bitsPerChar,0)/t.length,g=e=>{let s=e/x*100;return t.reduce((e,t)=>Math.abs(t.progressPercent-s)<Math.abs(e.progressPercent-s)?t:e)};return(0,a.jsxs)("div",{className:"mini-compression-chart",children:[(0,a.jsxs)("div",{className:"text-xs font-medium text-gray-700 mb-1",children:[s," - ",l]}),(0,a.jsxs)("svg",{width:"100%",height:n,viewBox:"0 0 ".concat(400," ").concat(n),preserveAspectRatio:"xMidYMid meet",className:"bg-gray-50 border border-gray-200 rounded",onMouseMove:e=>{let t=e.currentTarget.getBoundingClientRect(),s=e.clientX-t.left-d.left,a=e.clientY-t.top-d.top;s>=0&&s<=x&&a>=0&&a<=m?c({x:s,y:a}):c(null)},onMouseLeave:()=>c(null),children:[(0,a.jsx)("rect",{x:d.left,y:d.top,width:x,height:m,fill:"white",stroke:"#e5e7eb"}),[u,(u+h)/2,h].map((e,t)=>{let s=d.top+m-(e-u)/(h-u||1)*m;return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:d.left,y1:s,x2:d.left+x,y2:s,stroke:"#f3f4f6",strokeDasharray:"1,1"}),(0,a.jsx)("text",{x:d.left-5,y:s+3,textAnchor:"end",fontSize:"8",fill:"#6b7280",children:e.toFixed(2)})]},t)}),[0,50,100].map(e=>{let t=d.left+e/100*x;return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:t,y1:d.top+m,x2:t,y2:d.top+m+3,stroke:"#6b7280"}),(0,a.jsxs)("text",{x:t,y:d.top+m+15,textAnchor:"middle",fontSize:"8",fill:"#6b7280",children:[e,"%"]})]},e)}),(0,a.jsx)("g",{transform:"translate(".concat(d.left,", ").concat(d.top,")"),children:(0,a.jsx)("path",{d:(()=>{if(0===t.length)return"";let e=x/100,s=m/(h-u||1),a="M ".concat(t[0].progressPercent*e," ").concat(m-(t[0].bitsPerChar-u)*s);for(let r=1;r<t.length;r++){let l=t[r].progressPercent*e,i=m-(t[r].bitsPerChar-u)*s;a+=" L ".concat(l," ").concat(i)}return a})(),fill:"none",stroke:"#3b82f6",strokeWidth:"1.5"})}),o&&(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:d.left+o.x,y1:d.top,x2:d.left+o.x,y2:d.top+m,stroke:"#9ca3af",strokeWidth:"1",strokeDasharray:"2,2",opacity:"0.7"}),(0,a.jsx)("line",{x1:d.left,y1:d.top+o.y,x2:d.left+x,y2:d.top+o.y,stroke:"#9ca3af",strokeWidth:"1",strokeDasharray:"2,2",opacity:"0.7"})]}),(0,a.jsx)("text",{x:200,y:n-2,textAnchor:"middle",fontSize:"8",fill:"#374151",children:"Progress (%)"}),(0,a.jsx)("text",{x:8,y:n/2,textAnchor:"middle",fontSize:"8",fill:"#374151",transform:"rotate(-90, 8, ".concat(n/2,")"),children:"Bits/char"})]}),o&&(0,a.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:(()=>{let e=g(o.x);return"".concat(e.progressPercent.toFixed(1),"% → ").concat(e.bitsPerChar.toFixed(3)," bits/char")})()}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Avg: ",p.toFixed(3)," bits/char"]})]})}},5340:(e,t,s)=>{"use strict";s.d(t,{default:()=>b});var a=s(58081),r=s(47950),l=s.n(r),i=s(19651),n=s(82149),o=s(27739),c=s(87358);let d=[{name:"Intro",chapters:[["Riddles","00-riddles"]]},{name:"Part I: Foundations",chapters:[["Bayes & KL divergence","01-kl_intro"],["Crossentropy & Entropy","02-crossentropy"],["KL & Entropy properties","03-entropy_properties"]]},{name:"Part II: Optimization",chapters:[["Maximum likelihood","04-mle"],["Maximum entropy","05-max_entropy"],["Loss functions","07-machine_learning"]]},{name:"Part III: Compression",chapters:[["Coding theory","08-coding_theory"],["Kolmogorov complexity","09-kolmogorov"]]}],x=[["About","about"],["Resources","resources"],["Graveyard","bonus"]];[...d[0].chapters,...d[1].chapters,...d[2].chapters,...x,...d[3].chapters];let m=(0,o.join)(c.cwd(),"public");(0,o.join)(m,"references.bib");var h=s(20816),u=s.n(h);function p(e){let{className:t="",onSubsectionClick:s}=e,[r,l]=(0,n.useState)([]),[i,o]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=()=>d(window.innerWidth<1024);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,n.useEffect)(()=>{let e=null,t=()=>{let t=Array.from(document.querySelectorAll("h2")).filter(e=>!["Footnotes","References"].includes(e.textContent||""));l(t.map(e=>{!e.id&&(e.id=(e.textContent||"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""));let t=e.textContent||"",s=t.includes(":")?t.split(":")[0].trim():t;return{id:e.id,text:s,level:2}})),e&&e.disconnect(),!c&&t.length&&(e=new IntersectionObserver(e=>{let t=0,s=i;e.forEach(e=>{e.intersectionRatio>t&&(t=e.intersectionRatio,s=e.target.id)}),s&&o(s)},{threshold:[0,.25,.5,.75,1],rootMargin:"-48px 0px -80% 0px"}),t.forEach(t=>e.observe(t)))};t();let s=0,a=setInterval(()=>{s+=1,0===r.length&&s<10?t():clearInterval(a)},300),n=new MutationObserver(()=>t());return n.observe(document.body,{childList:!0,subtree:!0}),()=>{n.disconnect(),null==e||e.disconnect()}},[c]);let x=e=>{let t=document.getElementById(e);t&&(t.scrollIntoView({behavior:"smooth"}),o(e),null==s||s())};return(console.log("TableOfContents render: sections.length =",r.length,"className =",t),0===r.length)?(console.log("TableOfContents: No sections, returning null"),null):(0,a.jsx)("div",{className:t,children:(0,a.jsx)("ul",{className:u().list,children:r.map(e=>(0,a.jsx)("li",{className:u().item,children:(0,a.jsx)("a",{href:"#".concat(e.id),onClick:t=>{t.preventDefault(),x(e.id)},className:"".concat(u().link," ").concat(c||i!==e.id?"":u().active),children:e.text})},e.id))})})}var g=s(77631),f=s.n(g);function b(e){let{className:t="",onLinkClick:s,style:r}=e,o=(0,i.usePathname)(),[c,m]=(0,n.useState)(null),[h,u]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(c!==o){u(!0);let e=setTimeout(()=>{u(!1),m(o)},350);return()=>clearTimeout(e)}},[o,c]),(0,a.jsxs)("nav",{className:"".concat(f().sidebar," ").concat(t),style:r,children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(l(),{href:"/",onClick:s,className:"text-2xl font-semibold text-neutral-900 hover:text-neutral-600 transition-colors",children:"Bayes, bits & brains"})}),(0,a.jsxs)("div",{className:f().scrollableContent,children:[d.map((e,t)=>(0,a.jsxs)("div",{children:[t>0&&(0,a.jsx)("div",{className:"my-4 border-t border-gray-200"}),(0,a.jsx)("ul",{className:f().list,children:e.chapters.map((e,t)=>{let[r,i]=e,n="/".concat(i),d=o===n||""===i&&"/"===o,x=c===n||""===i&&"/"===c;return(0,a.jsxs)("li",{className:f().item,children:[(0,a.jsx)(l(),{href:n,onClick:s,className:"".concat(f().link," ").concat(d?f().active:""),children:r}),(0,a.jsx)("div",{className:"".concat(f().subsections," ").concat((d||x&&h)&&f().subsectionsVisible),children:(0,a.jsx)("div",{className:"".concat(f().subsectionWrapper," ").concat(d?f().subsectionWrapperVisible:f().subsectionWrapperHidden),children:(d||x&&h)&&(0,a.jsx)(p,{className:f().tableOfContents,onSubsectionClick:s})})})]},i)})})]},"part-".concat(t))),(0,a.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,a.jsx)("ul",{className:f().list,children:x.map((e,t)=>{let[r,i]=e,n="/".concat(i),c=o===n;return(0,a.jsx)("li",{className:f().item,children:(0,a.jsx)(l(),{href:n,onClick:s,className:"".concat(f().link," ").concat(c?f().active:""),children:r})},i)})})})]})]})}},5770:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081);s(82149);var r=s(67520);let l=e=>{let{title:t="Bayes Sequence Explorer (Log Space)",highlightSurprisals:s=!1}=e;return(0,a.jsx)(r.default,{title:t,logSpace:!0,highlightSurprisals:s})}},8226:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var a=s(58081),r=s(82149),l=s(23229);let i={intelligence:"\uD83E\uDDE0 Intelligence test",predictions:"\uD83D\uDD2E Who's less wrong?","financial-mathematics":"\uD83D\uDCC8 Modelling returns",wikipedia:"\uD83C\uDF10 How much information is on Wikipedia?",statistics:"\uD83E\uDDB6 Average foot",xkcd:"\uD83E\uDD13 Explaining XKCD jokes","machine-learning":"\uD83E\uDD2F At a loss"};function n(e){let{id:t,headline:s,children:n,startOpen:o=!1}=e,c=s||i[t]||"Riddle";return(0,r.useEffect)(()=>{c&&(window.__riddleRegistry=window.__riddleRegistry||{},window.__riddleRegistry[t]=c)},[t,c]),(0,a.jsx)(l.default,{id:t,headline:c,color:"#f5f5f5",headerColor:"#d1fae5",startOpen:o,children:n})}window.__riddleRegistry=window.__riddleRegistry||{}},10572:(e,t,s)=>{"use strict";s.d(t,{EquationProvider:()=>i,t:()=>n});var a=s(58081),r=s(82149);let l=(0,r.createContext)(null);function i(e){let{children:t}=e,[s,i]=(0,r.useState)({}),n=(0,r.useRef)(1),o=(0,r.useCallback)(e=>s[e]?s[e]:null,[s]),c=(0,r.useCallback)(e=>{if(!s[e]){let t=n.current;return n.current+=1,i(s=>({...s,[e]:t})),t}return s[e]},[s]),d=(0,r.useCallback)(()=>s,[s]);return(0,a.jsx)(l.Provider,{value:{getEquationNumber:o,registerEquation:c,getAllEquations:d},children:t})}function n(){let e=(0,r.useContext)(l);if(!e)throw Error("useEquationContext must be used within an EquationProvider");return e}},10574:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(58081),r=s(82149),l=s(49399);s(65476);let i={"\\R":"\\mathbb{R}","\\eps":"\\varepsilon"},n=e=>{let{math:t,displayMode:s=!1,throwOnError:n=!1,macros:o=i}=e,c=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(c.current)try{l.Ay.render(t,c.current,{throwOnError:n,displayMode:s,macros:o,trust:!0})}catch(e){console.error("KaTeX render error:",e),c.current&&(e instanceof Error?c.current.textContent="Error: ".concat(e.message):c.current.textContent="Error: An unknown error occurred")}},[t,s,n,o]),(0,a.jsx)("span",{ref:c})}},10959:e=>{e.exports={expand:"Expand_expand__enJz_",header:"Expand_header__Q6jAu",advancedIcon:"Expand_advancedIcon__0rGTu",image:"Expand_image__uOpNs",headline:"Expand_headline__Bgb1v",arrow:"Expand_arrow__LMPES",open:"Expand_open__7ENCb",content:"Expand_content__18I6f",hide:"Expand_hide__JxXMw"}},12148:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var a=s(58081),r=s(82149),l=s(43090);let i=e=>"*"===e||"\uD83D\uDDBC️"===e;function n(e){let t=13-e,s="0".repeat(t)+"1"+"0".repeat(e),a="0".repeat(t)+"9"+"9".repeat(e);return{min:parseInt(s,10),max:parseInt(a,10)}}function o(e,t){let s=13-e,a=13-e;for(let e=0;e<s;e++)if("*"!==t[e]&&"0"!==t[e])return 0;if("0"===t[a])return 0;let r=0;for(let s=14-e;s<14;s++)"*"===t[s]&&r++;return("*"===t[a]?9:1)*Math.pow(10,r)}let c=()=>{let[e,t]=(0,r.useState)(1),[s,c]=(0,r.useState)(!0),[d,x]=(0,r.useState)("posterior"),[m,h]=(0,r.useState)(["*","*","*","*","*","*","0","0","0","0","2","3","8","2"]),[u,p]=(0,r.useState)(null),g=(0,r.useMemo)(()=>{let e=[];return m.forEach((t,s)=>{i(t)&&e.push(s)}),e},[m]),f=(0,r.useMemo)(()=>{let t=[];for(let s=0;s<14;s++){let a=function(e,t){let{min:s,max:a}=n(e);if(0===t)return(a-s+1)/1e14;if(1e-10>Math.abs(t-1))return(Math.log(a+1)-Math.log(s))/Math.log(1e14);{let e=1-t;return(Math.pow(a+1,e)-Math.pow(s,e))/e/((Math.pow(1e14,e)-1)/e)}}(s,e),r=o(s,m),l=n(s),i=0,c=0,d=0;if(r>0){let t=function(e,t){let{min:s,max:a}=n(e);if(0===t)return a-s+1;if(1e-10>Math.abs(t-1))return Math.log(a+1)-Math.log(s);{let e=1-t;return(Math.pow(a+1,e)-Math.pow(s,e))/e}}(s,e),a=0,l=0;for(let t=0;t<1e3;t++){let t=function(e,t){if(0===o(e,t))return null;let s=13-e,a="";a+="0".repeat(13-e),"*"===t[s]?a+=Math.floor(9*Math.random()+1).toString():a+=t[s];for(let s=14-e;s<14;s++)"*"===t[s]?a+=Math.floor(10*Math.random()).toString():a+=t[s];return parseInt(a,10)}(s,m),r=Math.pow(t,-e);a+=r,(0===g.length||function(e,t){let s=e.toString().padStart(14,"0");return t.every(e=>"0"===s[e])}(t,g))&&(l+=r)}c=r*a/1e3,i=t>0?c/t:0,d=a>0?l/a:0}t.push({index:s,prior:a,likelihood:i,unnormalizedPosterior:c,posterior:0,compatibleCount:r,range:l,wildcardProb:d})}let s=t.reduce((e,t)=>e+t.unnormalizedPosterior,0);return t.forEach(e=>{e.posterior=s>0?e.unnormalizedPosterior/s:0}),t},[e,m,g]),b=(0,r.useMemo)(()=>({prior:Math.max(...f.map(e=>e.prior)),likelihood:Math.max(...f.map(e=>e.likelihood)),posterior:Math.max(...f.map(e=>e.posterior))}),[f]),y=(0,r.useMemo)(()=>f.reduce((e,t)=>e+t.posterior*t.wildcardProb,0),[f]),j=(0,r.useMemo)(()=>m.filter(i).length,[m]),v=e=>{switch(d){case"prior":return e.prior;case"likelihood":return e.likelihood;case"posterior":return e.posterior}},N=e=>{let[t,s]=e.toExponential(0).split("e"),a=parseInt(s,10);return"1"===t?"10^{".concat(a,"}"):"".concat(t," \\times 10^{").concat(a,"}")},w=b[d];return(0,a.jsxs)("div",{className:"p-4 sm:p-5 bg-gray-50 rounded-lg space-y-2 sm:space-y-3 max-w-4xl mx-auto",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-center text-gray-800",children:"XKCD Countdown Probability Calculator"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg px-4 py-1",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-2 mt-0",children:"Select prior:"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 w-8",children:"0.0"}),(0,a.jsx)("input",{type:"range",min:"0",max:"2",step:"0.1",value:e,onChange:e=>t(parseFloat(e.target.value)),className:"flex-1 h-4",style:{background:"linear-gradient(to right, #3b82f6 0%, #3b82f6 ".concat(e/2*100,"%, #e5e7eb ").concat(e/2*100,"%, #e5e7eb 100%)")}}),(0,a.jsx)("span",{className:"text-sm text-gray-500 w-8",children:"2.0"})]}),(0,a.jsxs)("p",{className:"widget-explanation left-aligned",children:["Power-law prior: ",(0,a.jsx)(l.InlineMath,{math:"p(x) \\propto x^{-".concat(e.toFixed(1),"}")}),0===e&&" (uniform prior)",1===e&&" (log-uniform prior)"]})]})]}),(0,a.jsx)(()=>{let e=(0,r.useCallback)(e=>e.map(e=>i(e)?"*":e).join(""),[]),[t,s]=(0,r.useState)(e(m));(0,r.useEffect)(()=>{s(e(m))},[e,m]);let l=14===t.length,n=0===t.length?"bg-white":l?"bg-green-50":"bg-red-50";return(0,a.jsxs)("div",{className:"bg-white rounded-lg px-4 py-1 mb-3",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-2 mt-0",children:"Select evidence:"}),(0,a.jsx)("div",{className:"flex flex-col items-center gap-3",children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("input",{type:"text",value:t,onChange:e=>{let t=e.target.value.replace(/[^0-9\*]/g,"").slice(0,14);s(t),14===t.length&&h(t.split("").map(e=>"*"===e?"*":e))},placeholder:"Enter 14 digits and * for hidden",className:"w-64 sm:w-80 px-3 py-2 border border-gray-300 rounded text-center font-mono text-lg tracking-widest transition-colors ".concat(n)})})})]})},{}),j>0&&(0,a.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,a.jsxs)("p",{className:"widget-explanation text-blue-800",children:[(0,a.jsx)("strong",{children:"Posterior probability that all hidden digits are 0:"}),"\xa0\xa0\xa0",(()=>{let e=100*y;return 0===e?"0%":100===e?"100%":e<.01?e.toFixed(6)+"%":e<.1?e.toFixed(4)+"%":e<1?e.toFixed(3)+"%":e>99.99?e.toFixed(4)+"%":e>99.9?e.toFixed(3)+"%":e.toFixed(2)+"%"})()]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,a.jsx)(()=>{let e=["prior","likelihood","posterior"],t=e.indexOf(d);return(0,a.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,a.jsxs)("div",{className:"relative w-80 h-12 bg-gray-200 rounded-full p-1",children:[(0,a.jsx)("div",{className:"absolute inset-1 bg-gray-100 rounded-full"}),(0,a.jsx)("div",{className:"absolute top-1 h-10 w-24 bg-blue-500 rounded-full transition-all duration-300 ease-out shadow-lg",style:{left:"calc(".concat(33.33*t,"% + 4px)"),width:"calc(33.33% - 8px)"}}),e.map((e,t)=>(0,a.jsx)("button",{onClick:()=>x(e),className:"absolute top-1 h-10 w-24 rounded-full transition-all duration-300 text-sm font-medium ".concat(d===e?"text-white z-20":"text-gray-600 hover:text-gray-800 z-10"),style:{left:"calc(".concat(33.33*t,"% + 4px)"),width:"calc(33.33% - 8px)"},children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})})},{}),(0,a.jsxs)("div",{className:"w-full relative",children:[(0,a.jsxs)("button",{onClick:()=>c(!s),className:"absolute top-2 right-2 px-3 py-1 text-sm rounded bg-blue-500 text-white hover:bg-blue-600 z-10",children:[s?"Log":"Normal"," scale"]}),(0,a.jsxs)("div",{className:"absolute top-2 left-1/2 transform -translate-x-1/2 text-sm font-semibold text-gray-800 z-10 pointer-events-none",children:[d.charAt(0).toUpperCase()+d.slice(1)," distribution"]}),(0,a.jsxs)("svg",{width:"100%",height:"360",viewBox:"0 0 640 360",className:"border border-gray-200 rounded",children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"barGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.8"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#1e40af",stopOpacity:"0.8"})]})}),(0,a.jsxs)("g",{transform:"translate(60, 20)",children:[(0,a.jsx)("line",{x1:"0",y1:"0",x2:"0",y2:"300",stroke:"#6b7280",strokeWidth:"1"}),(0,a.jsx)("line",{x1:"0",y1:"300",x2:"560",y2:"300",stroke:"#6b7280",strokeWidth:"1"}),Array.from({length:14},(e,t)=>(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:40*t,y1:"300",x2:40*t,y2:"305",stroke:"#6b7280",strokeWidth:"1"}),(0,a.jsxs)("text",{x:40*t,y:"320",textAnchor:"middle",fontSize:"10",fill:"#6b7280",children:[(0,a.jsx)("tspan",{children:"10"}),(0,a.jsx)("tspan",{fontSize:"8",dy:"-3",children:t})]})]},t)),(()=>{if(s&&w>0){if("likelihood"===d){let e=f.map(e=>e.likelihood).filter(e=>e>0),t=e.length>0?Math.min(...e):1e-6,s=Math.floor(Math.log10(w)),r=Math.min(s-Math.floor(Math.log10(t)),6),l=s-r,i=[];for(let e=s;e>=l;e--)i.push(e);return i.slice(0,6).map((e,t)=>{let s=300-(i.length-1-t)/(i.length-1)*280;return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:"-5",y1:s,x2:"0",y2:s,stroke:"#6b7280",strokeWidth:"1"}),(0,a.jsxs)("text",{x:"-10",y:s+5,textAnchor:"end",fontSize:"10",fill:"#6b7280",children:[(0,a.jsx)("tspan",{children:"10"}),(0,a.jsx)("tspan",{fontSize:"8",dy:"-3",children:e})]})]},t)})}{let e=[0,-1,-2,-3,-4,-5];return e.map((t,s)=>{let r=300-(e.length-1-s)/(e.length-1)*280;return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:"-5",y1:r,x2:"0",y2:r,stroke:"#6b7280",strokeWidth:"1"}),(0,a.jsx)("text",{x:"-10",y:r+5,textAnchor:"end",fontSize:"10",fill:"#6b7280",children:0===t?"1":(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("tspan",{children:"10"}),(0,a.jsx)("tspan",{fontSize:"8",dy:"-3",children:t})]})})]},s)})}}{let e="prior"===d||"posterior"===d?1:w;return[0,.2,.4,.6,.8,1].map((t,s)=>(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:"-5",y1:300-300*t,x2:"0",y2:300-300*t,stroke:"#6b7280",strokeWidth:"1"}),(0,a.jsx)("text",{x:"-10",y:305-300*t,textAnchor:"end",fontSize:"10",fill:"#6b7280",children:(t*e).toFixed(3)})]},s))}})(),f.map((e,t)=>{let r;let l=v(e);if(s&&l>0){if("likelihood"===d){let e=f.map(e=>e.likelihood).filter(e=>e>0),t=e.length>0?Math.min(...e):1e-6,s=Math.floor(Math.log10(w)),a=Math.min(s-Math.floor(Math.log10(t)),6);r=(Math.log10(l)-(s-a))/a*280}else r=(Math.log10(Math.max(l,1e-5))- -5)/5*280}else r=l/("prior"===d||"posterior"===d?1:w)*280;return r="likelihood"===d&&l>0?Math.max(15,Math.min(280,r)):l>0?Math.max(5,Math.min(280,r)):0,(0,a.jsx)("rect",{x:40*t,y:300-r,width:"38",height:r,fill:"url(#barGradient)",stroke:"#1e40af",strokeWidth:"0.5",className:"hover:opacity-80 cursor-pointer",onMouseEnter:()=>p(t),onMouseLeave:()=>p(null)},t)})]}),(0,a.jsx)("text",{x:"20",y:"50%",textAnchor:"middle",fontSize:"12",fill:"#6b7280",transform:"rotate(-90, 20, 180)",children:"likelihood"===d?"Likelihood":"Probability"})]}),null!==u&&(0,a.jsxs)("div",{className:"absolute z-50 bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg pointer-events-none",style:{left:u<7?"".concat(60+40*u,"px"):"auto",right:u>=7?"".concat(60+(13-u)*40,"px"):"auto",top:"40px",minWidth:"256px"},children:[(0,a.jsxs)("div",{className:"font-semibold text-blue-200",children:["Column ",u+1," Details"]}),(0,a.jsxs)("div",{className:"mt-1 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Numbers in ["}),(0,a.jsx)("span",{className:"text-white",children:(0,a.jsx)(l.InlineMath,{math:N(f[u].range.min)})}),(0,a.jsx)("span",{className:"text-gray-300",children:","}),(0,a.jsx)("span",{className:"text-white",children:(0,a.jsx)(l.InlineMath,{math:N(f[u].range.max+1)})}),(0,a.jsx)("span",{className:"text-gray-300",children:")"})]}),"prior"!==d&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Numbers compatible with evidence:"})," ",f[u].compatibleCount.toLocaleString()]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"text-gray-300",children:["likelihood"===d?"Likelihood estimate":"posterior"===d?"Posterior estimate":"Prior",":"]})," ",v(f[u]).toExponential(4)]})]}),(0,a.jsx)("div",{className:"absolute top-full w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900",style:{left:u<7?"20px":"auto",right:u>=7?"20px":"auto"}})]})]}),(0,a.jsx)("p",{className:"widget-explanation",children:"Hover over bars to see exact values."})]})]})}},12201:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(58081),r=s(82149),l=s(39989);let i=()=>{var e;let t=(0,r.useRef)(null),[s,i]=(0,r.useState)(null),[n,o]=(0,r.useState)(null),[c,d]=(0,r.useState)("kl"),[x,m]=(0,r.useState)("unified"),[h,u]=(0,r.useState)("original"),[p,g]=(0,r.useState)(!0),[f,b]=(0,r.useState)(null),[y,j]=(0,r.useState)(null),[v,N]=(0,r.useState)(null),[w,k]=(0,r.useState)(!1),[_,M]=(0,r.useState)(!1),[C,S]=(0,r.useState)(.4),[F,E]=(0,r.useState)(40),[A,L]=(0,r.useState)(250),[D,z]=(0,r.useState)(.6),[P,T]=(0,r.useState)(-800),[W,B]=(0,r.useState)(8),I={c:"#A8CC8C",cpp:"#9C033A",java:"#ED8B00",javascript:"#F7DF1E",typescript:"#3178C6",csharp:"#512BD4",go:"#00ADD8",rust:"#000000",dart:"#0175C2",haskell:"#5E5086",lisp:"#3FB68B",scheme:"#9F1D20",ocaml:"#EC6813",clojure:"#5881D8",scala:"#DC322F",python:"#3776AB",ruby:"#CC342D",perl:"#39457E",php:"#777BB4",lua:"#2C2D72",r:"#276DC3",julia:"#9558B2",matlab:"#0076A8",brainfuck:"#FF0000",chef:"#8B4513",prolog:"#228B22",fortran:"#4169E1"},R={harry1:"#8B0000",harry2:"#8B4513",harry3:"#2F4F4F",declaration_full:"#1E90FF",kl_intro_10kb:"#9932CC","anthems-en":"#FF4500",anthems:"#4682B4"},O={country_france:"#3B82F6",country_japan:"#EF4444",country_brazil:"#10B981",country_germany:"#F59E0B",country_australia:"#8B5CF6",fruit_apple:"#DC2626",fruit_banana:"#FCD34D",fruit_strawberry:"#FB7185",animal_lion:"#D97706",animal_elephant:"#6B7280",animal_dolphin:"#0EA5E9",animal_tiger:"#F97316",animal_penguin:"#1F2937",animal_giraffe:"#84CC16"},q=(e,t)=>"three_categories"===h?O[e]||"#666666":"programming"===t?I[e.replace("lang_","")]||"#666666":R[e.replace("text_","")]||"#808080",G=e=>{if("three_categories"===h)return({country_france:"\uD83C\uDFDB️ France",country_japan:"\uD83C\uDFDB️ Japan",country_brazil:"\uD83C\uDFDB️ Brazil",country_germany:"\uD83C\uDFDB️ Germany",country_australia:"\uD83C\uDFDB️ Australia",fruit_apple:"\uD83C\uDF4E Apple",fruit_banana:"\uD83C\uDF4E Banana",fruit_strawberry:"\uD83C\uDF4E Strawberry",animal_lion:"\uD83D\uDC31 Lion",animal_elephant:"\uD83D\uDC31 Elephant",animal_dolphin:"\uD83D\uDC31 Dolphin",animal_tiger:"\uD83D\uDC31 Tiger",animal_penguin:"\uD83D\uDC31 Penguin",animal_giraffe:"\uD83D\uDC31 Giraffe"})[e]||e;if(e.startsWith("lang_"))return e.replace("lang_","");if(e.startsWith("text_")){let t=e.replace("text_","");return({harry1:"Harry Potter 1",harry2:"Harry Potter 2",harry3:"Harry Potter 3",declaration_full:"US Declaration",kl_intro_10kb:"KL Intro","anthems-en":"Anthems (EN)",anthems:"Anthems (FR)"})[t]||t}return e};(0,r.useEffect)(()=>{H()},[]);let H=async()=>{try{let e;g(!0),b(null);try{if(!(e=await fetch("/data/unified_content_analysis.json")).ok)throw Error("Dev path failed")}catch(t){if(!(e=await fetch("/problens-web/data/unified_content_analysis.json")).ok)throw Error("Failed to fetch unified analysis data")}let t=await e.json();i(t);try{let e=await fetch("/data/three_categories_analysis.json");if(!e.ok)throw Error("Dev path failed");let t=await e.json();o(t)}catch(e){try{let e=await fetch("/problens-web/data/three_categories_analysis.json");if(!e.ok)throw Error("Failed to fetch three categories data");let t=await e.json();o(t)}catch(e){console.warn("Three categories data not available:",e)}}}catch(e){b("Failed to load analysis data"),console.error(e)}finally{g(!1)}},K=(0,r.useCallback)(()=>{let e,a,r,i;let o="three_categories"===h?n:s;if(!o||!t.current||!(e="three_categories"===h?"kl"===c?o.kl_analysis.baseline:o.generalized_divergence_analysis:"kl"===c?o.kl_analysis.baseline:o.deflate_analysis))return;let d=e.languages;"three_categories"===h?"programming"===x?d=e.languages.filter(t=>"country"===e.categories[t]):"text"===x&&(d=e.languages.filter(t=>"fruit"===e.categories[t])):"programming"===x?d=e.languages.filter(t=>"programming"===e.categories[t]):"text"===x&&(d=e.languages.filter(t=>"text"===e.categories[t]));let m=l.Ltv(t.current);m.selectAll("*").remove();let u=t.current.parentElement;if(!u)return;if(w){let e=window.innerWidth-40,t=window.innerHeight-120;e/1.6<=t?r=(a=e)/1.6:a=1.6*(r=t),i=a/1e3}else r=(a=Math.min(1e3,Math.max(700,u.getBoundingClientRect().width-32)))/1.6,i=a/1e3;let p=50*i,g=30*i;m.attr("width",a).attr("height",r);let f=m.append("g").attr("transform","translate(".concat(p,", ").concat(p,")")),b=d.map(t=>{var s;return{id:t,category:e.categories[t],displayName:G(t),size:(null===(s=e.entropy_values)||void 0===s?void 0:s[t])||1}}),y=[];Object.values(e.distance_matrix).flatMap(e=>Object.values(e)),d.forEach(t=>{d.forEach(s=>{if(t!==s){let a=e.distance_matrix[t][s],r="kl"===c?Math.max(0,a-.05):a;if(r<=C){let e=r/C;y.push({source:t,target:s,value:1-e,distance:a})}}})});let k=l.tXi(b).force("link",l.kJC(y).id(e=>e.id).distance(e=>(F+(1-e.value)*A)*i).strength(e=>Math.pow(e.value,2)*D)).force("charge",l.xJS().strength(P*i)).force("center",l.jTM((a-2*p)/2,(r-2*p)/2)).force("collision",l.eRw().radius(g+W*i)).force("boundary",()=>{b.forEach(e=>{void 0!==e.x&&void 0!==e.y&&(e.x=Math.max(g+10,Math.min(a-2*p-g-10,e.x)),e.y=Math.max(g+10,Math.min(r-2*p-g-10,e.y)))})}),_=f.append("g").selectAll("line").data(y).join("line").attr("stroke","#999").attr("stroke-opacity",.6).attr("stroke-width",e=>6*Math.pow(e.value,1.5)*i),M=f.append("g").selectAll("circle").data(b).join("circle").attr("r",e=>Math.min("text"===e.category?1.2*g:g,15+4*(e.size||1))).attr("fill",e=>q(e.id,e.category)).attr("stroke","#fff").attr("stroke-width",3).style("cursor","pointer"),S=f.append("g").selectAll("text").data(b).join("text").text(e=>e.displayName).attr("font-size","".concat(11*i,"px")).attr("font-weight","bold").attr("text-anchor","middle").attr("dy",4).attr("fill","#333").style("pointer-events","none");M.on("mouseover",(e,t)=>{j(t.id);let s=new Set([t.id]);y.forEach(e=>{e.source===t.id&&s.add(e.target),e.target===t.id&&s.add(e.source)}),M.style("opacity",e=>s.has(e.id)?1:.3),_.style("opacity",e=>e.source.id===t.id||e.target.id===t.id?.8:.1),S.style("opacity",e=>s.has(e.id)?1:.3)}).on("mouseout",()=>{j(null),M.style("opacity",1),_.style("opacity",.6),S.style("opacity",1)}).on("click",(e,t)=>{N(v===t.id?null:t.id)});let E=l.$Er().on("start",(e,t)=>{e.active||k.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}).on("drag",(e,t)=>{t.fx=e.x,t.fy=e.y}).on("end",(e,t)=>{e.active||k.alphaTarget(0),t.fx=null,t.fy=null});M.call(E),k.on("tick",()=>{_.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),M.attr("cx",e=>e.x).attr("cy",e=>e.y),S.attr("x",e=>e.x).attr("y",e=>e.y)})},[s,n,c,h,x,v,w,C,F,A,D,P,W]);if((0,r.useEffect)(()=>{K()},[K]),(0,r.useEffect)(()=>{if(!w)return;let e=()=>{K()};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[w,K]),p)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-gray-600",children:"Loading unified analysis..."})});if(f)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-red-600",children:f})});let X=w?"fixed inset-0 z-50 bg-white p-4 space-y-4 overflow-y-auto":"p-4 sm:p-6 bg-gray-50 rounded-lg space-y-4 w-full mx-auto";return(0,a.jsxs)("div",{className:X,children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Programming Languages & Texts Similarity Network"}),(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,a.jsx)("button",{onClick:()=>u("original"===h?"three_categories":"original"),className:"px-3 py-2 bg-indigo-500 text-white rounded hover:bg-indigo-600 transition-colors text-sm",children:"original"===h?"Code & Text":"\uD83C\uDFDB️\uD83C\uDF4E\uD83D\uDC31 3 Categories"}),(0,a.jsx)("button",{onClick:()=>d("kl"===c?"deflate":"kl"),className:"px-3 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors text-sm",children:"kl"===c?"KL Divergence":"three_categories"===h?"Gen. Divergence":"DEFLATE"}),(0,a.jsx)("button",{onClick:()=>m("unified"===x?"programming":"programming"===x?"text":"unified"),className:"px-3 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 transition-colors text-sm",children:"three_categories"===h?"unified"===x?"All 3 Types":"programming"===x?"\uD83C\uDFDB️ Countries":"\uD83C\uDF4E Fruits":"unified"===x?"All Content":"programming"===x?"Code Only":"Texts Only"}),(0,a.jsxs)("button",{onClick:()=>M(!_),className:"px-3 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors text-sm",children:[_?"Hide":"Show"," Controls"]}),(0,a.jsx)("button",{onClick:()=>k(!w),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:w?"Exit Fullscreen":"Fullscreen"})]})]}),(0,a.jsx)("p",{className:"text-center text-gray-600 text-sm",children:"three_categories"===h?"kl"===c?"Three categories (\uD83C\uDFDB️ Countries, \uD83C\uDF4E Fruits, \uD83D\uDC31 Animals) clustered by KL divergence of character frequencies.":"Three categories clustered by generalized divergence - compression effectiveness measured in bits per character difference.":"kl"===c?"Content clustered by KL divergence of character frequencies.".concat("unified"===x?" Programming languages (smaller circles) vs. natural language texts (larger circles).":""):"Content clustered by DEFLATE dictionary compression effectiveness.".concat("unified"===x?" Cross-domain similarity between code and text.":"")}),("three_categories"===h?n:s)&&(0,a.jsx)("div",{className:"text-center text-sm text-gray-500",children:"three_categories"===h&&n?"unified"===x?"Showing: ".concat(n.metadata.countries," countries, ").concat(n.metadata.fruits," fruits, ").concat(n.metadata.animals," animals"):"programming"===x?"Showing: ".concat(n.metadata.countries," countries only"):"Showing: ".concat(n.metadata.fruits," fruits only"):s&&("unified"===x?"Showing: ".concat(s.metadata.programming_languages," programming languages, ").concat(s.metadata.texts," texts"):"programming"===x?"Showing: ".concat(s.metadata.programming_languages," programming languages only"):"Showing: ".concat(s.metadata.texts," texts only"))}),_&&(0,a.jsxs)("div",{className:"bg-orange-50 rounded-lg border border-orange-200 p-4",children:[(0,a.jsx)("h4",{className:"font-semibold mb-3",children:"Physics Parameters"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Max Distance: ",C.toFixed(2)]}),(0,a.jsx)("input",{type:"range",min:"0.1",max:"1.0",step:"0.05",value:C,onChange:e=>S(parseFloat(e.target.value)),className:"w-full"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Only show connections ≤ this distance"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Base Spring: ",F,"px"]}),(0,a.jsx)("input",{type:"range",min:"20",max:"100",step:"5",value:F,onChange:e=>E(parseInt(e.target.value)),className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Max Spring: ",A,"px"]}),(0,a.jsx)("input",{type:"range",min:"150",max:"400",step:"25",value:A,onChange:e=>L(parseInt(e.target.value)),className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Link Strength: ",D.toFixed(1)]}),(0,a.jsx)("input",{type:"range",min:"0.1",max:"2.0",step:"0.1",value:D,onChange:e=>z(parseFloat(e.target.value)),className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Charge: ",P]}),(0,a.jsx)("input",{type:"range",min:"-1500",max:"-200",step:"50",value:P,onChange:e=>T(parseInt(e.target.value)),className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Collision: ",W,"px"]}),(0,a.jsx)("input",{type:"range",min:"2",max:"20",step:"2",value:W,onChange:e=>B(parseInt(e.target.value)),className:"w-full"})]})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 overflow-hidden",children:(0,a.jsx)("div",{className:"w-full flex justify-center",children:(0,a.jsx)("svg",{ref:t})})}),(y||v)&&s&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsxs)("h4",{className:"font-semibold text-lg mb-2",children:[G(y||v),(0,a.jsxs)("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",s.kl_analysis.baseline.categories[y||v],")"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h5",{className:"font-medium text-gray-700 mb-2",children:["Most Similar Content (","kl"===c?"KL distance":"DEFLATE","):"]}),(()=>{let e="kl"===c?s.kl_analysis.baseline.distance_matrix:s.deflate_analysis.distance_matrix;return e&&e[y||v]?(0,a.jsx)("div",{className:"space-y-1",children:Object.entries(e[y||v]).filter(e=>{let[t]=e;return t!==(y||v)}).sort((e,t)=>{let[,s]=e,[,a]=t;return s-a}).slice(0,5).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm",children:G(t)}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:s.toFixed(3)})]},t)})}):null})()]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium text-gray-700 mb-2",children:"Properties:"}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:["kl"===c&&s.kl_analysis.baseline.entropy_values&&(0,a.jsxs)("div",{children:["Entropy: ",null===(e=s.kl_analysis.baseline.entropy_values[y||v])||void 0===e?void 0:e.toFixed(3)," bits"]}),"deflate"===c&&s.deflate_analysis.compression_benefits&&(0,a.jsxs)("div",{children:["Avg compression benefit: ",(Object.values(s.deflate_analysis.compression_benefits[y||v]).filter((e,t,a)=>Object.keys(s.deflate_analysis.compression_benefits[y||v])[t]!==(y||v)).reduce((e,t)=>e+t,0)/(Object.keys(s.deflate_analysis.compression_benefits).length-1)*100).toFixed(1),"%"]})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Legend"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Circle size:"})," Character entropy (larger = more diverse)"]}),(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Edge thickness:"})," Content similarity strength"]}),(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Programming languages:"})," Smaller circles, language-specific colors"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Natural language texts:"})," Larger circles, content-specific colors"]}),(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Distance:"})," Closer nodes = more similar content"]}),(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Cross-domain links:"})," Show code/text relationships"]})]})]})]})]})}},12499:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var a=s(58081),r=s(82149);let l=["Fair","Biased"],i=["Fair","Biased heads","Biased tails"],n={priors:[2,1],likelihoods:[.5,.25]},o={priors:[3,2,1],likelihoods:[.5,.75,.25]},c=e=>{let{title:t="Bayes Calculator"}=e,[s,c]=(0,r.useState)(2),[d,x]=(0,r.useState)([...n.priors]),[m,h]=(0,r.useState)([...n.likelihoods]),u=e=>{2===e?(c(2),x([...n.priors]),h([...n.likelihoods])):(c(3),x([...o.priors]),h([...o.likelihoods]))},p=(e,t)=>{let s=[...d];s[e]=t,x(s)},g=(e,t)=>{let s=[...m];s[e]=t,h(s)},f=(0,r.useMemo)(()=>{let e=d.map((e,t)=>e*m[t]),t=e.reduce((e,t)=>e+t,0),s=e.map(e=>t>0?e/t*100:0);return{posterior:e,probabilities:s}},[d,m]),b=2===s?l:i;return(0,a.jsxs)("div",{className:"p-4 sm:p-6 bg-gray-50 rounded-lg space-y-4 max-w-3xl mx-auto",children:[t&&(0,a.jsx)("h3",{className:"text-lg font-semibold text-center text-gray-800",children:t}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 sm:p-6 space-y-4 relative",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 w-40 text-right",children:"Prior odds:"}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col py-2 px-3 rounded bg-blue-50 ml-4 overflow-x-auto",children:[(0,a.jsx)("div",{className:"flex items-center justify-center space-x-2 mb-1",children:d.map((e,t)=>(0,a.jsx)("div",{className:"w-20 text-center",children:(0,a.jsx)("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:b[t]})},"label-".concat(t)))}),(0,a.jsx)("div",{className:"flex items-center justify-center space-x-2",children:d.map((e,t)=>(0,a.jsxs)(r.Fragment,{children:[0!==t&&(0,a.jsx)("span",{className:"text-gray-500 text-lg",children:":"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{type:"number",value:e,onChange:e=>p(t,parseFloat(e.target.value)||0),className:"font-mono text-sm font-bold w-20 text-center border border-gray-300 rounded px-2 py-1",step:"0.1",min:"0"})})]},"prior-".concat(t)))})]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 w-40 text-right",children:"Likelihood of heads:"}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center space-x-2 py-2 px-3 rounded bg-orange-50 ml-4 overflow-visible relative",children:m.map((e,t)=>(0,a.jsxs)(r.Fragment,{children:[0!==t&&(0,a.jsx)("span",{className:"text-gray-500 text-lg",children:":"}),(0,a.jsxs)("div",{className:"flex flex-col items-center relative",children:[(0,a.jsx)("input",{type:"number",value:e,onChange:e=>g(t,parseFloat(e.target.value)||0),className:"font-mono text-sm font-bold w-20 text-center border border-gray-300 rounded px-2 py-1",step:"0.01",min:"0",max:"1"}),(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 -mt-8 z-50 pointer-events-none",children:(0,a.jsx)("div",{className:"bg-white border-2 border-gray-300 rounded-full w-8 h-8 flex items-center justify-center shadow-sm",children:(0,a.jsx)("span",{className:"text-blue-600 text-lg font-bold",children:"\xd7"})})})]})]},"like-".concat(t)))})]}),(0,a.jsx)("div",{className:"border-t border-gray-300 ml-40"}),(0,a.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 w-40 text-right",children:"Posterior odds:"}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center space-x-2 py-2 px-3 rounded bg-green-50 ml-4 overflow-x-auto",children:f.posterior.map((e,t)=>(0,a.jsxs)(r.Fragment,{children:[0!==t&&(0,a.jsx)("span",{className:"text-gray-500 text-lg",children:":"}),(0,a.jsx)("span",{className:"font-mono text-sm font-bold text-blue-600 w-20 text-center",children:e.toFixed(2)})]},"post-".concat(t)))})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 w-40 text-right",children:"Posterior probability:"}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center space-x-2 py-2 px-3 rounded bg-green-50 ml-4 overflow-x-auto",children:f.probabilities.map((e,t)=>(0,a.jsxs)(r.Fragment,{children:[0!==t&&t!==f.probabilities.length-1&&(0,a.jsx)("span",{className:"text-gray-500 text-lg",children:":"}),(0,a.jsxs)("span",{className:"font-mono text-sm font-bold text-blue-600 w-20 text-center",children:[e.toFixed(1),"%"]})]},"prob-".concat(t)))})]})]})]}),(0,a.jsx)("div",{className:"flex justify-center mt-4",children:(0,a.jsxs)("div",{className:"inline-flex rounded-lg border border-gray-200 bg-gray-100 p-1",children:[(0,a.jsx)("button",{onClick:()=>u(2),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors ".concat(2===s?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"2 hypotheses"}),(0,a.jsx)("button",{onClick:()=>u(3),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors ".concat(3===s?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"3 hypotheses"})]})})]})}},13150:e=>{e.exports={"tooltip-trigger":"Tooltip_tooltip-trigger__wyzE1","tooltip-content":"Tooltip_tooltip-content__CghKb","tooltip-paragraph":"Tooltip_tooltip-paragraph__3TFzA","tooltip-line":"Tooltip_tooltip-line__duO7P","tooltip-list-item":"Tooltip_tooltip-list-item__gA4l_","tooltip-strong":"Tooltip_tooltip-strong__mtCss","tooltip-em":"Tooltip_tooltip-em__6be_Y","tooltip-code":"Tooltip_tooltip-code__9gf3_","tooltip-link":"Tooltip_tooltip-link__eeIc3","tooltip-image":"Tooltip_tooltip-image__8wcU8","tooltip-loading":"Tooltip_tooltip-loading__kL9Z_",slideDownAndFade:"Tooltip_slideDownAndFade__Q9_HW",slideUpAndFade:"Tooltip_slideUpAndFade__5kzp0",slideRightAndFade:"Tooltip_slideRightAndFade__q7eRR",slideLeftAndFade:"Tooltip_slideLeftAndFade__kflny"}},13790:(e,t,s)=>{"use strict";s.d(t,{default:()=>y});var a=s(58081),r=s(82149),l=s(43090),i=s(61803),n=s(95670),o=s(96090);let c=[-1.9,-1.2,-.4,.3,1.1,1.8],d=[{x:-3,y:-2.8},{x:-2,y:-1.4},{x:-1,y:-.6},{x:0,y:.3},{x:1,y:1.8},{x:2,y:2.4},{x:3,y:3.1}],x=[{x:-2,y:-1},{x:-1.5,y:-1.2},{x:-2.2,y:-.7},{x:2,y:2},{x:1.5,y:2.1},{x:2.3,y:1.7},{x:0,y:-2},{x:.3,y:-1.8},{x:-.4,y:-2.2}],m=[{x:-2,y:-2,label:0},{x:-1,y:-1.5,label:0},{x:-1.5,y:-2.5,label:0},{x:2,y:2,label:1},{x:1.2,y:2.5,label:1},{x:2.5,y:1.5,label:1}],h=e=>e.reduce((e,t)=>e+t,0)/(e.length||1),u=e=>{let t=h(e);return e.reduce((e,s)=>e+(s-t)**2,0)/(e.length||1)},p=e=>{let t=e.length,s=e.reduce((e,t)=>e+t.x,0),a=e.reduce((e,t)=>e+t.y,0),r=e.reduce((e,t)=>e+t.x*t.y,0),l=t*e.reduce((e,t)=>e+t.x*t.x,0)-s**2;if(0===l)return{a:0,b:0};let i=(t*r-s*a)/l;return{a:i,b:(a-i*s)/t}},g=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(0===e.length)return{centroids:[],assignments:[]};let a=e.slice(0,t).map(e=>({...e})),r=[];for(let t=0;t<s;t++)r=e.map(e=>{let t=0,s=1/0;return a.forEach((a,r)=>{let l=(e.x-a.x)**2+(e.y-a.y)**2;l<s&&(s=l,t=r)}),t}),a=a.map((t,s)=>{let a=e.filter((e,t)=>r[t]===s);return 0===a.length?t:{x:h(a.map(e=>e.x)),y:h(a.map(e=>e.y))}});return{centroids:a,assignments:r}},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,a={x:0,y:0,b:0},r=e=>1/(1+Math.exp(-e));for(let l=0;l<t;l++){let t=0,l=0,i=0;e.forEach(e=>{let s=r(a.x*e.x+a.y*e.y+a.b)-e.label;t+=s*e.x,l+=s*e.y,i+=s});let n=e.length;a.x-=s*t/n,a.y-=s*l/n,a.b-=s*i/n}return a},b={meanVariance:{model:"p(x_1,\\ldots,x_n\\mid \\mu,\\sigma^2) = \\prod_{i=1}^n \\frac{1}{\\sqrt{2\\pi\\sigma^2}} e^{-\\frac{(x_i-\\mu)^2}{2\\sigma^2}}",loss:"\\hat{\\mu} = \\arg\\min_{\\mu} \\sum_{i = 1}^n (x_i-\\mu)^2",explanation:()=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:["Given a set of numbers ",(0,a.jsx)(i.default,{math:"x_1, \\dots, x_n"}),", how do we estimate their mean and variance? We've already approached this riddle from various angles. Now, let's combine our insights."]}),(0,a.jsxs)("p",{children:["First, we transform the general idea that mean and variance are important into a concrete probabilistic model. The maximum entropy principle suggests modeling the data as independent samples drawn from"," ",(0,a.jsx)("a",{href:"04-max_entropy#normal",children:"the Gaussian distribution"}),"."]}),(0,a.jsxs)("p",{children:["Once we have a set of possible models—all Gaussian distributions—we can select the best one using"," ",(0,a.jsx)("a",{href:"03-minimizing#mle",children:"the maximum likelihood principle"}),"."]}),(0,a.jsxs)("p",{children:["We want to find ",(0,a.jsx)(i.default,{math:"\\hat\\mu, \\hat\\sigma^2"})," that maximize"]}),(0,a.jsx)("div",{className:"my-4 text-center",children:(0,a.jsx)(i.default,{displayMode:!0,math:"\\hat\\mu, \\hat\\sigma^2 = \\argmin_{\\mu, \\sigma^2} \\prod_{i = 1}^N \\frac{1}{\\sqrt{2\\pi\\sigma^2}} e^{-\\frac{(x_i-\\mu)^2}{2\\sigma^2}}"})}),(0,a.jsxs)("p",{children:["It's typically easier to write down the logarithm of the likelihood function. As"," ",(0,a.jsx)("a",{href:"04-mle",children:"we discussed"}),", we can call it cross-entropy minimization or log-likelihood maximization. In any case, the problem simplifies to this:"]}),(0,a.jsx)(i.default,{displayMode:!0,math:"\\hat\\mu, \\hat\\sigma^2 = \\argmax_{\\mu, \\sigma^2} \\sum_{i = 1}^n \\log\\left( \\frac{1}{\\sqrt{2\\pi\\sigma^2}} e^{-\\frac{(X_i-\\mu)^2}{2\\sigma^2}} \\right)  = \\argmin_{\\mu, \\sigma^2} n \\cdot \\log \\sqrt{2\\pi\\sigma^2} + \\sum_{i = 1}^n \\frac{(X_i-\\mu)^2}{2\\sigma^2}"}),(0,a.jsxs)("p",{children:["There are several ways to solve this optimization problem. Differentiation is likely the cleanest: If we define ",(0,a.jsx)(i.default,{math:"\\mathcal{L}"})," to be the expression above, then:"]}),(0,a.jsx)(i.default,{displayMode:!0,math:"\\frac{\\partial \\mathcal{L}}{\\partial \\mu} = \\frac{1}{\\sigma^2} \\sum_{i = 1}^n 2(X_i - \\mu) "}),(0,a.jsxs)("p",{children:["Setting ",(0,a.jsx)(i.default,{math:"\\frac{\\partial \\mathcal{L}}{\\partial \\mu} = 0"})," leads to"," ",(0,a.jsx)(i.default,{math:"\\hat\\mu = \\frac{1}{n} \\sum_{i=1}^n X_i"}),". Similarly,"]}),(0,a.jsx)(i.default,{displayMode:!0,math:"\\frac{\\partial \\mathcal{L}}{\\partial \\sigma} = n/\\sigma - \\sum_{i = 1}^n \\frac{(X_i-\\mu)^2}{\\sigma^3}"}),(0,a.jsxs)("p",{children:["Setting ",(0,a.jsx)(i.default,{math:"\\frac{\\partial \\mathcal{L}}{\\partial \\sigma} = 0"})," then leads to"," ",(0,a.jsx)(i.default,{math:"\\hat\\sigma^2 = \\frac{1}{n} \\sum_{i = 1}^n (X_i - \\mu)^2"}),"."]}),(0,a.jsx)("p",{children:'What I want to emphasize is how our only initial assumption about the data was simply, "we have a bunch of numbers, and we care about their mean and variance." The KL divergence that reduced the rest to running the math autopilot.'})]})},linearRegression:{model:"p((x_1,y_1),\\ldots(x_n,y_n) \\mid a,b,\\sigma^2) = \\prod_{i=1}^n \\frac{1}{\\sqrt{2\\pi\\sigma^2}} e^{-\\frac{(a x_i + b - y_i)^2}{2\\sigma^2}}",loss:"\\hat{a},\\hat{b} = \\arg\\min_{a,b} \\sum_{i=1}^n (a x_i + b - y_i)^2",explanation:()=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:["Suppose we are given a list of pairs ",(0,a.jsx)(i.default,{math:"(x_1, y_1), \\dots, (x_n, y_n)"}),". We believe the data exhibits a roughly linear dependency, meaning there exist some constants ",(0,a.jsx)(i.default,{math:"a,b"})," such that ",(0,a.jsx)(i.default,{math:"y_i \\approx a\\cdot x_i + b"}),". Our objective is to determine"," ",(0,a.jsx)(i.default,{math:"a"})," and ",(0,a.jsx)(i.default,{math:"b"}),"."]}),(0,a.jsxs)("p",{children:["Let's transform this into a concrete probabilistic model. We'll model the data by assuming"," ",(0,a.jsx)(i.default,{math:"y_i"})," originates from the distribution"," ",(0,a.jsx)(i.default,{displayMode:!0,math:"a\\cdot x_i + b + \\text{noise}."})]}),(0,a.jsxs)("p",{children:["The noise is generated from a real-valued distribution. How do we choose it? The uniform distribution doesn't normalize over real numbers, making it unsuitable; the same applies to the exponential distribution. The next choice on the menu is the ",(0,a.jsx)("strong",{children:"Gaussian distribution"})," ",(0,a.jsx)(i.default,{math:"N(\\mu, \\sigma^2)"}),", so let's go with that. This introduces a slight complication as we now have two new parameters",(0,a.jsx)(i.default,{math:"\\mu, \\sigma^2"})," in our model"," ",(0,a.jsx)(i.default,{math:"y_i \\sim a\\cdot x_i + b + N(\\mu, \\sigma^2)"}),", even though we only care about"," ",(0,a.jsx)(i.default,{math:"a, b"})," and not ",(0,a.jsx)(i.default,{math:"\\mu, \\sigma^2"}),"."]}),(0,a.jsxs)("p",{children:["But this is fine. We can assume ",(0,a.jsx)(i.default,{math:"\\mu = 0"}),", because otherwise, we could replace"," ",(0,a.jsx)(i.default,{math:"N(\\mu, \\sigma^2)"})," with ",(0,a.jsx)(i.default,{math:"N(0, \\sigma^2)"})," and"," ",(0,a.jsx)(i.default,{math:"b"})," with ",(0,a.jsx)(i.default,{math:"b + \\mu"})," to achieve the same data model. We'll address ",(0,a.jsx)(i.default,{math:"\\sigma"})," in a moment."]}),(0,a.jsx)("p",{children:"Let's proceed with our recipe and apply the maximum likelihood principle. We write down the likelihood - the probability of our data being sampled from the model distribution:"}),(0,a.jsx)("div",{className:"my-4 text-center",children:(0,a.jsx)(i.default,{math:"P((x_1, y_1), \\dots, (x_n, y_n) | a, b, \\sigma^2, x_1, \\dots, x_n) = \\prod_{i = 1}^n \\frac{1}{\\sqrt{2\\pi\\sigma^2}} e^{-\\frac{(ax_i + b - y_i)^2}{2\\sigma^2}}"})}),(0,a.jsx)("p",{children:"As usual, it's simpler to consider the log-likelihood (or cross-entropy):"}),(0,a.jsx)("div",{className:"my-4 text-center",children:(0,a.jsx)(i.default,{math:"\\log P(\\text{data} | \\text{parameters}) = -\\frac{n}{2}\\ln(2\\pi\\sigma^2) - \\frac{1}{2\\sigma^2} \\sum_{i=1}^n (a\\cdot x_i + b - y_i)^2"})}),(0,a.jsxs)("p",{children:["This expression appears rather complex, but we notice that for any fixed value of"," ",(0,a.jsx)(i.default,{math:"\\sigma^2"}),", the optimization problem for ",(0,a.jsx)(i.default,{math:"a,b"})," reduces to minimizing:"]}),(0,a.jsx)("div",{className:"my-4 text-center",children:(0,a.jsx)(i.default,{displayMode:!0,math:"\\hat{a}, \\hat{b} = \\argmin_{a,b} \\sum_{i=1}^n (a\\cdot x_i + b - y_i)^2"})}),(0,a.jsxs)("p",{children:["Therefore, we can effectively disregard the added parameter ",(0,a.jsx)(i.default,{math:"\\sigma^2"})," and simply optimize above expression, which is the classical"," ",(0,a.jsx)("a",{href:"https://en.wikipedia.org/wiki/Ordinary_least_squares",children:"least-squares loss function"})," for linear regression. Notice how the square in the loss function emerged directly from our maximum entropy assumption of Gaussian noise."]})]})},kMeans:{model:"p(x) = \\frac{1}{k} \\sum_{j=1}^k \\mathcal{N}(x\\mid \\mu_j,\\sigma^2 I)",loss:"\\argmin_{\\mu_1,\\ldots,\\mu_k} \\sum_{i=1}^n \\min_j \\|x_i-\\mu_j\\|^2",explanation:()=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:["We are given a set of points ",(0,a.jsx)(i.default,{math:"x_1, \\dots, x_n"})," on, say, a 2D plane. Our objective is to group them into ",(0,a.jsx)(i.default,{math:"k"})," clusters."]}),(0,a.jsxs)("p",{children:["Let's transform this into a probabilistic model. We'll use"," ",(0,a.jsx)(i.default,{math:"\\mu_1, \\dots, \\mu_k"})," to represent the centers of these clusters. The significance of these points is that if a point ",(0,a.jsx)(i.default,{math:"x_i"})," belongs to cluster ",(0,a.jsx)(i.default,{math:"j"}),", then its Euclidean distance ",(0,a.jsx)(i.default,{math:"||x_i - \\mu_j||"})," should be small."]}),(0,a.jsxs)("p",{children:["As before, we can employ the maximum entropy distribution to construct a concrete model. Since the exponential function doesn't normalize, we will use the Gaussian. This time, we need to use the"," ",(0,a.jsx)("a",{href:"https://en.wikipedia.org/wiki/Multivariate_normal_distribution",children:"Multivariate Gaussian"})," but don't worry, the 2D Gaussian with mean ",(0,a.jsx)(i.default,{math:"\\mu"})," and covariance matrix"," ",(0,a.jsx)(i.default,{math:"\\Sigma"})," is still the max-entropy distribution with that mean and that covariance. We will use"," ",(0,a.jsx)(i.default,{displayMode:!0,math:"\\Sigma = \\begin{pmatrix} \\sigma^2 & 0 \\\\ 0 & \\sigma^2 \\end{pmatrix},"})," ","this corresponds to a nice rotationally symmetric distribution that looks like"," ",(0,a.jsx)(n.Tooltip,{tooltip:"![Multivariate Gaussian](07-machine_learning/Multivariate_Gaussian.png)",children:"a beautiful hill"}),". We have"]}),(0,a.jsx)("div",{className:"my-4 text-center",children:(0,a.jsx)(i.default,{math:"p(x | \\mu_j) = \\frac{1}{2\\pi\\sigma^2} e^{-\\frac{||x-\\mu_j||^2}{2\\sigma^2}}"})}),(0,a.jsxs)("p",{children:["The notation ",(0,a.jsx)(i.default,{math:"p(x | \\mu_j)"})," signifies that this is our model for points originating from the ",(0,a.jsx)(i.default,{math:"j"}),"-th cluster. However, we want a complete probabilistic model ",(0,a.jsx)(i.default,{math:"p(x)"}),". We can achieve this by assigning a prior probability to how likely each cluster is. The maximum entropy prior is the uniform distribution, so we will choose:"]}),(0,a.jsx)("div",{className:"my-4 text-center",children:(0,a.jsx)(i.default,{math:"p(x) = \\frac{1}{k} \\sum_{j = 1}^k p(x | \\mu_j)"})}),(0,a.jsxs)("p",{children:["We now have a probabilistic model that generates data ",(0,a.jsx)(i.default,{math:"x"})," from a distribution"," ",(0,a.jsx)(i.default,{math:"p"}),". It's parameterized by ",(0,a.jsx)(i.default,{math:"k+1"})," values:"," ",(0,a.jsx)(i.default,{math:"\\mu_1, \\dots, \\mu_k"}),", and ",(0,a.jsx)(i.default,{math:"\\sigma^2"}),". We will use maximum likelihood to determine these parameters. The principle dictates that we should maximize the following log-likelihood:"]}),(0,a.jsx)("div",{className:"my-4 text-center",children:(0,a.jsx)(i.default,{displayMode:!0,id:"kmeans-likelihood",math:"\\argmax_{\\substack{\\mu_1, \\dots, \\mu_k \\\\ \\sigma^2}}\\,\\,\\, -n \\log \\left( k\\cdot 2\\pi\\sigma^2\\right) + \\sum_{i = 1}^n  \\log \\sum_{j = 1}^k e^{-\\frac{||x_i-\\mu_j||^2}{2\\sigma^2}}"})}),(0,a.jsxs)("p",{children:["Optimizing this expression corresponds to an algorithm known as"," ",(0,a.jsxs)("a",{href:"https://en.wikipedia.org/wiki/Fuzzy_clustering",children:["soft ",(0,a.jsx)(i.default,{math:"k"}),"-means"]}),'. The term "soft" indicates that if a new point ',(0,a.jsx)(i.default,{math:"x"})," arrives, the parameter"," ",(0,a.jsx)(i.default,{math:"\\sigma"})," allows us to output a probability distribution for which cluster"," ",(0,a.jsx)(i.default,{math:"x"})," belongs to."]}),(0,a.jsxs)("p",{children:["In practice, we typically don't care that much about probabilistic assignment in"," ",(0,a.jsx)(i.default,{math:"k"}),"-means; knowing the closest cluster is usually sufficient. This corresponds to considering the limit as"," ",(0,a.jsx)(i.default,{math:"\\sigma \\rightarrow 0"}),". In this limit, ",(0,a.jsx)(o.default,{id:"kmeans-likelihood"})," simplifies quite elegantly. Specifically, we can replace the summation"," ",(0,a.jsx)(i.default,{math:"\\sum_{j = 1}^k e^{-\\frac{||x_i-\\mu_j||^2}{2\\sigma^2}}"})," with"," ",(0,a.jsx)(i.default,{math:"\\max_{j = 1}^k e^{-\\frac{||x_i-\\mu_j||^2}{2\\sigma^2}}"})," because all terms in the sum, except the largest one, become negligible as ",(0,a.jsx)(i.default,{math:"\\sigma \\rightarrow 0"}),". The expression then simplifies to:"]}),(0,a.jsx)("div",{className:"my-4 text-center",children:(0,a.jsx)(i.default,{displayMode:!0,math:"\\argmin_{\\substack{\\mu_1, \\dots, \\mu_k}} \\sum_{i = 1}^n \\min_{j = 1}^k ||x_i-\\mu_j||^2"})}),(0,a.jsxs)("p",{children:["The problem of finding ",(0,a.jsx)(i.default,{math:"\\mu_1, \\dots, \\mu_k"})," that minimize this expression is called"," ",(0,a.jsxs)("a",{href:"https://en.wikipedia.org/wiki/K-means_clustering",children:[(0,a.jsx)(i.default,{math:"k"}),"-means"]}),"."]})]})},logisticRegression:{model:"p(\\text{red}|(x,y)) = \\sigma(\\lambda(\\theta\\cdot(x,y)+\\delta))",loss:"\\argmin_{\\theta, \\delta, \\lambda} \\sum_{i = 1}^n \\ell_i \\log \\sigma(\\lambda (\\theta \\cdot (x_i,y_i) + \\delta)) + (1-\\ell_i) \\log (1-\\sigma(\\lambda (\\theta \\cdot (x_i,y_i) + \\delta)))",explanation:()=>(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"This time, we're presented with red and blue points on a plane, and our goal is to find the optimal line that separates them. Ideally, all red points would be on one side of the line, and all blue points on the other, but this isn't always achievable. In such cases, how do we determine the \"best\" separating line?"}),(0,a.jsxs)("p",{children:["It will be easier to represent the line not as ",(0,a.jsx)(i.default,{math:"y = ax+b"}),", but using its normal vector"," ",(0,a.jsx)(i.default,{math:"\\theta"})," (orthogonal to the line and of unit length) and the distance"," ",(0,a.jsx)(i.default,{math:"\\delta"})," of the origin from the line."]}),(0,a.jsxs)("p",{children:["Given a point ",(0,a.jsx)(i.default,{math:"(x, y)"})," in the plane, the crucial quantity is its distance from our line. This can be calculated using the dot product as ",(0,a.jsx)(i.default,{math:"\\theta \\cdot (x, y) + \\delta"}),"."]}),(0,a.jsxs)("p",{children:["Now, employing the maximum entropy principle, we construct a probabilistic model that transforms this distance into a probability of color. It tells us that the right way of converting real numbers to probabilities is the"," ",(0,a.jsx)("a",{href:"04-max_entropy",children:"logistic function"}),". That is, our probabilistic model says:"]}),(0,a.jsx)("div",{className:"my-4 text-center",children:(0,a.jsx)(i.default,{math:"p(\\textrm{red} | (x, y)) = \\sigma\\left( \\lambda (\\theta \\cdot (x, y) + \\delta) \\right)"})}),(0,a.jsxs)("p",{children:["where ",(0,a.jsx)(i.default,{math:"\\sigma"})," is the logistic function"," ",(0,a.jsx)(i.default,{math:"\\sigma(x) = e^x / (1+e^x)"})," and $",(0,a.jsx)(i.default,{math:"\\lambda"})," is a new parameter that we have to optimize alongside $\\theta$ and $\\delta$. Naturally, we also have"," ",(0,a.jsx)(i.default,{math:"p(\\textrm{blue} | (x, y)) = 1 - p(\\textrm{red} | (x, y))"}),"."]}),(0,a.jsxs)("p",{children:["The constant ",(0,a.jsx)(i.default,{math:"\\lambda"})," is fortunately quite useful parameter—it quantifies our confidence in the classification. This is convenient because if we want to classify a new point in the future, we can not only assign it a red/blue color based on which side of the line it falls, but also use our probabilistic model to compute how certain we are about our classification."]}),(0,a.jsxs)("p",{children:["Once we have a model, we can apply the maximum likelihood principle to find its parameters. This principle instructs us to find ",(0,a.jsx)(i.default,{math:"\\theta, \\delta, \\lambda"})," that minimize the following log-likelihood:"]}),(0,a.jsx)("div",{className:"my-4 text-center",children:(0,a.jsx)(i.default,{displayMode:!0,math:"\\argmin_{\\theta, \\delta, \\lambda} \\sum_{i = 1}^n \\ell_i \\log \\sigma(\\lambda (\\theta \\cdot (x_i,y_i) + \\delta)) + (1-\\ell_i) \\log (1-\\sigma(\\lambda (\\theta \\cdot (x_i,y_i) + \\delta)))"})}),(0,a.jsxs)("p",{children:["where ",(0,a.jsx)(i.default,{math:"\\ell_i"})," is an indicator variable (i.e.,"," ",(0,a.jsx)(i.default,{math:"\\ell_i \\in \\{0,1\\}"}),") denoting whether the point ",(0,a.jsx)(i.default,{math:"(x_i,y_i)"})," is red. This problem, known as"," ",(0,a.jsx)("a",{href:"https://en.wikipedia.org/wiki/Logistic_regression",children:"logistic regression"}),", is hard to solve exactly, but gradient descent typically works well."]})]})}};function y(e){let{showExplanations:t=!0,defaultMode:s="meanVariance"}=e,[n,o]=(0,r.useState)(s),[y,j]=(0,r.useState)(c),[v,N]=(0,r.useState)(d),[w,k]=(0,r.useState)(x),[_,M]=(0,r.useState)(m),[C,S]=(0,r.useState)(3),[F,E]=(0,r.useState)(0),A=(0,r.useMemo)(()=>0===y.length?null:{mean:h(y),sd:Math.sqrt(u(y))},[y]),L=(0,r.useMemo)(()=>p(v),[v]),D=(0,r.useMemo)(()=>g(w,C),[w,C]),z=(0,r.useMemo)(()=>f(_),[_]),P=e=>(e+3)/6*400,T=e=>400-(e+3)/6*400,W=(e,t)=>({x:e/400*6-3,y:-(t/400*6-3)});return(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mx-auto",style:{width:"".concat(400,"px")},children:[(0,a.jsxs)("select",{value:n,onChange:e=>o(e.target.value),className:"border p-1 rounded",children:[(0,a.jsx)("option",{value:"meanVariance",children:"Mean & Variance"}),(0,a.jsx)("option",{value:"linearRegression",children:"Linear Regression"}),(0,a.jsx)("option",{value:"kMeans",children:"k-Means"}),(0,a.jsx)("option",{value:"logisticRegression",children:"Logistic Regression"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["kMeans"===n&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("span",{className:"text-sm",children:"k="}),(0,a.jsx)("input",{type:"number",min:2,max:5,value:C,onChange:e=>S(parseInt(e.target.value)||3),className:"w-12 border p-1 rounded text-center"})]}),"logisticRegression"===n&&(0,a.jsxs)("button",{onClick:()=>E(+(0===F)),className:"px-4 py-1 rounded text-white ".concat(0===F?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"),children:["Add ",0===F?"Red":"Blue"]}),(0,a.jsx)("button",{onClick:()=>{"meanVariance"===n?j([]):"linearRegression"===n?N([]):"kMeans"===n?k([]):"logisticRegression"===n&&M([])},className:"px-4 py-1 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",children:"Reset"})]})]}),(0,a.jsxs)("svg",{width:400,height:400,className:"border bg-white mx-auto",onClick:e=>{let t=e.currentTarget.getBoundingClientRect(),s=e.clientX-t.left,a=e.clientY-t.top;"meanVariance"===n?j([...y,s/400*6-3]):"linearRegression"===n?N([...v,W(s,a)]):"kMeans"===n?k([...w,W(s,a)]):"logisticRegression"===n&&M([..._,{...W(s,a),label:F}])},children:[(0,a.jsx)("line",{x1:0,y1:200,x2:400,y2:200,stroke:"#e5e7eb"}),(0,a.jsx)("line",{x1:200,y1:0,x2:200,y2:400,stroke:"#e5e7eb"}),"meanVariance"===n?y.map((e,t)=>(0,a.jsx)("circle",{cx:P(e),cy:200,r:4,fill:"#1e3a8a"},t)):"linearRegression"===n?v.map((e,t)=>(0,a.jsx)("circle",{cx:P(e.x),cy:T(e.y),r:4,fill:"#1e3a8a"},t)):"kMeans"===n?w.map((e,t)=>{let s=D.assignments[t],r=["#ef4444","#10b981","#3b82f6","#f59e0b","#8b5cf6"];return(0,a.jsx)("circle",{cx:P(e.x),cy:T(e.y),r:4,fill:r[s%r.length]},t)}):"logisticRegression"===n?_.map((e,t)=>(0,a.jsx)("circle",{cx:P(e.x),cy:T(e.y),r:5,fill:0===e.label?"#dc2626":"#2563eb"},t)):void 0,(()=>{if("meanVariance"===n&&A){let{mean:e,sd:t}=A,s=P(e),r=t/6*400,i=s-r,n=s+r;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("line",{x1:s,y1:194,x2:s,y2:206,stroke:"#f59e0b",strokeWidth:3}),(0,a.jsx)("foreignObject",{x:s+4,y:180,width:"60",height:"20",children:(0,a.jsx)("div",{className:"text-xs text-amber-600",children:(0,a.jsx)(l.InlineMath,{math:"\\mu = ".concat(e.toFixed(2))})})}),(0,a.jsx)("line",{x1:i,y1:175,x2:n,y2:175,stroke:"#f59e0b",strokeWidth:2}),(0,a.jsx)("line",{x1:i,y1:171,x2:i,y2:179,stroke:"#f59e0b",strokeWidth:2}),(0,a.jsx)("line",{x1:n,y1:171,x2:n,y2:179,stroke:"#f59e0b",strokeWidth:2}),(0,a.jsx)("foreignObject",{x:(i+n)/2-30,y:159,width:"60",height:"20",children:(0,a.jsx)("div",{className:"text-xs text-amber-600 text-center",children:(0,a.jsx)(l.InlineMath,{math:"\\sigma = ".concat((t||0).toFixed(2))})})})]})}if("linearRegression"===n&&L){let{a:e,b:t}=L,s=-3*e+t,r=3*e+t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("line",{x1:P(-3),y1:T(s),x2:P(3),y2:T(r),stroke:"#10b981",strokeWidth:2}),(0,a.jsx)("foreignObject",{x:5,y:2,width:"150",height:"20",children:(0,a.jsx)("div",{className:"text-xs text-emerald-600",children:(0,a.jsx)(l.InlineMath,{math:"y = ".concat(e.toFixed(2)," x + ").concat(t.toFixed(2))})})})]})}if("kMeans"===n)return D.centroids.map((e,t)=>(0,a.jsxs)("g",{children:[(0,a.jsx)("circle",{cx:P(e.x),cy:T(e.y),r:6,fill:"#000"}),(0,a.jsx)("foreignObject",{x:P(e.x)+8,y:T(e.y)-12,width:"120",height:"24",children:(0,a.jsx)("div",{className:"text-xs",children:(0,a.jsx)(l.InlineMath,{math:"\\mu_{".concat(t+1,"} = [").concat(e.x.toFixed(1),", ").concat(e.y.toFixed(1),"]")})})})]},t));if("logisticRegression"===n){let{x:e,y:t,b:s}=z,r=Math.sqrt(e*e+t*t),i=e/(r||1),n=t/(r||1),o=s/(r||1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("line",{x1:P(-3),y1:T(-(-3*e+s)/t),x2:P(3),y2:T(-(3*e+s)/t),stroke:"#000",strokeWidth:2}),(0,a.jsx)("foreignObject",{x:5,y:375,width:"300",height:"20",children:(0,a.jsx)("div",{className:"text-xs",children:(0,a.jsx)(l.InlineMath,{math:"\\lambda = ".concat(r.toFixed(2),", \\theta = (").concat(i.toFixed(2),", ").concat(n.toFixed(2),"), \\delta = ").concat(o.toFixed(2))})})})]})}return null})()]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Probabilistic model:"}),(0,a.jsx)("div",{className:"text-sm my-0",children:(0,a.jsx)(i.default,{displayMode:!0,math:b[n].model})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Loss function:"}),(0,a.jsx)("div",{className:"text-sm my-0",children:(0,a.jsx)(i.default,{displayMode:!0,math:b[n].loss})})]})]}),t&&(0,a.jsx)("div",{className:"prose max-w-none bg-white p-4 rounded",children:b[n].explanation()})]})}},16900:(e,t,s)=>{"use strict";s.d(t,{default:()=>u});var a=s(58081),r=s(82149),l=s(35313),i=s(13081),n=s(20619),o=s(99020),c=s(90207),d=s(37018),x=s(36653),m=s(19213),h=s(73233);let u=()=>{let[e,t]=(0,r.useState)([{x:.5,y:2.8},{x:.71,y:2.4},{x:.92,y:3.1},{x:1.13,y:3.5},{x:1.34,y:3},{x:1.55,y:3.8},{x:1.76,y:3.4},{x:1.97,y:4.1},{x:2.18,y:3.9},{x:2.39,y:3.2},{x:2.61,y:3.7},{x:2.82,y:3.1},{x:3.03,y:2.8},{x:3.24,y:2.2},{x:3.45,y:2.5},{x:3.66,y:1.8},{x:3.87,y:1.3},{x:4.08,y:1.7},{x:4.29,y:1.1},{x:4.5,y:1.5}]),[s,u]=(0,r.useState)(!1),[p,g]=(0,r.useState)([]),[f,b]=(0,r.useState)(!1),[y,j]=(0,r.useState)(null),[v,N]=(0,r.useState)(""),[w,k]=(0,r.useState)(2),_=(0,r.useMemo)(()=>Math.log(e.length),[e.length]),M={top:20,right:20,bottom:40,left:60},C=(0,r.useCallback)(function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=Math.max(1,Math.floor(.1*e.length)),r=0;for(let l=0;l<s;l++){let s=[...e].sort(()=>Math.random()-.5),l=s.slice(0,a),i=s.slice(a),n=i.map(e=>e.x),o=i.map(e=>e.y);try{let e=new h.Y(n,o,t),s=0;for(let t of l){let a=e.predict(t.x);s+=Math.pow(t.y-a,2)}s/=l.length,r+=s}catch(e){return 1e10}}return r/s},[]),S=(0,r.useCallback)(e=>{if(!s)return;let a=e.currentTarget.getBoundingClientRect(),r=(e.clientX-a.left-M.left)/(a.width-M.left-M.right)*5,l=(1-(e.clientY-a.top-M.top)/(a.height-M.top-M.bottom))*5;r>=0&&r<=5&&l>=0&&l<=5&&t(e=>[...e,{x:r,y:l}])},[s]),F=async()=>{if(e.length<3){N("Please add at least 3 points");return}b(!0),u(!1),N("");let t=[];try{for(let s=1;s<=Math.min(10,e.length-1);s++){let a=C(e,s),r=e.map(e=>e.x),l=e.map(e=>e.y),i=new h.Y(r,l,s),n=e.length,o=s+1,c=n*Math.log(a),d=w*o,x=d+c;t.push({degree:s,mse:a,aic:x,aicPenalty:d,logMSE:c,model:i,coefficients:i.coefficients}),s%3==0&&await new Promise(e=>setTimeout(e,10))}g(t)}catch(e){console.error("Error fitting models:",e),N("Error fitting models. Please try again.")}b(!1)},E=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=[];for(let a=0;a<=t;a++){let r=a/t*5,l=e.predict(r);s.push({x:r,y:l})}return s},[]),A=(0,r.useMemo)(()=>{if(null===y)return[];let e=p.find(e=>e.degree===y);return e?E(e.model):[]},[y,p,E]),L=(0,r.useMemo)(()=>p.map(e=>({...e,aicPenalty:w*(e.degree+1),aic:w*(e.degree+1)+e.logMSE})),[p,w]),D=(0,r.useCallback)(e=>{let t=e.currentTarget.getBoundingClientRect(),s=e=>{k(2+Math.max(0,Math.min(1,(e.clientX-t.left-50)/400))*(_-2))},a=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",a)},[_]);return(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 space-y-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Polynomial Regression & AIC Model Selection"}),(0,a.jsxs)("div",{className:"flex gap-4 flex-wrap items-center",children:[(0,a.jsx)("button",{onClick:()=>{t([]),u(!0),g([]),N(""),j(null)},className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"RESET"}),(0,a.jsx)("button",{onClick:F,disabled:e.length<3||f,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors disabled:bg-gray-400",children:f?"Running...":"Run"}),s&&(0,a.jsx)("div",{className:"widget-explanation",children:"Click on the plot to add data points"}),v&&(0,a.jsx)("div",{className:"text-sm text-red-600",children:v})]}),(0,a.jsxs)("div",{className:"border rounded p-4",children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold mb-3",children:["Data Points ",e.length>0&&"(".concat(e.length," points)")]}),(0,a.jsxs)("svg",{width:600,height:400,className:"w-full cursor-crosshair",style:{maxWidth:"".concat(600,"px")},onClick:S,children:[[0,1,2,3,4,5].map(e=>(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:M.left+e/5*(600-M.left-M.right),y1:M.top,x2:M.left+e/5*(600-M.left-M.right),y2:400-M.bottom,stroke:"#e5e7eb",strokeDasharray:"2,2"}),(0,a.jsx)("line",{x1:M.left,y1:400-M.bottom-e/5*(400-M.top-M.bottom),x2:600-M.right,y2:400-M.bottom-e/5*(400-M.top-M.bottom),stroke:"#e5e7eb",strokeDasharray:"2,2"})]},e)),(0,a.jsx)("line",{x1:M.left,y1:400-M.bottom,x2:600-M.right,y2:400-M.bottom,stroke:"#374151",strokeWidth:"2"}),(0,a.jsx)("line",{x1:M.left,y1:M.top,x2:M.left,y2:400-M.bottom,stroke:"#374151",strokeWidth:"2"}),[0,1,2,3,4,5].map(e=>(0,a.jsxs)("g",{children:[(0,a.jsx)("text",{x:M.left+e/5*(600-M.left-M.right),y:400-M.bottom+20,textAnchor:"middle",fontSize:"12",fill:"#374151",children:e}),(0,a.jsx)("text",{x:M.left-10,y:400-M.bottom-e/5*(400-M.top-M.bottom)+5,textAnchor:"end",fontSize:"12",fill:"#374151",children:e})]},e)),(0,a.jsx)("text",{x:M.left+(600-M.left-M.right)/2,y:395,textAnchor:"middle",fontSize:"14",fill:"#374151",fontWeight:"bold",children:"x"}),(0,a.jsx)("text",{x:15,y:M.top+(400-M.top-M.bottom)/2,textAnchor:"middle",fontSize:"14",fill:"#374151",fontWeight:"bold",transform:"rotate(-90, 15, ".concat(M.top+(400-M.top-M.bottom)/2,")"),children:"y"}),null!==y&&A.length>0&&(0,a.jsx)("polyline",{points:A.map(e=>"".concat(M.left+e.x/5*(600-M.left-M.right),",").concat(400-M.bottom-Math.min(5,Math.max(0,e.y))/5*(400-M.top-M.bottom))).join(" "),fill:"none",stroke:"#ff7300",strokeWidth:"3",opacity:"0.8"}),e.map((e,t)=>(0,a.jsx)("circle",{cx:M.left+e.x/5*(600-M.left-M.right),cy:400-M.bottom-e.y/5*(400-M.top-M.bottom),r:"5",fill:"#8884d8",stroke:"#6b63c7",strokeWidth:"2"},t)),null!==y&&(0,a.jsxs)("g",{children:[(0,a.jsx)("rect",{x:450,y:M.top+10,width:15,height:15,fill:"#8884d8"}),(0,a.jsx)("text",{x:470,y:M.top+22,fontSize:"12",fill:"#374151",children:"Data Points"}),(0,a.jsx)("rect",{x:450,y:M.top+30,width:15,height:15,fill:"#ff7300"}),(0,a.jsxs)("text",{x:470,y:M.top+42,fontSize:"12",fill:"#374151",children:["Polynomial (degree ",y,")"]})]})]})]}),p.length>0&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-3",children:"Model Comparison"}),(0,a.jsx)(l.u,{width:"100%",height:300,children:(0,a.jsxs)(i.b,{data:L,margin:{top:20,right:20,left:60,bottom:40},onMouseMove:e=>{e&&e.activeLabel&&j(e.activeLabel)},onMouseLeave:()=>j(null),children:[(0,a.jsx)(n.d,{strokeDasharray:"3 3"}),(0,a.jsx)(o.W,{dataKey:"degree",label:{value:"Polynomial Degree",position:"insideBottom",offset:-10},domain:[1,L.length],ticks:L.map(e=>e.degree)}),(0,a.jsx)(c.h,{label:{value:"Value",angle:-90,position:"insideLeft"}}),(0,a.jsx)(d.m,{formatter:e=>e.toFixed(2)}),(0,a.jsx)(x.s,{}),(0,a.jsx)(m.N,{type:"monotone",dataKey:"logMSE",stroke:"#8884d8",strokeWidth:2,name:"n \xd7 log(MSE)",dot:{r:4},activeDot:{r:6}}),(0,a.jsx)(m.N,{type:"monotone",dataKey:"aicPenalty",stroke:"#82ca9d",strokeWidth:2,name:"".concat(w.toFixed(1),"k (penalty)"),dot:{r:4},activeDot:{r:6}}),(0,a.jsx)(m.N,{type:"monotone",dataKey:"aic",stroke:"#ff7300",strokeWidth:3,name:"Total",dot:{r:5},activeDot:{r:7}})]})}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded",children:[(0,a.jsx)("h5",{className:"text-md font-semibold mb-3",children:"Regularization Constant"}),(0,a.jsxs)("svg",{width:"500",height:"80",className:"w-full",style:{maxWidth:"500px"},children:[(0,a.jsx)("rect",{x:"50",y:"30",width:"400",height:"8",fill:"#e5e7eb",rx:"4"}),(0,a.jsx)("circle",{cx:50+(w-2)/(_-2)*400,cy:"34",r:"12",fill:"#3b82f6",stroke:"#1d4ed8",strokeWidth:"2",className:"cursor-pointer",onMouseDown:D}),(0,a.jsx)("text",{x:"50",y:"20",textAnchor:"middle",fontSize:"12",fill:"#374151",children:"AIC (2)"}),(0,a.jsxs)("text",{x:"450",y:"20",textAnchor:"middle",fontSize:"12",fill:"#374151",children:["BIC (",_.toFixed(1),")"]}),(0,a.jsxs)("text",{x:"250",y:"65",textAnchor:"middle",fontSize:"14",fill:"#374151",fontWeight:"bold",children:["Current: ",w.toFixed(2)]}),(0,a.jsx)("rect",{x:"50",y:"10",width:"400",height:"40",fill:"transparent",className:"cursor-pointer",onMouseDown:D})]}),(0,a.jsx)("p",{className:"widget-explanation mt-2",children:"Drag to adjust the penalty constant between AIC (more permissive) and BIC (more conservative)"})]})]})})]})}},17715:e=>{e.exports={citation:"Citations_citation__Vzt0G","citation-link":"Citations_citation-link___oFqY",references:"Citations_references__A088k","reference-list":"Citations_reference-list__el6sA","reference-item":"Citations_reference-item__OA4Jl",error:"Citations_error__repcm","citation-tooltip":"Citations_citation-tooltip__0Ey2r",slideDownAndFade:"Citations_slideDownAndFade__JxyPY",slideUpAndFade:"Citations_slideUpAndFade__Jubrl","citation-tooltip-arrow":"Citations_citation-tooltip-arrow__V8S4M","tooltip-entry":"Citations_tooltip-entry__o2cCJ"}},18469:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(58081),r=s(82149),l=s(37720);let i=()=>{let e=(0,r.useRef)(null),t=(0,r.useRef)(null),[s,i]=(0,r.useState)({centerX:-.5,centerY:0,scale:200}),[n,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)({x:0,y:0}),[x,m]=(0,r.useState)(50),[h,u]=(0,r.useState)(null),p=(e,t,s)=>{let a=0,r=0,l=0;for(;a*a+r*r<=4&&l<s;){let s=a*a-r*r+e;r=2*a*r+t,a=s,l++}return l},g=(e,t)=>{if(e===t)return{r:0,g:0,b:0};let s=e/t*360,a=(1-Math.abs(0))*100/100,r=a*(1-Math.abs(s/60%2-1)),l=.5-a/2,i=0,n=0,o=0;return s<60?(i=a,n=r,o=0):s<120?(i=r,n=a,o=0):s<180?(i=0,n=a,o=r):s<240?(i=0,n=r,o=a):s<300?(i=r,n=0,o=a):(i=a,n=0,o=r),{r:Math.round((i+l)*255),g:Math.round((n+l)*255),b:Math.round((o+l)*255)}},f=(0,r.useCallback)(()=>{let t=e.current;if(!t)return;let a=t.getContext("2d");if(!a)return;let r=t.width,l=t.height,i=a.createImageData(r,l),n=i.data;for(let e=0;e<l;e++)for(let t=0;t<r;t++){let a=g(p((t-r/2)/s.scale+s.centerX,(e-l/2)/s.scale+s.centerY,x),x),i=(e*r+t)*4;n[i]=a.r,n[i+1]=a.g,n[i+2]=a.b,n[i+3]=255}a.putImageData(i,0,0)},[s,x]),b=()=>{o(!1)},y=e=>{let t=e[0].clientX-e[1].clientX,s=e[0].clientY-e[1].clientY;return Math.sqrt(t*t+s*s)};(0,r.useEffect)(()=>{f()},[f]),(0,r.useEffect)(()=>{let a=()=>{let t=e.current;if(!t)return;let s=t.parentElement;s&&(t.width=s.clientWidth,t.height=s.clientHeight,f())},r=t=>{t.preventDefault(),t.stopPropagation();let a=e.current;if(!a)return;let r=a.getBoundingClientRect(),l=t.clientX-r.left,n=t.clientY-r.top,o=t.deltaY<0?1.2:.8,c=(l-a.width/2)/s.scale+s.centerX,d=(n-a.height/2)/s.scale+s.centerY,x=s.scale*o;i({centerX:c-(l-a.width/2)/x,centerY:d-(n-a.height/2)/x,scale:x})};a(),window.addEventListener("resize",a);let l=t.current;return l&&l.addEventListener("wheel",r,{passive:!1}),()=>{window.removeEventListener("resize",a),l&&l.removeEventListener("wheel",r)}},[f,s]);let j=(()=>{let t=e.current;if(!t||0===t.width||0===t.height){let e=s.centerX-400/s.scale,t=s.centerX+400/s.scale;return{left:e,right:t,top:s.centerY-300/s.scale,bottom:s.centerY+300/s.scale}}let a=t.width,r=t.height,l=s.centerX-a/2/s.scale,i=s.centerX+a/2/s.scale;return{left:l,right:i,top:s.centerY-r/2/s.scale,bottom:s.centerY+r/2/s.scale}})(),v=t=>{let a=e.current;if(!a||0===a.width){let e=Math.max(0,Math.ceil(-Math.log10(.01*(800/s.scale))));return e=Math.min(12,Math.max(0,e)),t.toFixed(e)}let r=Math.max(0,Math.ceil(-Math.log10(.01*(a.width/s.scale))));return r=Math.min(12,Math.max(0,r)),t.toFixed(r)};return(0,a.jsxs)("div",{className:"w-full space-y-4",children:[(0,a.jsx)("div",{ref:t,className:"relative w-full h-96 md:h-[500px] border border-gray-300 rounded-lg overflow-hidden",style:{touchAction:"none"},children:(0,a.jsx)("canvas",{ref:e,className:"w-full h-full cursor-move",onMouseDown:e=>{o(!0),d({x:e.clientX,y:e.clientY})},onMouseMove:t=>{if(!n||!e.current)return;let a=(t.clientX-c.x)/s.scale,r=(t.clientY-c.y)/s.scale;i(e=>({...e,centerX:e.centerX-a,centerY:e.centerY-r})),d({x:t.clientX,y:t.clientY})},onMouseUp:b,onMouseLeave:b,onWheel:e=>{e.preventDefault(),e.stopPropagation()},onDoubleClick:t=>{let a=e.current;if(!a)return;let r=a.getBoundingClientRect(),l=t.clientX-r.left,n=t.clientY-r.top,o=(l-a.width/2)/s.scale+s.centerX;i({centerX:o,centerY:(n-a.height/2)/s.scale+s.centerY,scale:2*s.scale})},onTouchStart:e=>{1===e.touches.length?(o(!0),d({x:e.touches[0].clientX,y:e.touches[0].clientY}),u(null)):2===e.touches.length&&(o(!1),u(y(e.touches)))},onTouchMove:t=>{t.preventDefault();let a=e.current;if(a){if(1===t.touches.length&&n){let e=(t.touches[0].clientX-c.x)/s.scale,a=(t.touches[0].clientY-c.y)/s.scale;i(t=>({...t,centerX:t.centerX-e,centerY:t.centerY-a})),d({x:t.touches[0].clientX,y:t.touches[0].clientY})}else if(2===t.touches.length&&null!==h){let e=y(t.touches),r=e/h,l=(t.touches[0].clientX+t.touches[1].clientX)/2,n=(t.touches[0].clientY+t.touches[1].clientY)/2,o=a.getBoundingClientRect(),c=l-o.left,d=n-o.top,x=(c-a.width/2)/s.scale+s.centerX,m=(d-a.height/2)/s.scale+s.centerY,p=s.scale*r;i({centerX:x-(c-a.width/2)/p,centerY:m-(d-a.height/2)/p,scale:p}),u(e)}}},onTouchEnd:()=>{o(!1),u(null)}})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"iterations",className:"text-sm font-medium",children:"Max Iterations:"}),(0,a.jsx)("input",{id:"iterations",type:"range",min:"50",max:"2000",value:x,onChange:e=>m(Number(e.target.value)),className:"w-32"}),(0,a.jsx)("span",{className:"text-sm w-12",children:x})]}),(0,a.jsx)(l.A,{type:"reset",onClick:()=>{i({centerX:-.5,centerY:0,scale:200})},size:"md"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Drag • Scroll to zoom • Double-click"})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border-2 border-gray-200",children:[(0,a.jsx)("div",{className:"font-medium mb-4 text-center text-gray-700",children:"↓ Kolmogorov complexity of the picture ↓"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 border border-gray-300 bg-white p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"font-medium mb-3 text-center",children:"Mandelbrot Set Formula"}),(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsxs)("div",{children:["z₀ = 0, z",(0,a.jsx)("sub",{children:"n+1"})," = z",(0,a.jsx)("sub",{children:"n"}),"\xb2 + c"]}),(0,a.jsxs)("div",{children:["c ∈ M if |z",(0,a.jsx)("sub",{children:"n"}),"| remains bounded"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Max iterations: ",x]})]})]}),(0,a.jsxs)("div",{className:"flex-1 border border-gray-300 bg-white p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"font-medium mb-3 text-center",children:"Viewport Coordinates"}),(0,a.jsxs)("div",{className:"font-mono text-sm space-y-1",children:[(0,a.jsxs)("div",{children:["Left: ",v(j.left)]}),(0,a.jsxs)("div",{children:["Right: ",v(j.right)]}),(0,a.jsxs)("div",{children:["Top: ",v(j.top)]}),(0,a.jsxs)("div",{children:["Bottom: ",v(j.bottom)]})]})]})]})]})})]})}},20816:e=>{e.exports={toc:"TableOfContents_toc__EOBrn",title:"TableOfContents_title__8xtic",list:"TableOfContents_list__VkUd0",item:"TableOfContents_item__Xe8ed",link:"TableOfContents_link__bSABJ",active:"TableOfContents_active__RdAMp"}},21999:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(58081),r=s(82149),l=s(39989);let i=()=>{var e,t;let s=(0,r.useRef)(null),[i,n]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),[d,x]=(0,r.useState)("kl"),[m,h]=(0,r.useState)(!0),[u,p]=(0,r.useState)(null),[g,f]=(0,r.useState)(null),[b,y]=(0,r.useState)(null),[j,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),[k,_]=(0,r.useState)(!1),[M,C]=(0,r.useState)(.3),[S,F]=(0,r.useState)(30),[E,A]=(0,r.useState)(200),[L,D]=(0,r.useState)(.8),[z,P]=(0,r.useState)(-1e3),[T,W]=(0,r.useState)(5),B={c:"#A8CC8C",cpp:"#9C033A",java:"#ED8B00",javascript:"#F7DF1E",typescript:"#3178C6",csharp:"#512BD4",go:"#00ADD8",rust:"#000000",swift:"#F05138",kotlin:"#0095D5",dart:"#0175C2",haskell:"#5E5086",lisp:"#3FB68B",scheme:"#9F1D20",ocaml:"#EC6813",fsharp:"#378BBA",clojure:"#5881D8",erlang:"#A90533",elixir:"#6E4A7E",scala:"#DC322F",python:"#3776AB",ruby:"#CC342D",perl:"#39457E",php:"#777BB4",lua:"#2C2D72",r:"#276DC3",julia:"#9558B2",matlab:"#0076A8",brainfuck:"#FF0000",chef:"#8B4513",apl:"#FFD700",prolog:"#228B22",fortran:"#4169E1",assembly:"#696969"},I=e=>B[e.toLowerCase()]||"#666666";(0,r.useEffect)(()=>{R()},[]);let R=async()=>{try{let e,t;h(!0),p(null);try{if(!(e=await fetch("/data/programming_languages/compression_analysis_results.json")).ok)throw Error("Dev path failed")}catch(t){if(!(e=await fetch("/problens-web/data/programming_languages/compression_analysis_results.json")).ok)throw Error("Failed to fetch KL data")}let s=await e.json();n(s);try{if(!(t=await fetch("/data/programming_languages/deflate_compression_analysis.json")).ok)throw Error("Dev path failed")}catch(e){if(!(t=await fetch("/problens-web/data/programming_languages/deflate_compression_analysis.json")).ok)throw Error("Failed to fetch DEFLATE data")}let a=await t.json();c(a)}catch(e){p("Failed to load analysis data"),console.error(e)}finally{h(!1)}},O=(0,r.useCallback)(()=>{let e,t,a;if(!s.current)return;let r=null;if("kl"===d&&(null==i?void 0:i.baseline)?r=i.baseline:"deflate"===d&&(null==o?void 0:o.deflate_analysis)&&(r={languages:o.deflate_analysis.languages,distance_matrix:o.deflate_analysis.distance_matrix,entropy_values:{}}),!r)return;let n=l.Ltv(s.current);n.selectAll("*").remove();let c=s.current.parentElement;if(!c)return;if(j){let s=window.innerWidth-40,r=window.innerHeight-120;s/1.6<=r?t=(e=s)/1.6:e=1.6*(t=r),a=e/800}else t=(e=Math.min(800,Math.max(600,c.getBoundingClientRect().width-32)))/1.6,a=e/800;let x=40*a,m=25*a;n.attr("width",e).attr("height",t);let h=n.append("g").attr("transform","translate(".concat(x,", ").concat(x,")")),u=r.languages.map(e=>{var t;return{id:e,size:(null===(t=r.entropy_values)||void 0===t?void 0:t[e])||1}}),p=[],g=Object.values(r.distance_matrix).flatMap(e=>Object.values(e)).filter(e=>e>0).sort((e,t)=>e-t);g[Math.floor(.9*g.length)],r.languages.forEach(e=>{r.languages.forEach(t=>{if(e!==t){let s=r.distance_matrix[e][t],a="kl"===d?Math.max(0,s-.05):s;if(a<=M){let r=a/M;p.push({source:e,target:t,value:1-r,distance:s})}}})});let v=l.tXi(u).force("link",l.kJC(p).id(e=>e.id).distance(e=>(S+(1-e.value)*E)*a).strength(e=>Math.pow(e.value,2)*L)).force("charge",l.xJS().strength(z*a)).force("center",l.jTM((e-2*x)/2,(t-2*x)/2)).force("collision",l.eRw().radius(m+T*a)).force("boundary",()=>{u.forEach(s=>{void 0!==s.x&&void 0!==s.y&&(s.x=Math.max(m+10,Math.min(e-2*x-m-10,s.x)),s.y=Math.max(m+10,Math.min(t-2*x-m-10,s.y)))})}),N=h.append("g").selectAll("line").data(p).join("line").attr("stroke","#999").attr("stroke-opacity",.8).attr("stroke-width",e=>8*Math.pow(e.value,1.5)*a),w=h.append("g").selectAll("circle").data(u).join("circle").attr("r",e=>Math.min(m,8+3*(e.size||1))).attr("fill",e=>I(e.id)).attr("stroke","#fff").attr("stroke-width",2).style("cursor","pointer"),k=h.append("g").selectAll("text").data(u).join("text").text(e=>e.id).attr("font-size","".concat(12*a,"px")).attr("font-weight","bold").attr("text-anchor","middle").attr("dy",4).attr("fill","#333").style("pointer-events","none");w.on("mouseover",(e,t)=>{f(t.id);let s=new Set([t.id]);p.forEach(e=>{e.source===t.id&&s.add(e.target),e.target===t.id&&s.add(e.source)}),w.style("opacity",e=>s.has(e.id)?1:.3),N.style("opacity",e=>e.source.id===t.id||e.target.id===t.id?.8:.1),k.style("opacity",e=>s.has(e.id)?1:.3)}).on("mouseout",()=>{f(null),w.style("opacity",1),N.style("opacity",.6),k.style("opacity",1)}).on("click",(e,t)=>{y(b===t.id?null:t.id)});let _=l.$Er().on("start",(e,t)=>{e.active||v.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}).on("drag",(e,t)=>{t.fx=e.x,t.fy=e.y}).on("end",(e,t)=>{e.active||v.alphaTarget(0),t.fx=null,t.fy=null});w.call(_),v.on("tick",()=>{N.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),w.attr("cx",e=>e.x).attr("cy",e=>e.y),k.attr("x",e=>e.x).attr("y",e=>e.y)})},[i,o,d,b,j,M,S,E,L,z,T]);if((0,r.useEffect)(()=>{O()},[O]),(0,r.useEffect)(()=>{if(!j)return;let e=()=>{O()};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[j,O]),m)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-gray-600",children:"Loading compression analysis..."})});if(u)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-red-600",children:u})});let q=()=>{var e,t,s,a;let r="kl"===d?null==i?void 0:null===(e=i.baseline)||void 0===e?void 0:e.distance_matrix:null==o?void 0:null===(t=o.deflate_analysis)||void 0===t?void 0:t.distance_matrix,l="kl"===d?null==i?void 0:null===(s=i.baseline)||void 0===s?void 0:s.languages:null==o?void 0:null===(a=o.deflate_analysis)||void 0===a?void 0:a.languages;if(!r||!l)return null;let n=[];for(let e=0;e<l.length;e++)for(let t=e+1;t<l.length;t++){let s=l[e],a=l[t],i=r[s][a];n.push(i)}n.sort((e,t)=>e-t);let c=Math.ceil(10),x=Array(c).fill(0),m=n.filter(e=>e>.5).length;n.forEach(e=>{if(e>=0&&e<=.5){let t=Math.min(Math.floor((e-0)/.05),c-1);x[t]++}});let h=n.filter(e=>e>0).sort((e,t)=>e-t),u=h[Math.floor(.9*h.length)];return{distances:n,min:Math.min(...n).toFixed(3),max:Math.max(...n).toFixed(3),p90:u.toFixed(3),mean:(n.reduce((e,t)=>e+t,0)/n.length).toFixed(3),median:n[Math.floor(n.length/2)].toFixed(3),bins:x,binSize:.05,focusMin:0,focusMax:.5,outOfRangeCount:m,numPairs:n.length}},G=j?"fixed inset-0 z-50 bg-white p-4 space-y-4 overflow-y-auto":"p-4 sm:p-6 bg-gray-50 rounded-lg space-y-4 w-full mx-auto";return(0,a.jsxs)("div",{className:G,children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Programming Language Similarity Network"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>x("kl"===d?"deflate":"kl"),className:"px-3 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors text-sm",children:["Mode: ","kl"===d?"KL Divergence":"DEFLATE Compression"]}),(0,a.jsx)("button",{onClick:()=>_(!k),className:"px-3 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 transition-colors text-sm",children:k?"Hide Controls":"Show Controls"}),(0,a.jsx)("button",{onClick:()=>w(!N),className:"px-3 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors text-sm",children:N?"Hide Debug":"Show Debug"}),(0,a.jsx)("button",{onClick:()=>{v(!j)},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:j?"Exit Fullscreen":"Fullscreen"})]})]}),(0,a.jsx)("p",{className:"text-center text-gray-600 text-sm",children:"kl"===d?"Languages clustered by KL divergence of character frequencies. Closer nodes and thicker edges indicate more similar character usage patterns.":"Languages clustered by DEFLATE dictionary compression. Closer nodes indicate better cross-compression using static dictionaries."}),k&&(0,a.jsxs)("div",{className:"bg-purple-50 rounded-lg border border-purple-200 p-4",children:[(0,a.jsx)("h4",{className:"font-semibold mb-3",children:"Physics Parameters"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Max Distance: ",M.toFixed(2)]}),(0,a.jsx)("input",{type:"range",min:"0.1",max:"1.0",step:"0.05",value:M,onChange:e=>C(parseFloat(e.target.value)),className:"w-full"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Only show connections ≤ this distance"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Base Spring Distance: ",S,"px"]}),(0,a.jsx)("input",{type:"range",min:"10",max:"100",step:"5",value:S,onChange:e=>F(parseInt(e.target.value)),className:"w-full"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Spring length for closest languages"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Max Spring Distance: ",E,"px"]}),(0,a.jsx)("input",{type:"range",min:"100",max:"500",step:"25",value:E,onChange:e=>A(parseInt(e.target.value)),className:"w-full"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Spring length for furthest connected languages"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Link Strength: ",L.toFixed(1)]}),(0,a.jsx)("input",{type:"range",min:"0.1",max:"2.0",step:"0.1",value:L,onChange:e=>D(parseFloat(e.target.value)),className:"w-full"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"How strongly springs pull nodes together"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Charge Strength: ",z]}),(0,a.jsx)("input",{type:"range",min:"-2000",max:"-50",step:"50",value:z,onChange:e=>P(parseInt(e.target.value)),className:"w-full"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Repulsion between all nodes (negative = repel)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Collision Radius: ",T,"px"]}),(0,a.jsx)("input",{type:"range",min:"0",max:"30",step:"2",value:T,onChange:e=>W(parseInt(e.target.value)),className:"w-full"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Extra spacing around nodes"})]})]}),(0,a.jsx)("div",{className:"mt-4 flex gap-2",children:(0,a.jsx)("button",{onClick:()=>{C(.3),F(30),A(200),D(.8),P(-1e3),W(5)},className:"px-3 py-1 bg-purple-500 text-white rounded text-sm hover:bg-purple-600",children:"Reset to Defaults"})})]}),N&&(()=>{let e=q();return e?(0,a.jsxs)("div",{className:"bg-yellow-50 rounded-lg border border-yellow-200 p-4",children:[(0,a.jsxs)("h4",{className:"font-semibold mb-2",children:["Distance Distribution Debug (",d.toUpperCase(),")"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Total pairs:"})," ",e.numPairs]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Min:"})," ",e.min]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Max:"})," ",e.max]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"90th percentile:"})," ",e.p90]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Mean:"})," ",e.mean]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Median:"})," ",e.median]})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold text-sm mb-2",children:"Most similar language pairs:"}),(0,a.jsx)("div",{className:"text-xs space-y-1",children:(()=>{var e,t,s,r;let l="kl"===d?null==i?void 0:null===(e=i.baseline)||void 0===e?void 0:e.distance_matrix:null==o?void 0:null===(t=o.deflate_analysis)||void 0===t?void 0:t.distance_matrix,n="kl"===d?null==i?void 0:null===(s=i.baseline)||void 0===s?void 0:s.languages:null==o?void 0:null===(r=o.deflate_analysis)||void 0===r?void 0:r.languages;if(!l||!n)return null;let c=[];for(let e=0;e<n.length;e++)for(let t=e+1;t<n.length;t++){let s=n[e],a=n[t],r=l[s][a];c.push({lang1:s,lang2:a,distance:r})}return c.sort((e,t)=>e.distance-t.distance).slice(0,10).map((e,t)=>(0,a.jsxs)("div",{children:[e.lang1," ↔ ",e.lang2,": ",e.distance.toFixed(3),"deflate"===d&&o&&(0,a.jsxs)("span",{className:"text-gray-500 ml-2",children:["(",(100*o.deflate_analysis.compression_benefits[e.lang1][e.lang2]).toFixed(1),"%,",(100*o.deflate_analysis.compression_benefits[e.lang2][e.lang1]).toFixed(1),"%)"]})]},"".concat(e.lang1,"-").concat(e.lang2)))})()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold text-sm mb-2",children:"Most distant language pairs:"}),(0,a.jsx)("div",{className:"text-xs space-y-1",children:(()=>{var e,t,s,r;let l="kl"===d?null==i?void 0:null===(e=i.baseline)||void 0===e?void 0:e.distance_matrix:null==o?void 0:null===(t=o.deflate_analysis)||void 0===t?void 0:t.distance_matrix,n="kl"===d?null==i?void 0:null===(s=i.baseline)||void 0===s?void 0:s.languages:null==o?void 0:null===(r=o.deflate_analysis)||void 0===r?void 0:r.languages;if(!l||!n)return null;let c=[];for(let e=0;e<n.length;e++)for(let t=e+1;t<n.length;t++){let s=n[e],a=n[t],r=l[s][a];c.push({lang1:s,lang2:a,distance:r})}return c.sort((e,t)=>t.distance-e.distance).slice(0,10).map((e,t)=>(0,a.jsxs)("div",{children:[e.lang1," ↔ ",e.lang2,": ",e.distance.toFixed(3)]},"".concat(e.lang1,"-").concat(e.lang2)))})()})]})]})]}):null})(),(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 overflow-hidden",children:(0,a.jsx)("div",{className:"w-full flex justify-center",children:(0,a.jsx)("svg",{ref:s})})}),(g||b)&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-lg mb-2",children:g||b}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h5",{className:"font-medium text-gray-700 mb-2",children:["Closest Languages (by ","kl"===d?"KL distance":"DEFLATE compression","):"]}),(()=>{var e,t;let s="kl"===d?null==i?void 0:null===(e=i.baseline)||void 0===e?void 0:e.distance_matrix:null==o?void 0:null===(t=o.deflate_analysis)||void 0===t?void 0:t.distance_matrix;return s&&s[g||b]?(0,a.jsx)("div",{className:"space-y-1",children:Object.entries(s[g||b]).filter(e=>{let[t]=e;return t!==(g||b)}).sort((e,t)=>{let[,s]=e,[,a]=t;return s-a}).slice(0,5).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm",children:t}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[s.toFixed(3)," ","kl"===d?"KL":"dist","deflate"===d&&o&&(0,a.jsxs)("span",{className:"ml-2",children:["(",(100*o.deflate_analysis.compression_benefits[g||b][t]).toFixed(1),"%)"]})]})]},t)})}):null})()]}),"kl"===d&&(null==i?void 0:null===(e=i.baseline)||void 0===e?void 0:e.entropy_values)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium text-gray-700 mb-2",children:"Properties:"}),(0,a.jsx)("div",{className:"text-sm space-y-1",children:(0,a.jsxs)("div",{children:["Character Entropy: ",null===(t=i.baseline.entropy_values[g||b])||void 0===t?void 0:t.toFixed(3)," bits"]})})]}),"deflate"===d&&o&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium text-gray-700 mb-2",children:"Compression Benefits:"}),(0,a.jsx)("div",{className:"text-sm space-y-1",children:(0,a.jsxs)("div",{children:["As dictionary for others: Average ",(Object.values(o.deflate_analysis.compression_benefits[g||b]).filter((e,t,s)=>Object.keys(o.deflate_analysis.compression_benefits[g||b])[t]!==(g||b)).reduce((e,t)=>e+t,0)/(o.deflate_analysis.languages.length-1)*100).toFixed(1),"% improvement"]})})]})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"How to Read This Visualization"}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 space-y-1",children:["kl"===d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Node size:"})," Larger nodes have higher character entropy"]}),(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Edge thickness:"})," Thicker edges indicate smaller KL divergence (more similar)"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Node size:"})," All nodes same size (no entropy data for DEFLATE)"]}),(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Edge thickness:"})," Thicker edges indicate better compression benefit"]})]}),(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Node color:"})," Different colors represent language families"]}),(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Distance:"})," Closer nodes are more similar according to ","kl"===d?"character frequency":"compression"," analysis"]}),(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Interaction:"})," Hover over nodes to see connections, click to pin details"]})]})]})]})}},22054:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var a=s(58081),r=s(82149),l=s(43090);let i=[{snippet:"The Abraham Lincoln Presidential Library and Museum is also in Springfield. The Abraham Lincoln National Cemetery is located in _",trueNext:"e",q:{e:.91,n:.06,t:.01}},{snippet:"For this reason, the two gods withdrew their pursuit, and had her wed to Peleus. When _",trueNext:"a",q:{t:.6,s:.34,p:.03,h:.01,a:.001}},{snippet:"Morality requires that we do not sanction our own victimhood, Rand claims. In adhering to this concept, Rand assigns vi_",trueNext:"r",q:{c:.88,r:.11}}];function n(e){return" "===e?"\\textsf{\\textvisiblespace}":"\\textsf{".concat(e,"}")}function o(){let[e,t]=(0,r.useState)("p");return(0,r.useEffect)(()=>{document.querySelectorAll(".snippet-scroll").forEach(e=>{e.scrollLeft=0})},[]),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,a.jsx)("button",{className:"px-3 py-1 rounded   ".concat("p"===e?"bg-blue-600 text-white":"bg-white border"),onClick:()=>t("p"),children:"truth p"}),(0,a.jsx)("button",{className:"px-3 py-1 rounded   ".concat("q"===e?"bg-red-600 text-white":"bg-white border"),onClick:()=>t("q"),children:"model q"})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-sm table-fixed",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-200",children:[(0,a.jsx)("th",{className:"px-2 py-1 text-left w-1/2",children:"snippet"}),(0,a.jsx)("th",{className:"px-2 py-1 text-left w-1/2",children:"p"===e?(0,a.jsx)(l.InlineMath,{math:"p_{emp}(\\text{letter}\\mid\\text{snippet})"}):(0,a.jsx)(l.InlineMath,{math:"q_{LLM}(\\text{letter}\\mid\\text{snippet})"})})]})}),(0,a.jsx)("tbody",{children:i.map((t,s)=>(0,a.jsxs)("tr",{className:"border-b last:border-0",children:[(0,a.jsx)("td",{className:"px-2 py-1 align-top w-1/2",children:(0,a.jsx)("div",{className:"overflow-x-auto whitespace-nowrap snippet-scroll",children:t.snippet})}),(0,a.jsx)("td",{className:"px-2 py-1 align-top w-1/2",children:(0,a.jsx)("div",{className:"overflow-x-auto whitespace-nowrap",children:"p"===e?(0,a.jsx)(l.InlineMath,{math:"\\{ ".concat(n(t.trueNext),": 1.00 \\}")}):function(e){let t=Object.entries(e).map(e=>{let[t,s]=e,a=s<.01?s.toFixed(3):s.toFixed(2);return"".concat(n(t),": ").concat(a)});return(0,a.jsx)(l.InlineMath,{math:"\\{ ".concat(t.join(", ")," \\}")})}(t.q)})})]},s))})]})}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 space-x-1",children:[(0,a.jsx)("span",{children:"The distribution"}),(0,a.jsx)(l.InlineMath,{math:"p"}),(0,a.jsx)("span",{children:"corresponds to the actual next letter,"}),(0,a.jsx)(l.InlineMath,{math:"q"}),(0,a.jsx)("span",{children:"is the guess of an LLM (here, Llama 4)."})]})]})}},23229:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(58081),r=s(82149),l=s(45186),i=s(10959),n=s.n(i);function o(e){let{children:t,headline:s,img:i,color:o="#f5f5f5",headerColor:c,startOpen:d=!1,advanced:x=!1,id:m}=e,[h,u]=(0,r.useState)(()=>!!d||!!m&&window.location.hash==="#".concat(m));(0,r.useEffect)(()=>{if(!m)return;let e=()=>{window.location.hash==="#".concat(m)&&u(!0)};return e(),window.addEventListener("hashchange",e),window.addEventListener("popstate",e),window.addEventListener("load",e),()=>{window.removeEventListener("hashchange",e),window.removeEventListener("popstate",e),window.removeEventListener("load",e)}},[m]);let p=(0,r.useRef)(null),g=null!=c?c:x?"#fff5f5":o;return(0,a.jsxs)("div",{className:n().expand,id:m,ref:p,children:[(0,a.jsxs)("div",{className:n().header,style:{backgroundColor:g},onClick:()=>u(!h),children:[x&&(0,a.jsx)("div",{className:n().advancedIcon,title:"This is an advanced section",children:"⚠️"}),i&&(0,a.jsx)("div",{className:n().image,children:(0,a.jsx)(l.default,{src:i,alt:"",width:24,height:24})}),(0,a.jsx)("div",{className:n().headline,children:s}),(0,a.jsx)("div",{className:"".concat(n().arrow," ").concat(h?n().open:""),children:(0,a.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M2 4L6 8L10 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),h&&(0,a.jsxs)("div",{className:n().content,style:{backgroundColor:o},children:[t,(0,a.jsx)("div",{className:n().hide,onClick:()=>{if(u(!1),p.current){let e=p.current.getBoundingClientRect(),t=(window.pageYOffset||document.documentElement.scrollTop)+e.top-.25*window.innerHeight;window.scrollTo({top:t,behavior:"smooth"})}},children:"Hide ▲"})]})]})}},23639:(e,t,s)=>{"use strict";s.d(t,{MI:()=>l,_C:()=>r,sQ:()=>a});let a={margins:{top:5,right:40,left:30,bottom:35},height:{normal:"h-96",zoomed:"h-full"},colors:{evidence:"#2563eb",trueP:"#2563eb",klExpected:"#dc2626",entropy:"#f97316",modelQ:"#dc2626"},animation:{transitionDuration:300,isAnimationActive:!1},controls:{defaultSpeed:50,defaultNumFlips:200,speedRange:{min:10,max:500,step:10},flipsRange:{min:10,max:500,step:10},probRange:{min:.01,max:.99,step:.01}}},r={primary:{running:"bg-yellow-500 hover:bg-yellow-600",stopped:"bg-blue-500 hover:bg-blue-600"},secondary:"bg-gray-500 hover:bg-gray-600",zoom:"bg-blue-500 hover:bg-blue-600",base:"px-4 py-2 rounded-md font-medium text-white",small:"px-3 py-1 text-xs rounded font-medium text-white"},l={rangeColors:{trueP:"bg-blue-200",modelQ:"bg-red-200",flips:"bg-gray-200",speed:"bg-purple-200"},base:"w-full h-2 rounded-lg appearance-none cursor-pointer"}},26949:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081),r=s(82149);let l=()=>{let[e,t]=(0,r.useState)("AACATACG"),[s,l]=(0,r.useState)(!1),[i,n]=(0,r.useState)("AACATACG"),[o,c]=(0,r.useState)(4),[d,x]=(0,r.useState)(null),[m,h]=(0,r.useState)(null),[u,p]=(0,r.useState)([]),[g,f]=(0,r.useState)("AACATACG"),[b,y]=(0,r.useState)(!1),[j,v]=(0,r.useState)(""),[N,w]=(0,r.useState)(0),[k,_]=(0,r.useState)(null),[M,C]=(0,r.useState)(null),[S,F]=(0,r.useState)(new Set),[E,A]=(0,r.useState)([]),[L,D]=(0,r.useState)(null),z=(0,r.useMemo)(()=>[...new Set(e.split(""))].sort(),[e]),P=(0,r.useMemo)(()=>{let e=new Set(u.filter(e=>e.letter).map(e=>e.letter));return z.filter(t=>!e.has(t))},[z,u]),T=(0,r.useCallback)(e=>{let t=[];for(let s=0;s<e;s++){let a=Math.pow(2,s),r=50+300*s/(e-1);for(let l=0;l<a;l++){let i=560/(a+1)*(l+1)+20,n="".concat(s,"-").concat(l),o=s<e-1,c="",d=l;for(let e=s;e>0;e--)c=(d%2).toString()+c,d=Math.floor(d/2);t.push({id:n,x:i,y:r,level:s,position:l,code:c,hasChildren:o})}}return t},[]);(0,r.useEffect)(()=>{let e=T(o);p(t=>{let s=new Map(t.map(e=>[e.id,e.letter]));return e.map(e=>({...e,letter:s.get(e.id)}))})},[o,T]),(0,r.useEffect)(()=>{f(e)},[e]);let W=()=>{s?(t(i),l(!1)):(n(e),l(!0))},B=(e,t)=>{e.preventDefault()},I=(e,t)=>{e.preventDefault(),d&&u.find(e=>e.id===t)&&(p(e=>{let s=[...e];s.forEach(e=>{e.letter===d&&(e.letter=void 0)});let a=s.findIndex(e=>e.id===t);if(-1!==a){s[a]={...s[a],letter:d};let e=s[a].level,t=s[a].position;s.forEach((a,r)=>{a.level>e&&Math.floor(a.position/Math.pow(2,a.level-e))===t&&a.letter&&(s[r]={...a,letter:void 0})})}return s}),x(null))},R=(0,r.useMemo)(()=>0===P.length,[P]),O=e=>{let t=u.find(t=>t.letter===e);return(null==t?void 0:t.code)||null},q=async()=>{if(!R)return;let e=[...new Set(g.split(""))].filter(e=>!O(e));if(e.length>0){D("Incomplete code! Missing codes for: ".concat(e.join(", ")));return}D(null),y(!0),v(""),w(0),A([]);let t=0,s="",a=[];for(let e=0;e<g.length;e++){w(e);let r=O(g[e]);if(r){let l=s.length,i=(s+=r).length;t+=r.length,a.push({start:l,end:i,letterIndex:e})}v(s),A([...a]),_(t/(e+1)),await new Promise(e=>setTimeout(e,500))}w(-1),y(!1)},G=e=>{if(C(e),null===e)F(new Set);else{let t=new Set;E.forEach(s=>{if(s.letterIndex===e)for(let e=s.start;e<s.end;e++)t.add(e)}),F(t)}},H=e=>{if(null===e)C(null),F(new Set);else{let t=E.find(t=>e>=t.start&&e<t.end);if(t){C(t.letterIndex);let e=new Set;for(let s=t.start;s<t.end;s++)e.add(s);F(e)}}},K=e=>{for(let t=0;t<e.level;t++){let s=Math.floor(e.position/Math.pow(2,e.level-t)),a=u.find(e=>e.level===t&&e.position===s);if(a&&a.letter)return!0}return!1};return(0,a.jsxs)("div",{className:"w-full max-w-4xl mx-auto p-6 bg-white border rounded-lg",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("span",{className:"font-medium",children:"Text:"}),s?(0,a.jsx)("input",{type:"text",value:i,onChange:e=>n(e.target.value),className:"border border-gray-300 rounded px-3 py-1 font-mono",onKeyDown:t=>{"Enter"===t.key&&W(),"Escape"===t.key&&(l(!1),n(e))},autoFocus:!0}):(0,a.jsx)("span",{className:"font-mono text-lg bg-gray-100 px-3 py-1 rounded",children:e}),(0,a.jsx)("button",{onClick:W,className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded",children:s?"Save":"Edit"})]})}),(0,a.jsxs)("div",{className:"mb-6 relative",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium",children:["Binary Tree (",o," layers)"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{4===o?c(5):5===o&&c(4)},className:"px-3 py-1 text-sm rounded bg-blue-500 hover:bg-blue-600 text-white",children:4===o?"Add Layer":"Remove Layer"}),(0,a.jsx)("button",{onClick:()=>{p(e=>e.map(e=>({...e,letter:void 0}))),v(""),A([]),_(null),D(null),C(null),F(new Set)},className:"px-3 py-1 text-sm rounded bg-blue-500 hover:bg-blue-600 text-white",children:"Reset Letters"})]})]}),(0,a.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,a.jsxs)("svg",{width:"600",height:"400",className:"w-full",children:[u.map(e=>{if(0===e.level)return null;let t=e.level-1,s=Math.floor(e.position/2),r=u.find(e=>e.level===t&&e.position===s);if(!r)return null;let l=e.position%2==0?"0":"1",i=e.level<=2,n=(r.x+e.x)/2,o=(r.y+e.y)/2;return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:r.x,y1:r.y,x2:e.x,y2:e.y,stroke:"#666",strokeWidth:"2"}),i&&(0,a.jsx)("text",{x:n,y:o-8,textAnchor:"middle",className:"text-sm font-mono font-bold",fill:"#333",children:l})]},"connection-".concat(e.id))}),u.map(e=>{let t=K(e);return(0,a.jsxs)("g",{children:[(0,a.jsx)("circle",{cx:e.x,cy:e.y,r:"20",fill:e.letter?"#10B981":t?"#D1D5DB":"#E5E7EB",stroke:e.letter?"#059669":t?"#9CA3AF":"#6B7280",strokeWidth:"2",className:t||e.letter?"":"cursor-pointer hover:fill-blue-100",onDragOver:s=>!t&&B(s,e.id),onDrop:s=>!t&&I(s,e.id)}),e.letter&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("text",{x:e.x,y:e.y-5,textAnchor:"middle",className:"font-mono font-bold text-sm fill-white",children:e.letter}),(0,a.jsx)("text",{x:e.x,y:e.y+8,textAnchor:"middle",className:"font-mono text-xs fill-white",children:e.code})]})]},e.id)}),(0,a.jsxs)("g",{children:[(0,a.jsx)("text",{x:"20",y:"25",className:"text-sm font-medium fill-gray-700",children:"Available Letters:"}),P.map((e,t)=>{let s=20+45*t;return(0,a.jsxs)("g",{children:[(0,a.jsx)("rect",{x:s,y:45,width:"35",height:"35",rx:"4",fill:"#dbeafe",stroke:"#3b82f6",strokeWidth:"2",className:"cursor-move hover:fill-blue-200 transition-colors ".concat(d===e?"opacity-50":""),onMouseDown:t=>{t.preventDefault(),x(e);let s=e=>{var s;let a=null===(s=t.target.closest("svg"))||void 0===s?void 0:s.getBoundingClientRect();a&&h({x:e.clientX-a.left,y:e.clientY-a.top})},a=r=>{var l;let i=null===(l=t.target.closest("svg"))||void 0===l?void 0:l.getBoundingClientRect();if(i){let t=r.clientX-i.left,s=r.clientY-i.top;console.log("Drop coordinates:",t,s),console.log("Available nodes:",u.map(e=>({id:e.id,x:e.x,y:e.y,greyed:K(e)})));let a=u.find(e=>{let a=Math.sqrt(Math.pow(t-e.x,2)+Math.pow(s-e.y,2)),r=a<=20,l=!K(e);return console.log("Node ".concat(e.id,": distance=").concat(a.toFixed(1),", withinRadius=").concat(r,", notGreyed=").concat(l)),r&&l});console.log("Target node:",null==a?void 0:a.id),a&&p(t=>{let s=[...t];s.forEach(t=>{t.letter===e&&(t.letter=void 0)});let r=s.findIndex(e=>e.id===a.id);if(-1!==r){s[r]={...s[r],letter:e};let t=s[r].level,a=s[r].position;s.forEach((e,r)=>{e.level>t&&Math.floor(e.position/Math.pow(2,e.level-t))===a&&e.letter&&(s[r]={...e,letter:void 0})})}return s})}x(null),h(null),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",a)}}),(0,a.jsx)("text",{x:s+17.5,y:68,textAnchor:"middle",className:"font-mono font-bold text-lg fill-blue-800 pointer-events-none select-none",children:e})]},e)})]}),d&&m&&(0,a.jsxs)("g",{children:[(0,a.jsx)("rect",{x:m.x-17.5,y:m.y-17.5,width:"35",height:"35",rx:"4",fill:"#3b82f6",stroke:"#1e40af",strokeWidth:"2",opacity:"0.8",style:{pointerEvents:"none"}}),(0,a.jsx)("text",{x:m.x,y:m.y+6,textAnchor:"middle",className:"font-mono font-bold text-lg fill-white pointer-events-none select-none",style:{pointerEvents:"none"},children:d})]})]}),(0,a.jsx)("div",{className:"text-center mt-2 text-sm text-gray-500 italic",children:"Drag and drop letters to the nodes of the tree"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("button",{onClick:q,disabled:!R||b,className:"px-4 py-2 rounded font-medium ".concat(!R||b?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"),children:b?"Testing...":"Test Your Code"}),L&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:L}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Test Text:"}),(0,a.jsx)("input",{type:"text",value:g,onChange:e=>f(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 font-mono",disabled:b})]}),(j||b)&&(0,a.jsx)("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Original Text:"}),(0,a.jsx)("div",{className:"font-mono text-lg",children:g.split("").map((e,t)=>(0,a.jsx)("span",{onMouseEnter:()=>G(t),onMouseLeave:()=>G(null),className:"inline-block px-1 cursor-pointer transition-colors ".concat(t===N?"bg-red-200 text-red-800":M===t?"bg-yellow-200 text-yellow-800":"hover:bg-gray-200"),children:e},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Coded Text:"}),(0,a.jsx)("div",{className:"font-mono text-lg break-all",children:j.split("").map((e,t)=>(0,a.jsx)("span",{onMouseEnter:()=>H(t),onMouseLeave:()=>H(null),className:"inline-block cursor-pointer transition-colors ".concat(S.has(t)?"bg-yellow-200 text-yellow-800":"hover:bg-gray-200"),children:e},t))})]})]})})]}),null!==k&&(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Average bits per letter: ",(0,a.jsx)("span",{className:"font-mono font-medium",children:k.toFixed(2)})]})]})]})}},27136:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(58081),r=s(82149);function l(e,t,s){switch(t){case"gaussian":return e.map(e=>{let t=(e-s.mu)/s.std;return Math.exp(-.5*t*t)/(s.std*Math.sqrt(2*Math.PI))});case"laplace":return e.map(e=>{let t=s.scale||1e-10;return Math.exp(-Math.abs(e-s.loc)/t)/(2*t)});default:return e.map(()=>0)}}function i(e){let{showBTC:t=!0,showSAP:s=!1}=e,[i,n]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),[d,x]=(0,r.useState)(!0),[m,h]=(0,r.useState)(null),[u,p]=(0,r.useState)(s?"SAP":"BTC"),[g,f]=(0,r.useState)(1e3),[b,y]=(0,r.useState)(3),[j,v]=(0,r.useState)(!0),[N,w]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{x(!0);let e=[];if(t){let t="".concat("/problens-web","/financial_data/btc_data.json");console.log("Attempting to fetch BTC data from:",t,"(~8MB)"),e.push(fetch(t).then(e=>{if(console.log("BTC fetch response:",e.status,e.statusText),!e.ok)throw Error("BTC fetch failed: ".concat(e.status," ").concat(e.statusText));return e.json()}).then(e=>{console.log("BTC data loaded, max_days:",e.max_days,"daily_data keys:",Object.keys(e.daily_data).length),n(e)}))}if(s){let t="".concat("/problens-web","/financial_data/sap_data.json");console.log("Attempting to fetch SAP data from:",t,"(~22MB)"),e.push(fetch(t).then(e=>{if(console.log("SAP fetch response:",e.status,e.statusText,"URL:",e.url),!e.ok)throw Error("SAP fetch failed: ".concat(e.status," ").concat(e.statusText," from ").concat(e.url));return e.json()}).then(e=>{console.log("SAP data loaded, max_days:",e.max_days,"daily_data keys:",Object.keys(e.daily_data).length),c(e)}))}await Promise.all(e)}catch(e){h("Failed to load financial data: ".concat(e instanceof Error?e.message:String(e))),console.error("Financial data loading error:",e)}finally{x(!1)}})()},[t,s]);let k="BTC"===u?i:o,_=k?k.max_days:1e3;(0,r.useEffect)(()=>{g<2?f(2):g>_&&f(Math.min(1e3,_))},[g,_]);let M=(0,r.useMemo)(()=>{if(!k||!k.daily_data[g])return null;let e=k.daily_data[g],{mean:t,std:s,histogram:a,distributions:r}=e,i=t-b*s,n=t+b*s,o=Array.from({length:400},(e,t)=>i+t/399*(n-i)),c=j?l(o,"gaussian",r.gaussian):null,d=N?l(o,"laplace",r.laplace):null,x=[],m=a.bin_edges[1]-a.bin_edges[0];for(let t=0;t<a.counts.length;t++){let s=(a.bin_edges[t]+a.bin_edges[t+1])/2;s>=i&&s<=n&&x.push({x:s,y:a.counts[t]/(e.n_samples*m)})}return{xValues:o,gaussianPDF:c,laplacePDF:d,histogramData:x,distributions:r,mean:t,std:s}},[k,g,b,j,N]);return d?(0,a.jsx)("div",{className:"flex items-center justify-center h-96 bg-gray-50 rounded-lg",children:(0,a.jsxs)("div",{className:"text-gray-600 text-center",children:[(0,a.jsx)("div",{children:"Loading financial data..."}),t&&s&&(0,a.jsx)("div",{className:"text-sm mt-2",children:"Loading large datasets (BTC ~8MB, SAP ~22MB), please wait"}),t&&!s&&(0,a.jsx)("div",{className:"text-sm mt-2",children:"BTC dataset is large (~8MB), please wait"}),!t&&s&&(0,a.jsx)("div",{className:"text-sm mt-2",children:"SAP dataset is large (~22MB), please wait"})]})}):m||!k?(0,a.jsx)("div",{className:"flex items-center justify-center h-96 bg-gray-50 rounded-lg",children:(0,a.jsx)("div",{className:"text-red-600",children:m||"No data available"})}):(0,a.jsxs)("div",{className:"p-4 sm:p-6 bg-gray-50 rounded-lg space-y-4 max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t&&s&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asset"}),(0,a.jsxs)("select",{value:u,onChange:e=>p(e.target.value),className:"w-full p-3 border border-gray-300 rounded-md min-h-[44px]",children:[(0,a.jsx)("option",{value:"BTC",children:"Bitcoin (BTC)"}),(0,a.jsx)("option",{value:"SAP",children:"S&P 500 (SAP)"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Show distributions"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center text-sm min-h-[44px]",children:[(0,a.jsx)("input",{type:"checkbox",checked:j,onChange:e=>v(e.target.checked),className:"mr-2 min-w-[20px] min-h-[20px]"}),(0,a.jsx)("span",{className:"text-red-600",children:"Gaussian"})]}),(0,a.jsxs)("label",{className:"flex items-center text-sm min-h-[44px]",children:[(0,a.jsx)("input",{type:"checkbox",checked:N,onChange:e=>w(e.target.checked),className:"mr-2 min-w-[20px] min-h-[20px]"}),(0,a.jsx)("span",{className:"text-green-600",children:"Laplace"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Days: ",g]}),(0,a.jsx)("input",{type:"range",min:"2",max:_,value:g,onChange:e=>f(parseInt(e.target.value)),className:"w-full h-4 min-h-[44px]"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["X-axis range: \xb1",b,"σ"]}),(0,a.jsx)("input",{type:"range",min:"1",max:"5",step:"0.5",value:b,onChange:e=>y(parseFloat(e.target.value)),className:"w-full h-4 min-h-[44px]"})]})]})]}),M&&(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,a.jsxs)("svg",{width:"100%",viewBox:"0 0 800 400",className:"max-w-4xl mx-auto",children:[(0,a.jsx)("rect",{width:"800",height:"400",fill:"#f9fafb",stroke:"#e5e7eb"}),M.histogramData.map((e,t)=>{var s,r;let l=700/(M.xValues[M.xValues.length-1]-M.xValues[0]),i=50+(e.x-M.xValues[0])*l,n=Math.max(2,((null===(s=M.histogramData[1])||void 0===s?void 0:s.x)-(null===(r=M.histogramData[0])||void 0===r?void 0:r.x)||.01)*l),o=Math.max(...M.histogramData.map(e=>e.y),.01),c=Math.max(1,e.y*(300/o));return(0,a.jsx)("rect",{x:i-n/2,y:350-c,width:n,height:c,fill:"#94a3b8",opacity:"0.7"},t)}),(()=>{let e=700/(M.xValues[M.xValues.length-1]-M.xValues[0]),t=300/Math.max(...[...M.gaussianPDF||[],...M.laplacePDF||[],...M.histogramData.map(e=>e.y)].filter(e=>isFinite(e)),.01);return(0,a.jsxs)(a.Fragment,{children:[M.gaussianPDF&&j&&(0,a.jsx)("path",{d:"M ".concat(M.xValues.map((s,a)=>{let r=50+(s-M.xValues[0])*e,l=350-M.gaussianPDF[a]*t;return"".concat(r,",").concat(Math.max(50,Math.min(350,l)))}).join(" L ")),fill:"none",stroke:"#ef4444",strokeWidth:"2"}),M.laplacePDF&&N&&(0,a.jsx)("path",{d:"M ".concat(M.xValues.map((s,a)=>{let r=50+(s-M.xValues[0])*e,l=350-M.laplacePDF[a]*t;return"".concat(r,",").concat(Math.max(50,Math.min(350,l)))}).join(" L ")),fill:"none",stroke:"#22c55e",strokeWidth:"2"})]})})(),(0,a.jsx)("line",{x1:"50",y1:"350",x2:"750",y2:"350",stroke:"#374151",strokeWidth:"2"}),(0,a.jsx)("line",{x1:"50",y1:"50",x2:"50",y2:"350",stroke:"#374151",strokeWidth:"2"}),(0,a.jsxs)("text",{x:"400",y:"30",textAnchor:"middle",fontSize:"16",fontWeight:"bold",fill:"#374151",children:[k.asset," Log Returns (",g," days)"]}),(0,a.jsxs)("g",{transform:"translate(600, 80)",children:[j&&(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:"0",y1:"0",x2:"20",y2:"0",stroke:"#ef4444",strokeWidth:"2"}),(0,a.jsx)("text",{x:"25",y:"5",fontSize:"12",fill:"#374151",children:"Gaussian"})]}),N&&(0,a.jsxs)("g",{transform:"translate(0, 20)",children:[(0,a.jsx)("line",{x1:"0",y1:"0",x2:"20",y2:"0",stroke:"#22c55e",strokeWidth:"2"}),(0,a.jsx)("text",{x:"25",y:"5",fontSize:"12",fill:"#374151",children:"Laplace"})]}),(0,a.jsxs)("g",{transform:"translate(0, 40)",children:[(0,a.jsx)("rect",{x:"0",y:"-5",width:"20",height:"10",fill:"#94a3b8",opacity:"0.7"}),(0,a.jsx)("text",{x:"25",y:"5",fontSize:"12",fill:"#374151",children:"Empirical"})]})]})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[j&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"font-semibold text-red-600",children:"Gaussian"}),(0,a.jsxs)("div",{children:["KL = ",M.distributions.gaussian.kl_divergence.toFixed(6)]})]}),N&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"font-semibold text-green-600",children:"Laplace"}),(0,a.jsxs)("div",{children:["KL = ",M.distributions.laplace.kl_divergence.toFixed(6)]})]})]})]})]})}},27678:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var a=s(58081),r=s(82149);let l=(e,t,s,a)=>{let r=[];for(let l=t;l<=s;l+=a){let t=String(l).padStart(4,"0");r.push({src:"/problens-web/financial/".concat(e,"_plot").concat(t,".png"),index:l})}return r},i=l("sap",20,7460,20),n=l("btc",20,2840,20),o=()=>{let[e,t]=(0,r.useState)("sap"),[s,l]=(0,r.useState)(0),[o,c]=(0,r.useState)(new Set),[d,x]=(0,r.useState)(0);(0,r.useEffect)(()=>{l(0),c(new Set),x(0)},[e]),(0,r.useEffect)(()=>{let t="sap"===e?i:n,s=t.slice(0,Math.min(10,t.length)),a=0;s.forEach(e=>{let t=new Image;t.onload=()=>{c(t=>new Set([...t,e.src])),x(++a/s.length*100)},t.onerror=()=>{x(++a/s.length*100)},t.src=e.src})},[e]),(0,r.useEffect)(()=>{let t="sap"===e?i:n;for(let e=Math.max(0,s-3);e<=Math.min(t.length-1,s+3);e++){let s=t[e];if(!o.has(s.src)){let e=new Image;e.onload=()=>{c(e=>new Set([...e,s.src]))},e.src=s.src}}},[s,e,o]);let m="sap"===e?i:n,h=Math.max(0,Math.min(s,m.length-1));return 0===m.length?(0,a.jsxs)("div",{className:"p-4 bg-red-50 rounded-md text-red-700",children:["No ","sap"===e?"SAP":"Bitcoin"," plots found."]}):h>=m.length||!m[h]?(0,a.jsxs)("div",{className:"p-4 bg-yellow-50 rounded-md text-yellow-700",children:["Loading ","sap"===e?"SAP":"Bitcoin"," data..."]}):(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,a.jsx)("button",{onClick:()=>{t("sap"),l(0),c(new Set),x(0)},className:"px-4 py-2 rounded-md font-medium transition-colors ".concat("sap"===e?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"S&P"}),(0,a.jsx)("button",{onClick:()=>{t("btc"),l(0),c(new Set),x(0)},className:"px-4 py-2 rounded-md font-medium transition-colors ".concat("btc"===e?"bg-green-600 text-white hover:bg-green-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Bitcoin"})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("div",{className:"relative",children:[!o.has(m[h].src)&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 rounded-md border",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-2"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Loading image..."}),d>0&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[Math.round(d),"% preloaded"]})]})}),(0,a.jsx)("img",{src:m[h].src,alt:"".concat(e.toUpperCase()," Plot ").concat(m[h].index),className:"max-w-full h-auto border rounded-md shadow-lg transition-opacity duration-300 ".concat(o.has(m[h].src)?"opacity-100":"opacity-0"),style:{maxHeight:"600px",minHeight:"400px"},onError:e=>{console.error("Image failed to load:",m[h].src),e.target.style.border="2px solid red"},onLoad:()=>{c(e=>new Set([...e,m[h].src]))}})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-lg font-semibold text-gray-800",children:["Past ",m[h].index," Days"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[h+1," of ",m.length]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"range",min:0,max:Math.max(0,m.length-1),step:1,value:h,onChange:e=>l(Number(e.target.value)),className:"w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer accent-blue-500"}),(0,a.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>l(Math.max(0,h-1)),disabled:0===h,className:"px-3 py-1 bg-gray-200 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300",children:"← Previous"}),(0,a.jsx)("button",{onClick:()=>l(Math.min(m.length-1,h+1)),disabled:h===m.length-1,className:"px-3 py-1 bg-gray-200 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300",children:"Next →"})]})]})]})]})}},28542:e=>{e.exports={main:"Page_main__cWiGN",article:"Page_article__A_Nud"}},29019:(e,t,s)=>{"use strict";s.d(t,{default:()=>g});var a=s(58081),r=s(82149),l=s(35313),i=s(13081),n=s(20619),o=s(99020),c=s(90207),d=s(37018),x=s(36653),m=s(19213),h=s(43090),u=s(23639),p=s(37720);let g=e=>{let{only_kl_mode:t=!1}=e,[s,g]=(0,r.useState)(.25),[f,b]=(0,r.useState)(.5),[y,j]=(0,r.useState)(u.sQ.controls.defaultNumFlips),[v,N]=(0,r.useState)(0),[w,k]=(0,r.useState)([]),[_,M]=(0,r.useState)(!1),[C,S]=(0,r.useState)(u.sQ.controls.defaultSpeed),[F,E]=(0,r.useState)(!1),[A,L]=(0,r.useState)("kl");(0,r.useEffect)(()=>{t&&"kl"!==A&&L("kl")},[t,A]);let D=(()=>{let e=[s,1-s],t=[f,1-f];return 0===t[0]||0===t[1]?1/0:e[0]*Math.log2(e[0]/t[0])+e[1]*Math.log2(e[1]/t[1])})(),z=(0,r.useMemo)(()=>[-2,"dataMax"],[]),P=(0,r.useMemo)(()=>(s>0?s*Math.log2(1/s):0)+(1-s>0?(1-s)*Math.log2(1/(1-s)):0),[s]),T=(0,r.useMemo)(()=>(s>0&&f>0?s*Math.log2(1/f):0)+(1-s>0&&1-f>0?(1-s)*Math.log2(1/(1-f)):0),[s,f]),W=(0,r.useMemo)(()=>{let e=[];for(let t=0;t<=y;t+=Math.max(1,Math.floor(y/50)))e.push({flip:t,evidence:0,klExpected:t*D,logP:0,logQ:0,entropyP:t*P,crossentropyPQ:t*T});return e},[y,D,P,T]),B=()=>{N(0),k([{flip:0,evidence:0,klExpected:0,logP:0,logQ:0,entropyP:0,crossentropyPQ:0}]),M(!1)},I=()=>{v>=y&&B(),M(!_)};(0,r.useEffect)(()=>{if(!_||v>=y)return;let e=setTimeout(()=>{let e=Math.random()<s,t=e?Math.log2(s/f):Math.log2((1-s)/(1-f)),a=e?Math.log2(1/s):Math.log2(1/(1-s)),r=e?Math.log2(1/f):Math.log2(1/(1-f));k(e=>{let s=e[e.length-1],l=v+1;return[...e,{flip:l,evidence:s.evidence+t,klExpected:l*D,logP:s.logP+a,logQ:s.logQ+r,entropyP:l*P,crossentropyPQ:l*T}]}),N(e=>e+1)},C);return()=>clearTimeout(e)},[_,v,s,f,C,y,D,P,T,A]),(0,r.useEffect)(()=>{B(),_&&M(!0)},[s,f,A,y,D,P,T]);let R=e=>"".concat((100*e).toFixed(0),"%"),O=(0,r.useMemo)(()=>0!==v||_?w:W,[w,W,v,_]);return(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-center",children:"Evidence Accumulation Simulator"}),(0,a.jsx)("div",{className:"",children:(0,a.jsxs)("div",{className:"",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[!t&&(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsxs)("div",{className:"inline-flex rounded-lg border border-gray-200 bg-gray-100 p-1",children:[(0,a.jsx)("button",{onClick:()=>L("kl"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors ".concat("kl"===A?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),disabled:_,children:"KL Mode"}),(0,a.jsx)("button",{onClick:()=>L("crossentropy"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors ".concat("crossentropy"===A?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),disabled:_,children:"Crossentropy Mode"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["True Heads Probability: ",R(s)]}),(0,a.jsx)("input",{type:"range",min:"0.01",max:"0.99",step:"0.01",value:s,onChange:e=>g(parseFloat(e.target.value)),className:"".concat(u.MI.base," ").concat(u.MI.rangeColors.trueP),disabled:_})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Model Heads Probability: ",R(f)]}),(0,a.jsx)("input",{type:"range",min:"0.01",max:"0.99",step:"0.01",value:f,onChange:e=>b(parseFloat(e.target.value)),className:"".concat(u.MI.base," ").concat(u.MI.rangeColors.modelQ),disabled:_})]})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"",children:(0,a.jsx)(h.BlockMath,{math:"\\begin{align*}\n                  D(p, q) &= ".concat(s.toFixed(2),"\\log_2\\left(\\frac{").concat(s.toFixed(2),"}{").concat(f.toFixed(2),"}\\right) + ").concat((1-s).toFixed(2),"\\log_2\\left(\\frac{").concat((1-s).toFixed(2),"}{").concat((1-f).toFixed(2),"}\\right) \\\\\n                  &= ").concat(D.toFixed(4),"\\text{ bits per flip}\n                \\end{align*}")})})})]})}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Number of Flips: ",y]}),(0,a.jsx)("input",{type:"range",min:"10",max:"500",step:"10",value:y,onChange:e=>j(parseInt(e.target.value)),className:"".concat(u.MI.base," ").concat(u.MI.rangeColors.flips),disabled:_})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Simulation Speed (faster ←→ slower)"}),(0,a.jsx)("input",{type:"range",min:"10",max:"500",step:"10",value:C,onChange:e=>S(parseInt(e.target.value)),className:"".concat(u.MI.base," ").concat(u.MI.rangeColors.speed)})]})]}),(0,a.jsxs)("div",{className:"flex justify-start items-center",children:[(0,a.jsx)("button",{onClick:I,className:"".concat(u._C.base," ").concat(_?u._C.primary.running:u._C.primary.stopped),children:_?"Pause":v>=y?"Reset & Start":"Start"}),(0,a.jsx)("button",{onClick:B,className:"".concat(u._C.base," ").concat(u._C.secondary," ml-4"),disabled:!v,children:"Reset"})]})]})})}),(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:(0,a.jsx)("div",{className:F?"fixed inset-0 z-50 bg-white p-8":"relative",children:(0,a.jsxs)("div",{className:"".concat(F?"h-full":"h-64"," transition-all duration-300"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("div",{className:"flex items-center space-x-2",children:F&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:I,className:"px-3 py-1 text-xs rounded font-medium ".concat(_?"bg-yellow-500 hover:bg-yellow-600":"bg-blue-500 hover:bg-blue-600"," text-white"),children:_?"Pause":v>=y?"Reset & Start":"Start"}),(0,a.jsx)("button",{onClick:B,className:"px-3 py-1 text-xs bg-gray-500 hover:bg-gray-600 text-white rounded",disabled:!v,children:"Reset"})]})}),(0,a.jsx)(p.A,{type:"zoom-toggle",isZoomed:F,onClick:()=>E(!F),className:"z-50"})]}),(0,a.jsx)(l.u,{width:"100%",height:"100%",children:(0,a.jsxs)(i.b,{data:O,margin:{...u.sQ.margins,left:70},children:[(0,a.jsx)(n.d,{strokeDasharray:"3 3"}),(0,a.jsx)(o.W,{dataKey:"flip",label:{value:"Number of Coin Flips",position:"insideBottom",offset:-10},domain:[0,_||v>0?"dataMax":y],type:"number"}),(0,a.jsx)(c.h,{label:{value:"kl"===A?"Evidence (bits)":"Surprisal (bits)",angle:-90,position:"insideLeft",style:{textAnchor:"middle"}},tickFormatter:e=>Math.round(e).toString(),domain:z}),(0,a.jsx)(d.m,{formatter:e=>"".concat(e.toFixed(2)," bits")}),(0,a.jsx)(x.s,{}),"kl"===A&&(_||v>0)&&(0,a.jsx)(m.N,{type:"monotone",dataKey:"evidence",name:"Accumulated Evidence",stroke:u.sQ.colors.evidence,strokeWidth:2,activeDot:{r:6},isAnimationActive:u.sQ.animation.isAnimationActive}),"kl"===A&&(0,a.jsx)(m.N,{type:"monotone",dataKey:"klExpected",name:"Expected rate (KL divergence)",stroke:u.sQ.colors.klExpected,strokeWidth:2,strokeDasharray:"5 5",dot:!1,isAnimationActive:u.sQ.animation.isAnimationActive}),"crossentropy"===A&&(0,a.jsxs)(a.Fragment,{children:[(_||v>0)&&(0,a.jsx)(m.N,{type:"monotone",dataKey:"logQ",name:"Accumulated Surprisal (Model Q)",stroke:u.sQ.colors.modelQ,strokeWidth:2,activeDot:{r:6},isAnimationActive:u.sQ.animation.isAnimationActive}),(_||v>0)&&(0,a.jsx)(m.N,{type:"monotone",dataKey:"logP",name:"Accumulated Surprisal (True P)",stroke:u.sQ.colors.trueP,strokeWidth:2,activeDot:{r:6},isAnimationActive:u.sQ.animation.isAnimationActive}),(0,a.jsx)(m.N,{type:"monotone",dataKey:"crossentropyPQ",name:"Cross-entropy Rate",stroke:u.sQ.colors.klExpected,strokeWidth:2,strokeDasharray:"5 5",dot:!1,isAnimationActive:u.sQ.animation.isAnimationActive}),(0,a.jsx)(m.N,{type:"monotone",dataKey:"entropyP",name:"Entropy Rate",stroke:u.sQ.colors.entropy,strokeWidth:2,strokeDasharray:"3 3",dot:!1,isAnimationActive:u.sQ.animation.isAnimationActive})]})]})})]})})})]})}},30058:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081),r=s(82149);let l=()=>{let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)({}),[i,n]=(0,r.useState)({}),[o,c]=(0,r.useState)([]),[d,x]=(0,r.useState)(""),[m,h]=(0,r.useState)(!0),[u,p]=(0,r.useState)(!1),[g,f]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{(async()=>{try{let e="/problens-web",s=await fetch("".concat(e,"/data/prediction_snapshots.json")),a=await s.json();t(a.snapshots);try{let t=await fetch("".concat(e,"/data/intelligence_test/letter_eval_results.json")),s=await t.json(),a={};Object.entries(s.models).forEach(e=>{let[t,s]=e;a[t]={model:s.model,avg_cross_entropy:0,avg_optimistic:s.mean_bits,median_cross_entropy:0,median_optimistic:s.median_bits}}),l(a);let r={};for(let t of Object.keys(a))try{let s=await fetch("".concat(e,"/data/intelligence_test/details_").concat(t.replace("/","_"),".json")),a=await s.json();r[t]=a}catch(e){console.error("Error loading detailed scores for ".concat(t,":"),e)}n(r),console.log("Loaded LLM scores:",a),console.log("Loaded detailed scores:",r)}catch(e){console.error("Error loading LLM scores:",e),l({gpt2:{model:"gpt2",avg_cross_entropy:0,avg_optimistic:.466,median_cross_entropy:0,median_optimistic:0},"meta-llama/Llama-4-Scout-17B-16E":{model:"meta-llama/Llama-4-Scout-17B-16E",avg_cross_entropy:0,avg_optimistic:.343,median_cross_entropy:0,median_optimistic:0}})}h(!1)}catch(e){console.error("Error loading data:",e),h(!1)}})()},[]);let b=()=>{if(0===e.length)return;let t=[506,422,476,280,487,838,835,720,546,827,789,308,153,163,399,590,875,856,79,218,201,57,112,274,576,602,615,676,8,344,304,174,134,135,140,166,202,306,365,366,372,426,463,497,536,562,631,634,758,798,14,35,36,37,56,67,73,90,178,180,223,281,292,293,296,332,350,361,368,373,397,453,554,568,575,596,622,665,675,763,775,783,812,815,866,31,60,64,68,97,108,131,155,241,247,386,398,400,447,449,457,480,490,524,542,549,585,607,618,648,693,700,711,725,881,883,212,525,557,756,104,752,867,382,799],s=e.filter(e=>!t.includes(e.id)&&!g.has(e.id));if(0===s.length){f(new Set);let s=e.filter(e=>!t.includes(e.id));if(0===s.length)return;let a=v(s);f(new Set([a.id])),c([...o,{snapshot:a,userGuesses:[],attempts:0,completed:!1,score:0}]),x("");return}let a=v(s);f(e=>new Set([...e,a.id])),c([...o,{snapshot:a,userGuesses:[],attempts:0,completed:!1,score:0}]),x("")},y=e=>{let t=i["meta-llama/Llama-4-Scout-17B-16E"];if(!t)return!1;let s=t.find(t=>t.snapshot_id===e);return!!s&&void 0!==s.target_position&&s.target_position>1},j=e=>{let t=i.gpt2;if(!t)return!1;let s=t.find(t=>t.snapshot_id===e);return!!s&&void 0!==s.target_position&&s.target_position>1},v=e=>{let t=e.filter(e=>y(e.id)),s=e.filter(e=>j(e.id)),a=Math.random();if(a<.5);else if(a<.75){if(t.length>0)return t[Math.floor(Math.random()*t.length)]}else if(s.length>0)return s[Math.floor(Math.random()*s.length)];return e[Math.floor(Math.random()*e.length)]},N=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.snapshot)return;let s={timestamp:new Date().toISOString(),snapshot_id:e.snapshot.id,target_letter:e.snapshot.target_letter,user_guesses:e.userGuesses,attempts:e.attempts,score:e.score,gave_up:t,first_sentence:e.snapshot.first_sentence,context:e.snapshot.context};try{let e=localStorage.getItem("letter-prediction-results"),t=e?JSON.parse(e):[];t.push(s),localStorage.setItem("letter-prediction-results",JSON.stringify(t)),console.log("Game result saved:",s)}catch(e){console.error("Failed to save game result:",e)}},w=(e,t)=>{let s=o[e];if(!s.snapshot||s.completed)return;let a=t.toLowerCase(),r=s.snapshot.target_letter.toLowerCase(),l=s.attempts+1,i=[...s.userGuesses,a];if(a===r){let t=Math.log2(l),a={...s,userGuesses:i,attempts:l,completed:!0,score:t},r=[...o];r[e]=a,c(r),N(a,!1)}else{let t={...s,userGuesses:i,attempts:l},a=[...o];a[e]=t,c(a)}x("")},k=(e,t)=>{"Enter"===e.key&&1===d.length&&w(t,d)},_=()=>{let e=o.filter(e=>e.completed);return 0===e.length?0:e.reduce((e,t)=>e+t.score,0)/e.length},M=e=>{var t,a;let r=o.filter(e=>e.completed);if(0===r.length)return(null===(t=s[e])||void 0===t?void 0:t.avg_optimistic)||0;let l=i[e];if(!l)return(null===(a=s[e])||void 0===a?void 0:a.avg_optimistic)||0;let n=r.map(t=>{var a,r;let i=null===(a=t.snapshot)||void 0===a?void 0:a.id,n=l.find(e=>e.snapshot_id===i);return n?n.optimistic_bits:(null===(r=s[e])||void 0===r?void 0:r.avg_optimistic)||0});return n.reduce((e,t)=>e+t,0)/n.length},C=r.useCallback(()=>100,[]),S=r.useCallback(()=>100,[]);if(C(),S(),m)return(0,a.jsx)("div",{className:"p-6 bg-gray-50 rounded-lg",children:(0,a.jsx)("div",{className:"text-center",children:"Loading prediction data..."})});let F=o.length>0?o[o.length-1]:null,E=o.filter(e=>e.completed);return E.length,(0,a.jsxs)("div",{className:"p-6 bg-gray-50 rounded-lg space-y-6 max-w-4xl mx-auto",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800 text-center",children:"Human vs LLM: Next Letter Prediction"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"Predict the next letter (the answer is one of 26 English letters, case-insensitive)"}),0===o.length&&(0,a.jsx)("div",{className:"flex justify-center gap-4",children:(0,a.jsx)("button",{onClick:b,disabled:0===e.length,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300",children:"Start Game"})}),F&&F.snapshot&&(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-lg",children:[(0,a.jsxs)("span",{className:"text-gray-700",children:[F.snapshot.first_sentence,". ",F.snapshot.context]}),(0,a.jsx)("span",{className:"bg-yellow-200 px-1 rounded",children:"_"}),F.completed&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"bg-green-200 px-1 rounded font-semibold",children:F.snapshot.target_letter}),(0,a.jsxs)("span",{className:"text-gray-700",children:[F.snapshot.remaining,"."]})]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["Snapshot ID: ",F.snapshot.id]}),!F.completed&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center justify-center",children:[(0,a.jsx)("input",{type:"text",value:d,onChange:e=>x(e.target.value.slice(-1)),onKeyPress:e=>k(e,o.length-1),placeholder:"?",className:"w-16 px-2 py-1 border rounded text-center font-mono text-lg",maxLength:1}),(0,a.jsx)("button",{onClick:()=>w(o.length-1,d),disabled:1!==d.length,className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300",children:"Guess"}),(0,a.jsx)("button",{onClick:()=>{let e=o[o.length-1];if(e&&!e.completed){let t=Math.log2(26),s={...e,attempts:26,completed:!0,score:t},a=[...o];a[o.length-1]=s,c(a),x(""),N(s,!0)}},className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"Give up"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 text-center",children:["Attempts: ",new Set(F.userGuesses).size,F.userGuesses.length>0&&(0,a.jsxs)("span",{className:"ml-4",children:["Previous guesses: ",[...new Set(F.userGuesses)].join(", ")]})]})]}),F.completed&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"p-3 rounded border ".concat(26===F.attempts?"bg-red-50 border-red-200":"bg-green-50 border-green-200"),children:(0,a.jsx)("div",{className:26===F.attempts?"text-red-800":"text-green-800",children:26===F.attempts?"✗ You gave up! The letter was '".concat(F.snapshot.target_letter,"'."):"✓ Correct! You found '".concat(F.snapshot.target_letter,"' in ").concat(F.attempts," attempts.")})}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("button",{onClick:b,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Next"})})]})]})}),E.length>0&&(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border space-y-4",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Performance Comparison"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Number of guesses in this round (log scale)"}),(0,a.jsxs)("div",{className:"relative h-8 mr-12 w-full",children:[(0,a.jsx)("div",{className:"absolute w-full h-0.5 bg-gray-300 top-1/2 transform -translate-y-1/2"}),(()=>{let e=E[E.length-1];if(!e||!e.snapshot)return null;let t=[];t.push(e.attempts),Object.entries(s).forEach(s=>{let[a]=s,r=i[a];if(r){let s=r.find(t=>t.snapshot_id===e.snapshot.id);s&&void 0!==s.target_position&&t.push(s.target_position)}});let r=Math.pow(2,Math.ceil(Math.log2(Math.max(...t,1))+1));r<2&&(r=2);let l=[1],n=2;for(;n<=r;)l.push(n),n*=2;return l.map(e=>{let t=Math.log(e)/Math.log(r)*100;return(0,a.jsx)("div",{className:"absolute top-1/2 transform -translate-y-1/2",style:{left:"".concat(t,"%")},children:(0,a.jsx)("div",{className:"w-0.5 h-2 bg-gray-400"})},e)})})(),(()=>{let e=E[E.length-1],t=[],r=[e.attempts];Object.entries(s).forEach(t=>{let[s]=t,a=i[s];if(a&&e.snapshot){let t=a.find(t=>t.snapshot_id===e.snapshot.id);t&&void 0!==t.target_position&&r.push(t.target_position)}});let l=Math.pow(2,Math.ceil(Math.log2(Math.max(...r,1))+1));l<2&&(l=2);let n=e.attempts,o=Math.log(n)/Math.log(l)*100;t.push({type:"user",position:o,attempts:n,emoji:"\uD83D\uDC64",guesses:[...new Set(e.userGuesses)]}),Object.entries(s).forEach(s=>{var a;let[r,n]=s,o=r.includes("gpt")?"\uD83E\uDD16":"\uD83E\uDD99",c=i[r],d=1,x=[];if(c&&e.snapshot){let t=c.find(t=>t.snapshot_id===e.snapshot.id);t&&(d=void 0!==t.target_position?t.target_position:t.guesses.length,x=t.guesses,console.log("".concat(r," for snapshot ").concat(e.snapshot.id,":")),console.log("  target_position: ".concat(t.target_position)),console.log("  attempts: ".concat(d)),console.log("  guesses: [".concat(t.guesses.join(", "),"]")),console.log("  target_letter: ".concat(e.snapshot.target_letter)))}let m=Math.log(d)/Math.log(l)*100,h=c&&e.snapshot?null===(a=c.find(t=>t.snapshot_id===e.snapshot.id))||void 0===a?void 0:a.target_position:void 0;t.push({type:"ai",model:r,position:m,attempts:d,emoji:o,guesses:x,targetPosition:void 0!==h?h-1:void 0})});let c=[];return t.forEach(e=>{let t=c.find(t=>2>Math.abs(t[0].position-e.position));t?t.push(e):c.push([e])}),c.flatMap(t=>{let s=t.length;return t.map((t,r)=>{let l=0;2===s?l=0===r?-8:8:3===s&&(l=0===r?-12:12*(1!==r));let i="meta-llama/Llama-4-Scout-17B-16E"===t.model?"Llama-4-Scout":t.model;return(0,a.jsxs)("div",{className:"absolute text-2xl transform -translate-x-1/2 group cursor-pointer",style:{left:"".concat(t.position,"%"),top:"50%",transform:"translate(-50%, calc(-50% + ".concat(l,"px))")},children:[t.emoji,(0,a.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block z-10",children:(0,a.jsxs)("div",{className:"bg-gray-800 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap",children:[(0,a.jsxs)("div",{className:"font-semibold",children:[t.emoji," ","user"===t.type?"You":i]}),(0,a.jsxs)("div",{children:[t.attempts," guess",1!==t.attempts?"es":""]}),t.guesses.length>0&&(0,a.jsxs)("div",{className:"text-gray-300 mt-1",children:["Guesses:"," ",t.guesses.map((s,r)=>("ai"===t.type?void 0!==t.targetPosition&&r===t.targetPosition:e.snapshot&&s.toLowerCase()===e.snapshot.target_letter.toLowerCase())?(0,a.jsx)("span",{className:"font-bold text-white",children:s},r):(0,a.jsx)("span",{children:s},r)).reduce((e,t,s)=>0===s?[t]:[...e,", ",t],[]),t.guesses.length>=10&&", ..."]}),(0,a.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1",children:(0,a.jsx)("div",{className:"border-4 border-transparent border-t-gray-800"})})]})})]},"".concat(t.type,"-").concat(t.model||"user"))})})})()]}),(0,a.jsx)("div",{className:"relative text-xs text-gray-500 mt-1 h-4 w-full",children:(()=>{let e=E[E.length-1];if(!e||!e.snapshot)return null;let t=[e.attempts];Object.entries(s).forEach(s=>{let[a]=s,r=i[a];if(r){let s=r.find(t=>t.snapshot_id===e.snapshot.id);s&&void 0!==s.target_position&&t.push(s.target_position)}});let r=Math.pow(2,Math.ceil(Math.log2(Math.max(...t,1))+1));r<2&&(r=2);let l=[1],n=2;for(;n<=r;)l.push(n),n*=2;return l.map(e=>{let t=Math.log(e)/Math.log(r)*100;return(0,a.jsx)("span",{className:"absolute transform -translate-x-1/2",style:{left:"".concat(t,"%")},children:e},e)})})()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Overall score thus far (score = ∑ log(number of guesses))"}),(0,a.jsxs)("div",{className:"relative h-8 mr-12 w-full",children:[(0,a.jsx)("div",{className:"absolute w-full h-0.5 bg-gray-300 top-1/2 transform -translate-y-1/2"}),(()=>{let e,t;let r=[],l=_();l>0&&r.push(l),Object.entries(s).forEach(e=>{let[t]=e,s=M(t);s>0&&r.push(s)});let i=Math.max(...r,0);if(i<.95)e=1,t=[0,1];else if(i<1.45)e=1.5,t=[0,1];else{e=Math.ceil(i+.5),t=[];for(let s=0;s<=e;s++)t.push(s)}return t.map(t=>{let s=t/e*100;return(0,a.jsx)("div",{className:"absolute top-1/2 transform -translate-y-1/2",style:{left:"".concat(s,"%")},children:(0,a.jsx)("div",{className:"w-0.5 h-2 bg-gray-400"})},t)})})(),(()=>{let e;let t=[],r=_();r>0&&t.push(r),Object.entries(s).forEach(e=>{let[s]=e,a=M(s);a>0&&t.push(a)});let l=Math.max(...t,0);return e=l<.95?1:l<1.45?1.5:Math.ceil(l+.5),(0,a.jsxs)("div",{className:"absolute text-2xl top-1/2 transform -translate-y-1/2 -translate-x-1/2 group cursor-pointer",style:{left:"".concat(r/e*100,"%")},children:["\uD83D\uDC64",(0,a.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block z-10",children:(0,a.jsxs)("div",{className:"bg-gray-800 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"font-semibold",children:"\uD83D\uDC64 You"}),(0,a.jsxs)("div",{className:"text-yellow-300",children:[_().toFixed(3)," bits"]}),(0,a.jsxs)("div",{className:"text-gray-300 mt-1",children:["Average of ",E.length," game",1!==E.length?"s":""]}),(0,a.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1",children:(0,a.jsx)("div",{className:"border-4 border-transparent border-t-gray-800"})})]})})]})})(),(()=>{let e;let t=[],r=_();r>0&&t.push(r),Object.entries(s).forEach(e=>{let[s]=e,a=M(s);a>0&&t.push(a)});let l=Math.max(...t,0);return e=l<.95?1:l<1.45?1.5:Math.ceil(l+.5),Object.entries(s).map(t=>{let[s,r]=t,l=M(s),i=s.includes("gpt")?"\uD83E\uDD16":"\uD83E\uDD99",n="meta-llama/Llama-4-Scout-17B-16E"===s?"Llama-4-Scout":s;return(0,a.jsxs)("div",{className:"absolute text-2xl top-1/2 transform -translate-y-1/2 -translate-x-1/2 group cursor-pointer",style:{left:"".concat(l/e*100,"%")},children:[i,(0,a.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block z-10",children:(0,a.jsxs)("div",{className:"bg-gray-800 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap",children:[(0,a.jsxs)("div",{className:"font-semibold",children:[i," ",n]}),(0,a.jsxs)("div",{className:"text-yellow-300",children:[l.toFixed(3)," bits"]}),(0,a.jsxs)("div",{className:"text-gray-300 mt-1",children:["On same ",E.length," game",1!==E.length?"s":""]}),(0,a.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1",children:(0,a.jsx)("div",{className:"border-4 border-transparent border-t-gray-800"})})]})})]},s)})})()]}),(0,a.jsx)("div",{className:"relative text-xs text-gray-500 mt-1 h-4 w-full",children:(()=>{let e,t;let r=[],l=_();l>0&&r.push(l),Object.entries(s).forEach(e=>{let[t]=e,s=M(t);s>0&&r.push(s)});let i=Math.max(...r,0);if(i<.95)e=1,t=[0,1];else if(i<1.45)e=1.5,t=[0,1];else{e=Math.ceil(i+.5),t=[];for(let s=0;s<=e;s++)t.push(s)}return t.map(t=>{let s=t/e*100;return(0,a.jsxs)("span",{className:"absolute transform -translate-x-1/2 whitespace-nowrap",style:{left:"".concat(s,"%")},children:[t," bit",1!==t?"s":""]},t)})})()})]}),(0,a.jsxs)("div",{className:"flex justify-between widget-explanation",children:[(0,a.jsxs)("span",{children:["Games played: ",o.length]}),(0,a.jsx)("span",{children:"Hover over emojis for details"})]})]})]})}},32480:(e,t,s)=>{"use strict";s.d(t,{default:()=>g});var a=s(58081),r=s(82149),l=s(34177),i=s(35313),n=s(13081),o=s(20619),c=s(99020),d=s(90207),x=s(37018),m=s(36653),h=s(19213),u=s(43090),p=s(23639);let g=()=>{let[e,t]=(0,r.useState)(.2),[s,g]=(0,r.useState)(.8),[f,b]=(0,r.useState)(p.sQ.controls.defaultNumFlips),[y,j]=(0,r.useState)(0),[v,N]=(0,r.useState)([]),[w,k]=(0,r.useState)(!1),[_,M]=(0,r.useState)(p.sQ.controls.defaultSpeed),[C,S]=(0,r.useState)(!1),F=(0,r.useMemo)(()=>0===e||1===e?0:-e*Math.log2(e)-(1-e)*Math.log2(1-e),[e]),E=(0,r.useMemo)(()=>0===s||1===s?1/0:-e*Math.log2(s)-(1-e)*Math.log2(1-s),[e,s]),A=(0,r.useMemo)(()=>{let e=[];for(let t=0;t<=f;t+=Math.max(1,Math.floor(f/50)))e.push({flip:t,entropyRate:t*F,crossentropyRate:t*E});return e},[f,F,E]),L=(0,r.useMemo)(()=>[0,"dataMax"],[]),D=()=>{j(0),N([{flip:0,logP:0,logQ:0,entropyRate:0,crossentropyRate:0}]),k(!1)},z=()=>{y>=f&&D(),k(!w)};(0,r.useEffect)(()=>{if(!w||y>=f)return;let t=setTimeout(()=>{let t=Math.random()<e,a=t?-Math.log2(e):-Math.log2(1-e),r=t?-Math.log2(s):-Math.log2(1-s);N(e=>{let t=e[e.length-1],s=y+1;return[...e,{flip:s,logP:t.logP+a,logQ:t.logQ+r,entropyRate:s*F,crossentropyRate:s*E}]}),j(e=>e+1)},_);return()=>clearTimeout(t)},[w,y,e,s,_,f,F,E]),(0,r.useEffect)(()=>{D()},[e,s,f,F,E]);let P=e=>"".concat((100*e).toFixed(0),"%"),T=(0,r.useMemo)(()=>0!==y||w?v:A,[v,A,y,w]),W=(0,r.useMemo)(()=>{let e=w||y>0?y:f,t=e-.1*e;return{entropy:[{flip:t,y:0},{flip:t,y:t*F}],crossentropy:[{flip:e,y:0},{flip:e,y:e*E}],kl:[{flip:t,y:t*F},{flip:t,y:t*E}]}},[y,f,F,E,w]),B=(0,r.useMemo)(()=>{let e=w||y>0?y:f,t=e-.1*e,s=t*F,a=t*E,r=e*E;return{entropy:{flip:t,y:.5*s,text:"Entropy"},cross:{flip:e,y:.5*r,text:"Cross-entropy"},kl:{flip:t,y:s+.5*(a-s),text:"KL divergence"}}},[y,f,F,E,w]);return(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-center mb-4",children:"Cross-Entropy Simulator"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["True Heads Probability (P): ",P(e)]}),(0,a.jsx)("input",{type:"range",min:"0.01",max:"0.99",step:"0.01",value:e,onChange:e=>t(parseFloat(e.target.value)),className:"".concat(p.MI.base," ").concat(p.MI.rangeColors.trueP),disabled:w})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Model Heads Probability (Q): ",P(s)]}),(0,a.jsx)("input",{type:"range",min:"0.01",max:"0.99",step:"0.01",value:s,onChange:e=>g(parseFloat(e.target.value)),className:"".concat(p.MI.base," ").concat(p.MI.rangeColors.modelQ),disabled:w})]})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"inline-block",children:(0,a.jsx)(u.BlockMath,{math:"\\begin{align*}\n                H(P) &= ".concat(F.toFixed(3),"\\text{ bits/flip} \\\\\n                H(P,Q) &= ").concat(E.toFixed(3),"\\text{ bits/flip}\n              \\end{align*}")})})})]}),(0,a.jsx)("div",{className:"my-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Number of Flips: ",f]}),(0,a.jsx)("input",{type:"range",min:"10",max:"500",step:"10",value:f,onChange:e=>b(parseInt(e.target.value)),className:"".concat(p.MI.base," ").concat(p.MI.rangeColors.flips),disabled:w})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Simulation Speed (faster ←→ slower)"}),(0,a.jsx)("input",{type:"range",min:"10",max:"500",step:"10",value:_,onChange:e=>M(parseInt(e.target.value)),className:"".concat(p.MI.base," ").concat(p.MI.rangeColors.speed)})]})]}),(0,a.jsxs)("div",{className:"flex justify-center items-center gap-4",children:[(0,a.jsx)("button",{onClick:z,className:"".concat(p._C.base," ").concat(w?p._C.primary.running:p._C.primary.stopped),children:w?"Pause":y>=f?"Reset & Start":"Start"}),(0,a.jsx)("button",{onClick:D,className:"".concat(p._C.base," ").concat(p._C.secondary),disabled:!y,children:"Reset"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg",children:(0,a.jsx)("div",{className:C?"fixed inset-0 z-50 bg-white p-8":"relative",children:(0,a.jsxs)("div",{className:"".concat(C?p.sQ.height.zoomed:p.sQ.height.normal," transition-all duration-").concat(p.sQ.animation.transitionDuration," relative"),children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("div",{className:"flex justify-end mb-2",children:(0,a.jsx)("button",{onClick:()=>S(!C),className:"px-3 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors z-50",children:C?"\uD83D\uDD0D- Zoom Out":"\uD83D\uDD0D+ Zoom In"})}),C&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("button",{onClick:z,className:"px-3 py-1 text-xs rounded font-medium ".concat(w?"bg-yellow-500 hover:bg-yellow-600":"bg-blue-500 hover:bg-blue-600"," text-white"),children:w?"Pause":y>=f?"Reset & Start":"Start"}),(0,a.jsx)("button",{onClick:D,className:"px-3 py-1 text-xs bg-gray-500 hover:bg-gray-600 text-white rounded",disabled:!y,children:"Reset"})]})]}),(0,a.jsx)(i.u,{width:"100%",height:"100%",children:(0,a.jsxs)(n.b,{data:T,margin:{...p.sQ.margins,left:50,right:60},children:[(0,a.jsxs)("defs",{children:[(0,a.jsx)("marker",{id:"arrowhead",viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto",fill:"#333",children:(0,a.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z"})}),(0,a.jsx)("marker",{id:"arrowtail",viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto",fill:"#333",children:(0,a.jsx)("path",{d:"M 10 0 L 0 5 L 10 10 z"})})]}),(0,a.jsx)(o.d,{strokeDasharray:"3 3"}),(0,a.jsx)(c.W,{dataKey:"flip",label:{value:"Number of Coin Flips",position:"insideBottom",offset:-10},domain:[0,w||y>0?"dataMax":f],type:"number"}),(0,a.jsx)(d.h,{label:{value:"Accumulated Surprisal (bits)",angle:-90,position:"insideLeft",style:{textAnchor:"middle"}},domain:L,tickFormatter:e=>Math.round(e).toString()}),(0,a.jsx)(x.m,{content:(0,a.jsx)(e=>{let{active:t,payload:s,label:r}=e;if(!t||!s)return null;let i=["logP","logQ","entropyRate","crossentropyRate"],n=s.filter(e=>i.includes(e.dataKey));return(0,a.jsx)(l.E,{...e,payload:n,labelFormatter:e=>"Flip # ".concat(e),formatter:e=>"".concat(e.toFixed(2)," bits")})},{})}),(0,a.jsx)(m.s,{wrapperStyle:{fontSize:"12px"}}),(w||y>0)&&(0,a.jsx)(h.N,{type:"monotone",dataKey:"logP",name:"Using True P",stroke:p.sQ.colors.trueP,strokeWidth:2,dot:!1,isAnimationActive:p.sQ.animation.isAnimationActive}),(w||y>0)&&(0,a.jsx)(h.N,{type:"monotone",dataKey:"logQ",name:"Using Model Q",stroke:p.sQ.colors.modelQ,strokeWidth:2,dot:!1,isAnimationActive:p.sQ.animation.isAnimationActive}),(0,a.jsx)(h.N,{type:"monotone",dataKey:"entropyRate",name:"Entropy Rate H(P)",stroke:p.sQ.colors.entropy,strokeWidth:2,strokeDasharray:"5 5",dot:!1,isAnimationActive:p.sQ.animation.isAnimationActive}),(0,a.jsx)(h.N,{type:"monotone",dataKey:"crossentropyRate",name:"Cross-entropy Rate H(P,Q)",stroke:p.sQ.colors.klExpected,strokeWidth:2,strokeDasharray:"5 5",dot:!1,isAnimationActive:p.sQ.animation.isAnimationActive}),(0,a.jsx)(h.N,{data:W.entropy,dataKey:"y",stroke:p.sQ.colors.entropy,strokeWidth:3,dot:!1,isAnimationActive:!1,strokeLinecap:"round",markerStart:"url(#arrowtail)",markerEnd:"url(#arrowhead)",legendType:"none",activeDot:!1,connectNulls:!1}),(0,a.jsx)(h.N,{data:W.crossentropy,dataKey:"y",stroke:p.sQ.colors.klExpected,strokeWidth:3,dot:!1,isAnimationActive:!1,strokeLinecap:"round",markerStart:"url(#arrowtail)",markerEnd:"url(#arrowhead)",legendType:"none",activeDot:!1,connectNulls:!1}),(0,a.jsx)(h.N,{data:W.kl,dataKey:"y",stroke:"#2563eb",strokeWidth:3,dot:!1,isAnimationActive:!1,strokeDasharray:"3 3",markerStart:"url(#arrowtail)",markerEnd:"url(#arrowhead)",legendType:"none",activeDot:!1,connectNulls:!1}),(0,a.jsx)(h.N,{data:[B.entropy],dataKey:"y",stroke:"transparent",dot:!1,isAnimationActive:!1,label:e=>{let{x:t,y:s}=e,r=B.entropy.text,l=7*r.length+8;return(0,a.jsxs)("g",{children:[(0,a.jsx)("rect",{x:t-l/2,y:s-8,width:l,height:16,fill:"white",stroke:"#ccc",strokeWidth:1,rx:3}),(0,a.jsx)("text",{x:t,y:s,fill:p.sQ.colors.entropy,textAnchor:"middle",alignmentBaseline:"middle",style:{fontSize:12,fontWeight:"bold"},children:r})]})},legendType:"none"}),(0,a.jsx)(h.N,{data:[B.cross],dataKey:"y",stroke:"transparent",dot:!1,isAnimationActive:!1,label:e=>{let{x:t,y:s}=e,r=B.cross.text,l=7*r.length+8;return(0,a.jsxs)("g",{children:[(0,a.jsx)("rect",{x:t-l/2,y:s-8,width:l,height:16,fill:"white",stroke:"#ccc",strokeWidth:1,rx:3}),(0,a.jsx)("text",{x:t,y:s,fill:p.sQ.colors.klExpected,textAnchor:"middle",alignmentBaseline:"middle",style:{fontSize:12,fontWeight:"bold"},children:r})]})},legendType:"none"}),(0,a.jsx)(h.N,{data:[B.kl],dataKey:"y",stroke:"transparent",dot:!1,isAnimationActive:!1,label:e=>{let{x:t,y:s}=e,r=B.kl.text,l=7*r.length+8;return(0,a.jsxs)("g",{children:[(0,a.jsx)("rect",{x:t-l/2,y:s-8,width:l,height:16,fill:"white",stroke:"#ccc",strokeWidth:1,rx:3}),(0,a.jsx)("text",{x:t,y:s,fill:"#2563eb",textAnchor:"middle",alignmentBaseline:"middle",style:{fontSize:12,fontWeight:"bold"},children:r})]})},legendType:"none"})]})})]})})})]})}},33987:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(58081),r=s(82149),l=s(10574);let i=e=>{let{title:t="Bayes Calculator (Log Space)"}=e,[s,i]=(0,r.useState)(1),[n,o]=(0,r.useState)(0),[c,d]=(0,r.useState)(-1),[x,m]=(0,r.useState)(-2),h=(0,r.useMemo)(()=>{let e=s+c,t=n+x,a=Math.pow(2,e),r=Math.pow(2,t),l=a+r;return{posteriorLogFair:e,posteriorLogBiased:t,posteriorFair:a,posteriorBiased:r,probFair:l>0?a/l*100:50,probBiased:l>0?r/l*100:50}},[s,n,c,x]);return(0,a.jsxs)("div",{className:"p-6 bg-gray-50 rounded-lg space-y-4 max-w-2xl mx-auto",children:[t&&(0,a.jsx)("h3",{className:"text-lg font-semibold text-center text-gray-800",children:t}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 w-36",children:"Prior log odds:"}),(0,a.jsx)("input",{type:"number",value:s,onChange:e=>i(parseFloat(e.target.value)||0),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center",step:"0.1"}),(0,a.jsx)("span",{className:"text-gray-500",children:":"}),(0,a.jsx)("input",{type:"number",value:n,onChange:e=>o(parseFloat(e.target.value)||0),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center",step:"0.1"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"(log₂ of Fair : Biased)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 w-36",children:"Likelihood log ratio:"}),(0,a.jsx)("input",{type:"number",value:c,onChange:e=>d(parseFloat(e.target.value)||0),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center",step:"0.01"}),(0,a.jsx)("span",{className:"text-gray-500",children:":"}),(0,a.jsx)("input",{type:"number",value:x,onChange:e=>m(parseFloat(e.target.value)||0),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center",step:"0.01"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"(log₂ of Fair : Biased)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"w-36"}),(0,a.jsx)("span",{className:"w-16 text-center text-gray-400",children:"+"}),(0,a.jsx)("span",{className:"text-gray-500"}),(0,a.jsx)("span",{className:"w-16 text-center text-gray-400",children:"+"})]}),(0,a.jsx)("div",{className:"border-t border-gray-300 mx-8"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 w-36",children:"Posterior log odds:"}),(0,a.jsx)("div",{className:"w-16 px-2 py-1 bg-purple-50 border border-purple-200 rounded text-center text-sm font-mono",children:h.posteriorLogFair.toFixed(2)}),(0,a.jsx)("span",{className:"text-gray-500",children:":"}),(0,a.jsx)("div",{className:"w-16 px-2 py-1 bg-purple-50 border border-purple-200 rounded text-center text-sm font-mono",children:h.posteriorLogBiased.toFixed(2)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 w-36",children:"Posterior odds:"}),(0,a.jsx)("div",{className:"w-16 px-2 py-1 bg-blue-50 border border-blue-200 rounded text-center text-sm font-mono",children:h.posteriorFair.toFixed(2)}),(0,a.jsx)("span",{className:"text-gray-500",children:":"}),(0,a.jsx)("div",{className:"w-16 px-2 py-1 bg-blue-50 border border-blue-200 rounded text-center text-sm font-mono",children:h.posteriorBiased.toFixed(2)}),(0,a.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["(",(0,a.jsx)(l.A,{math:"2^{".concat(h.posteriorLogFair.toFixed(2),"} : 2^{").concat(h.posteriorLogBiased.toFixed(2),"}")}),")"]})]}),(0,a.jsx)("div",{className:"bg-green-50 rounded-lg p-4 mt-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Posterior probabilities:"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"font-mono text-sm font-bold text-blue-600",children:[h.probFair.toFixed(1),"%"]}),(0,a.jsx)("span",{className:"text-gray-500",children:":"}),(0,a.jsxs)("span",{className:"font-mono text-sm font-bold text-blue-600",children:[h.probBiased.toFixed(1),"%"]})]})]})})]}),(0,a.jsx)("div",{className:"text-center text-sm text-gray-600",children:"In log space, multiplication becomes addition. Notice how much simpler the arithmetic is!"})]})}},35652:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var a=s(58081),r=s(82149),l=s(23229);let i={intelligence:"\uD83E\uDDE0 Intelligence test",predictions:"\uD83D\uDD2E Who's less wrong?","financial-mathematics":"\uD83D\uDCC8 Modelling returns",wikipedia:"\uD83C\uDF10 How large is Wikipedia?",statistics:"\uD83E\uDDB6 Average foot",xkcd:"\uD83E\uDD13 Explaining XKCD jokes","machine-learning":"\uD83E\uDD2F At a loss"};function n(e){let{id:t,headline:s,children:n,startOpen:o=!1}=e,[c,d]=(0,r.useState)(null!=s?s:"");return(0,r.useEffect)(()=>{if(s){d(s);return}if(i[t]){d(i[t]);return}{let e=window.__riddleRegistry||{};e[t]&&d(e[t])}},[s,t]),(0,r.useCallback)(e=>{e.preventDefault();let s=document.getElementById(t);if(s){let e=s.querySelector('[class*="header"]');e&&e.click();let t=s.getBoundingClientRect(),a=(window.pageYOffset||document.documentElement.scrollTop)+t.top-.25*window.innerHeight;window.scrollTo({top:a,behavior:"smooth"})}},[t]),(0,a.jsx)(l.default,{headline:c||"Riddle",color:"#f5f5f5",headerColor:"#d1fae5",startOpen:o,children:n})}},36185:(e,t,s)=>{"use strict";s.r(t),s.d(t,{CitationsProvider:()=>c,Cite:()=>x,References:()=>u});var a=s(58081),r=s(82149),l=s(11436),i=s(17715),n=s.n(i);let o=(0,r.createContext)({citations:new Set,citationOrder:[],addCitation:()=>{},bibData:{}});function c(e){let{children:t,data:s={}}=e,[l,i]=(0,r.useState)(new Set),[n,c]=(0,r.useState)([]),[d]=(0,r.useState)(s),x=r.useCallback(e=>{i(t=>{if(t.has(e))return t;let s=new Set(t);return s.add(e),s}),c(t=>t.includes(e)?t:[...t,e])},[]);return(0,a.jsx)(o.Provider,{value:{citations:l,citationOrder:n,addCitation:x,bibData:d},children:t})}function d(e){var t;let{entry:s}=e,r=null===(t=s.title)||void 0===t?void 0:t.replace(/[{}]/g,"");return(0,a.jsxs)("span",{children:[m(s.author),s.year?" (".concat(s.year,"). "):". ",r&&(0,a.jsxs)("span",{children:[r,r.endsWith("?")||r.endsWith(".")?" ":". "]}),s.journal&&(0,a.jsxs)("span",{children:[(0,a.jsx)("em",{children:s.journal}),s.volume&&", ".concat(s.volume),s.number&&"(".concat(s.number,")"),s.pages&&", ".concat(s.pages.replace(/--/g,"–"))]})]})}function x(e){let{children:t}=e,{addCitation:s,bibData:i,citationOrder:c}=(0,r.useContext)(o),x=t.split(",").map(e=>e.trim().toLowerCase()),m=x.map(e=>i[e]).filter(e=>!!e);return r.useEffect(()=>{x.forEach(e=>s(e))},[x,s]),(0,a.jsxs)(l.bL,{openDelay:100,closeDelay:300,children:[(0,a.jsx)(l.l9,{asChild:!0,children:(0,a.jsxs)("span",{className:n().citation,children:["[",x.map((e,t)=>{let s=i[e],l=c.indexOf(e)+1;return s?(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)("a",{href:"#ref-".concat(e),className:n()["citation-link"],children:l}),t<x.length-1?", ":""]},e):(console.warn("Citation key not found: ".concat(e)),(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)("span",{className:n()["citation-link"],children:"?"}),t<x.length-1?", ":""]},e))}),"]"]})}),(0,a.jsx)(l.ZL,{children:(0,a.jsx)(l.UC,{className:n()["citation-tooltip"],sideOffset:5,children:m.map((e,t)=>(0,a.jsx)("span",{className:n()["tooltip-entry"],children:(0,a.jsx)(d,{entry:e})},t))})})]})}function m(e){if(!e)return"";let t=e.split(" and ");return 1===t.length?t[0].split(",")[0]:2===t.length?"".concat(t[0].split(",")[0]," and ").concat(t[1].split(",")[0]):"".concat(t[0].split(",")[0]," et al.")}function h(e){let{entry:t,id:s}=e;return(0,a.jsxs)("div",{id:"ref-".concat(s),className:n()["reference-item"],children:[m(t.author),t.year?" (".concat(t.year,"). "):". ",t.title&&(0,a.jsxs)("span",{children:[t.title,t.title.endsWith("?")||t.title.endsWith(".")?" ":". "]}),t.booktitle&&(0,a.jsxs)("span",{children:["In ",(0,a.jsx)("em",{children:t.booktitle}),t.pages?", pp. ".concat(t.pages.replace(/--/g,"–")):"",". "]}),t.journal&&(0,a.jsxs)("span",{children:[(0,a.jsx)("em",{children:t.journal}),t.volume&&", ".concat(t.volume),t.number&&"(".concat(t.number,")"),t.pages&&", ".concat(t.pages.replace(/--/g,"–")),". "]}),t.publisher&&"".concat(t.publisher),t.address&&", ".concat(t.address),(t.publisher||t.address)&&". ",t.url&&(0,a.jsxs)("span",{children:[(0,a.jsx)("a",{href:t.url,className:n()["citation-link"],target:"_blank",rel:"noopener noreferrer",children:t.url}),". "]}),t.note&&"".concat(t.note,". ")]})}function u(e){let{headerLevel:t=2,headerText:s="References"}=e,{bibData:l,citationOrder:i}=(0,r.useContext)(o);return 0===i.length?null:(0,a.jsxs)("div",{id:"references",className:n().references,children:[t&&s?r.createElement("h".concat(t),null,s):null,(0,a.jsx)("div",{className:n()["reference-list"],children:i.map(e=>{let t=l[e];return t?(0,a.jsx)(h,{id:e,entry:t},e):null})})]})}},37720:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(58081);function r(e){let{type:t,isZoomed:s=!1,onClick:r,size:l="sm",className:i=""}=e;return(0,a.jsx)("button",{onClick:r,className:"".concat((()=>{let e="transition-colors rounded-md";return"reset"===t?"".concat(e," bg-blue-500 hover:bg-blue-600 text-white"):"".concat(e," bg-gray-100 hover:bg-gray-200 text-gray-700")})()," ").concat("sm"===l?"px-3 py-1 text-xs":"px-4 py-2 text-sm"," ").concat("float-right mb-2"," ").concat(i),children:(()=>{switch(t){case"reset":default:return"Reset";case"zoom-toggle":return s?"\uD83D\uDDD7 Exit Fullscreen":"\uD83D\uDD0D Zoom";case"zoom-in":return"\uD83D\uDD0D+ Zoom In";case"zoom-out":return"\uD83D\uDD0D- Zoom Out"}})()})}s(82149)},39593:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(58081),r=s(82149),l=s(43090);let i=e=>{let{values:t=[1,3,2,5,4],title:s="Softmax Distribution",minLambda:i=-3,maxLambda:n=3,initialLambda:o=.5}=e,[c,d]=(0,r.useState)(o),[x,m]=(0,r.useState)(400);(0,r.useEffect)(()=>{let e=()=>{m(Math.min(400,window.innerWidth-80))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let h=(0,r.useMemo)(()=>{let e=t.map(e=>Math.exp(c*e)),s=e.reduce((e,t)=>e+t,0);return e.map(e=>e/s)},[t,c]),u=Math.min(300,.75*x),p={top:20,right:20,bottom:20,left:40},g=x-p.left-p.right,f=u-p.top-p.bottom,b=g/t.length,y=f/1;return(0,a.jsxs)("div",{className:"p-4 sm:p-6 bg-gray-50 rounded-lg space-y-4 max-w-3xl mx-auto",children:[s&&(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-center text-gray-800",children:s}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border",children:(0,a.jsxs)("svg",{width:"100%",height:u,viewBox:"0 0 ".concat(x," ").concat(u),className:"border border-gray-200 rounded",children:[(0,a.jsx)("rect",{x:p.left,y:p.top,width:g,height:f,fill:"#f9fafb",stroke:"#e5e7eb"}),[.2,.4,.6,.8,1].map(e=>{let t=p.top+f-e*y;return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:p.left,y1:t,x2:p.left+g,y2:t,stroke:"#e5e7eb",strokeDasharray:"2,2"}),(0,a.jsx)("text",{x:p.left-5,y:t+4,textAnchor:"end",fontSize:"10",fill:"#6b7280",children:e.toFixed(1)})]},e)}),h.map((e,t)=>{let s=e*y,r=p.left+t*b+.1*b,l=p.top+f-s,i=.8*b;return(0,a.jsxs)("g",{children:[(0,a.jsx)("rect",{x:r,y:l,width:i,height:s,fill:"hsl(".concat(220+30*t,", 70%, ").concat(50+30*e,"%)"),stroke:"#374151",strokeWidth:"1"}),(0,a.jsx)("text",{x:r+i/2,y:l-5,textAnchor:"middle",fontSize:"10",fill:"#374151",fontWeight:"bold",children:e.toFixed(3)})]},t)}),(0,a.jsx)("line",{x1:p.left,y1:p.top+f,x2:p.left+g,y2:p.top+f,stroke:"#374151",strokeWidth:"2"}),(0,a.jsx)("line",{x1:p.left,y1:p.top,x2:p.left,y2:p.top+f,stroke:"#374151",strokeWidth:"2"}),(0,a.jsx)("text",{x:15,y:p.top+f/2,textAnchor:"middle",fontSize:"12",fill:"#374151",transform:"rotate(-90, 15, ".concat(p.top+f/2,")"),children:"Probability"})]})}),(0,a.jsx)("div",{className:"bg-blue-50 p-3 rounded text-center",children:(0,a.jsx)(l.BlockMath,{math:"p_i = \\frac{\\exp(".concat(c.toFixed(2)," \\cdot a_i)}{\\sum_j \\exp(").concat(c.toFixed(2)," \\cdot a_j)}")})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"text-center text-sm font-medium text-gray-700",children:[(0,a.jsx)("strong",{children:"Lambda"})," (λ) = ",c.toFixed(1)]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"range",min:i,max:n,step:.1,value:c,onChange:e=>d(Number(e.target.value)),className:"w-full h-4 bg-gradient-to-r from-red-200 via-yellow-200 to-green-200 rounded-lg appearance-none cursor-pointer",style:{background:"linear-gradient(to right, \n                #fecaca 0%, \n                #fef3c7 50%, \n                #d1fae5 100%)",minHeight:"44px"}}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,a.jsx)("span",{children:i}),(0,a.jsx)("span",{children:"0"}),(0,a.jsx)("span",{children:n})]})]}),(0,a.jsx)("div",{className:"text-xs text-center text-gray-600",children:"← argmin | uniform distribution | argmax →"})]})]})}},39661:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var a=s(58081),r=s(82149),l=s(11436),i=s(3590),n=s(10574);function o(){let[e,t]=(0,r.useState)([]),[s,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[h,u]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null),[f,b]=(0,r.useState)(""),[y,j]=(0,r.useState)(null),[v,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[_,M]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{try{let e="/problens-web",s=await fetch("".concat(e,"/compression_experiments/texts/list.json"));if(!s.ok)throw Error("Failed to load text list: ".concat(s.status));let a=await s.json(),r=await fetch("".concat(e,"/compression_experiments/compression_results.json"));if(!r.ok)throw Error("Failed to load compression results: ".concat(r.status));let l=await r.json(),i=[];for(let t of a)try{let s="".concat(e,"/compression_experiments/texts/").concat(t.filename),a=await fetch(s);if(!a.ok)continue;let r=await a.text(),n=l[t.filename.replace(/\.[^/.]+$/,"")]||{},o=r.trim().length,c=8*o,d=(e,t,s)=>{var a;let r=t.replace(/\.[^/.]+$/,""),l={kl_intro_10kb:{Baseline:"","Best code":"Entropy of English letter frequencies is about 4 bits per letter. This text is a bit worse due to math characters","ZIP (zlib)":"ZIP can typically do a bit better than pure letter-encoding due to common words like 'the'","LLM (GPT-2)":"If you can speak English, its entropy is about 1 bit per letter.","LLM (Llama 4)":"If you can speak English and are very smart at math, you can do better than 1 bit per letter for this text."},pi_digits_10kb:{Baseline:"","Best code":"All ten digits 0,1,...,9 have the same frequency in $\\pi$. The optimal code for letters thus uses $\\log 10 \\approx 3.3$ bits per character.","ZIP (zlib)":"ZIP kind of sucks here, it probably tries very hard to find some order in $\\pi$ that really isn't there; thus 20% overhead over naive encoding of digits.","LLM (GPT-2)":"GPT-2 clearly does not know $\\pi$ (except for the first few digits) so it's stuck with $\\log 10 \\approx 3.3$ bits per letter. In fact, it's a bit worse due to technicalities related to converting between tokens and characters.","LLM (Llama 4)":"Llama clearly knows the first 10k digits of pi pretty well! It memorized the first 1K digits incredibly well, then it starts stumbling more and more often, but still very impressive!"},declaration_full:{Baseline:"","Best code":"Entropy of English letter frequencies is about 4 bits per letter.","ZIP (zlib)":"ZIP can typically do a bit better than pure letter-encoding due to common words like 'the'","LLM (GPT-2)":"GPT-2 clearly remembers that all men were created equal! Otherwise, it's about as good as any other English text.","LLM (Llama 4)":"Llama 4 knows the declaration by heart. It is probably not super sure about the order of signatories at the very end."},human_mitochondrial_dna:{Baseline:"","Best code":"DNA has 4-letter alphabet with quite even base frequencies, leading to 2 bits per letter and 4x speedup over the naive encoding.","ZIP (zlib)":"As with pi, ZIP is trying to find some correlations between consecutive letters, but there does not seem to be that much going on; this leads to 20% overhead as with $\\pi$.","LLM (GPT-2)":"GPT-2 just sees random string over four letters. It's a bit worse than 2 bits per letter due to technicalities related to converting between tokens and characters.","LLM (Llama 4)":"I chose one of the most important parts of human DNA and Llama actually knows the first few hundreds of base pairs. Then it's again just (slightly worse than) 2 bits per letter."},huffman_code_10kb:{Baseline:"","Best code":"Letter frequencies in code are similar to English texts, so we can get about 4 bits per character","ZIP (zlib)":"Code is easier to compress by zip than regular English text as it contains many very frequent words like print, if and so on.","LLM (GPT-2)":"As with ZIP, GPT-2 achieves a bit better performance than on regular English text.","LLM (Llama 4)":"Unlike GPT-2, Llama can code. The code snippet is a well-known algorithm and Llama clearly knows it. The second part of the example code is more ad-hoc as it contains some printing of results where there's more wiggle room about what may come next."},repeated_phrase:{Baseline:"","Best code":"Although the text is repetitive, the entropy of letter frequencies is very similar to that of English. ","ZIP (zlib)":"ZIP is smart enough to compress repeating patterns so it's great for files like this one. ","LLM (GPT-2)":"GPT-2 is basically not surprised at all after the first sentence. Except for a weird bit in the middle that I don't understand. ","LLM (Llama 4)":"Llama just reads the first sentence and then chills. With some caveats, it can compress the whole file to <100 bits. "}};return(null===(a=l[r])||void 0===a?void 0:a[e])||"Compression analysis for ".concat(s," characters")},x={name:t.name,description:t.description,text:r.trim(),filename:t.filename,results:[{algorithm:"Baseline",bits:n.naive_bits||c,ratio:"1.00x",generalDescription:"Just store each character as 8 bits in memory, using ASCII encoding. ",specificDescription:d("Baseline",t.filename,o)},{algorithm:"Best code",bits:n.letterwise_bits||c,ratio:n.letterwise_ratio?"".concat(n.letterwise_ratio,"x"):"1.00x",generalDescription:"Use optimal codes based on individual character frequencies. We estimate its compression rate by computing the entropy of the frequency distribution. ",specificDescription:d("Best code",t.filename,o)},{algorithm:"ZIP (zlib)",bits:n.zip_bits||c,ratio:n.zip_ratio?"".concat(n.zip_ratio,"x"):"1.00x",generalDescription:"Standard dictionary-based compression algorithm",specificDescription:d("ZIP (zlib)",t.filename,o)},{algorithm:"LLM (GPT-2)",bits:n.gpt2_bits||c,ratio:n.gpt2_ratio?"".concat(n.gpt2_ratio,"x"):"1.00x",generalDescription:"Use language model for next token prediction. We estimate the compression rate by computing the cross-entropy of the net on the text. GPT-2 = Good old LLM",specificDescription:d("LLM (GPT-2)",t.filename,o)},{algorithm:"LLM (Llama 4)",bits:n.llama_bits||c,ratio:n.llama_ratio?"".concat(n.llama_ratio,"x"):"1.00x",generalDescription:"Use language model for next token prediction. We estimate the compression rate by computing the cross-entropy of the net on the text. Llama 4 = not too far behind state-of-the-art as of 2025",specificDescription:d("LLM (Llama 4)",t.filename,o)}]};i.push(x)}catch(e){}t(i);try{let t=await fetch("".concat(e,"/compression_experiments/llm_compression_summary.json"));if(t.ok){let e=await t.json();g(e)}}catch(e){console.warn("Failed to load LLM progression data:",e)}d(!1)}catch(e){console.error("Failed to load compression data:",e),m(e instanceof Error?e.message:"Failed to load compression data"),d(!1)}})()},[]);let C=e=>e>=8e3?"".concat((e/8e3).toFixed(1),"KB"):"".concat(e," bits"),S=(e,t,s)=>{let a=Math.log10(t);return 25+(Math.log10(e)-a)/(Math.log10(s)-a)*75},F=()=>{let t=1;return e.forEach(e=>{e.results.forEach(e=>{let s=parseFloat(e.ratio.replace("x",""));s>t&&(t=s)})}),t},E=(e,t)=>{let s=[],a=1;for(;a<=t;)s.push(a),a*=2;let r=0;for(let t=0;t<s.length-1;t++)if(e>=s[t]&&e<s[t+1]){let a=(e-s[t])/(s[t+1]-s[t]);r=t+a;break}return e>=s[s.length-1]&&(r=s.length-1),Math.max(10,Math.min(90,90-80*(r/(s.length-1))))},A=(e,t,s,a,r)=>h&&void 0!==a&&void 0!==r?E(a,r):S(e,t,s),L=e=>e<25?"#22c55e":e<50?"#84cc16":e<75?"#eab308":e<90?"#f97316":"#ef4444",D=(e,t)=>{let s=[],a=t/e,r=[];for(let r of a<=3?[1.2,1.5,1.8,2,2.5,3]:a<=10?[1.5,2,3,4,5,6,8,10]:a<=50?[2,5,10,15,20,30,40,50]:a<=200?[5,10,20,50,100,150,200]:[10,25,50,100,200,300,500]){let a=t/r;if(a>=.9*e&&a<=t){let l;let i=S(a,e,t);l=r<10&&r%1!=0?"".concat(r.toFixed(1),"x"):"".concat(Math.round(r),"x"),s.push({ratio:l,position:i})}}if(s.length>6){let e=[];for(let t=0;t<s.length;t+=Math.ceil(s.length/5))e.push(s[t]);return e}return s},z=e=>{let t=[],s=[],a=1;for(;a<=e;)s.push(a),a*=2;return s.forEach((e,a)=>{let r=90-a/(s.length-1)*80;t.push({ratio:1===e?"1x":"".concat(e,"x"),position:r})}),t},P=(e,t,s)=>h&&void 0!==s?z(s):D(e,t),T=e=>{let{text:t}=e,s=t.split(/(\$[^$]+\$)/g);return(0,a.jsx)(a.Fragment,{children:s.map((e,t)=>{if(e.startsWith("$")&&e.endsWith("$")){let s=e.slice(1,-1);return(0,a.jsx)(n.A,{math:s,displayMode:!1},t)}return(0,a.jsx)("span",{children:e},t)})})},W=(e,t)=>{if(!p||!t)return null;let s={"LLM (GPT-2)":"gpt-2","LLM (Llama 4)":"llama-4"}[e];if(!s||!p[s])return null;let a=t.replace(/\.[^/.]+$/,""),r=p[s][a];return r&&r.dataPoints?{data:r.dataPoints,modelName:r.modelName,experimentName:r.name}:null},B=async e=>{try{console.log("Calling GPT-2 API with text:",e.substring(0,50)+"...");let t=e.length;t>5e3?M("Running GPT-2 compression, this should take <1 min for <10KB files..."):t>1e3?M("Running GPT-2 compression, this takes about a minute..."):M("Running GPT-2 compression...");let s=Math.random().toString(36).substring(2),a=await fetch("https://vaclavrozhon-probabilistic-lenses-widgets.hf.space/queue/join",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:[e],event_data:null,fn_index:0,session_hash:s})});if(!a.ok)throw Error("Queue join failed: ".concat(a.status));return new Promise((e,t)=>{let a=new EventSource("https://vaclavrozhon-probabilistic-lenses-widgets.hf.space/queue/data?session_hash=".concat(s)),r=setTimeout(()=>{a.close(),M(""),t(Error("GPT-2 processing timeout"))},12e4);a.onmessage=t=>{try{let s=JSON.parse(t.data);if("process_completed"===s.msg){if(clearTimeout(r),a.close(),M(""),console.log("Full API response:",JSON.stringify(s,null,2)),s.output&&s.output.data){let t;let a=s.output.data[0];if(console.log("Raw data from API:",a),"string"==typeof a)try{t=JSON.parse(a)}catch(t){console.error("Failed to parse JSON:",t,"Raw:",a),e(null);return}else t=a;t.error?(console.error("GPT-2 compression failed:",t.error),e(null)):t.algorithm&&t.bits&&t.ratio?e({algorithm:t.algorithm,bits:t.bits,ratio:t.ratio,compressionProgression:t.compression_progression||[]}):(console.error("Invalid data format:",t),e(null))}else console.log("data.output:",JSON.stringify(s.output,null,2)),console.error("No output data - full response:",JSON.stringify(s,null,2)),e(null)}}catch(e){}},a.onerror=()=>{clearTimeout(r),a.close(),M(""),e(null)}})}catch(e){return console.error("Failed to call GPT-2 API:",e),M(""),null}},I=async e=>{let t=[];t.push({algorithm:"Baseline",bits:8*e.length,ratio:"1.00x",generalDescription:"Just store each character as 8 bits in memory, using ASCII encoding.",specificDescription:""});let s={};for(let t of e)s[t]=(s[t]||0)+1;let a=0,r=e.length;for(let e of Object.values(s)){let t=e/r;t>0&&(a-=t*Math.log2(t))}let l=a*r;t.push({algorithm:"Best code",bits:Math.round(l),ratio:"".concat((8*r/l).toFixed(2),"x"),generalDescription:"Use optimal codes based on individual character frequencies. We estimate its compression rate by computing the entropy of the frequency distribution.",specificDescription:"Theoretical optimum based on character frequencies in your text"});try{let s=new CompressionStream("gzip"),a=s.writable.getWriter(),r=s.readable.getReader();a.write(new TextEncoder().encode(e)),a.close();let l=[],i=!1;for(;!i;){let{value:e,done:t}=await r.read();i=t,e&&l.push(e)}let n=l.reduce((e,t)=>e+t.length,0),o=8*n,c=8*e.length/o;t.push({algorithm:"ZIP (gzip)",bits:o,ratio:"".concat(c.toFixed(2),"x"),generalDescription:"Standard dictionary-based compression algorithm",specificDescription:"Browser-native gzip compression"})}catch(e){console.error("Gzip compression failed:",e)}return t},R=async()=>{let e=f.trim();if(!e){j([{algorithm:"Baseline",bits:0,ratio:"N/A",generalDescription:"Empty text requires 0 bits to store.",specificDescription:"No characters to compress."}]);return}N(!0);try{let t=await I(e);j(t);let s=await B(e);if(s){let e={algorithm:s.algorithm,bits:s.bits,ratio:s.ratio,generalDescription:"Use language model for next token prediction. We estimate the compression rate by computing the cross-entropy of the net on the text.",specificDescription:"Actual GPT-2 compression measurement on your text",compressionProgression:s.compressionProgression};j(t=>[...t||[],e])}}catch(e){console.error("Compression failed:",e)}finally{N(!1)}};return c?(0,a.jsx)("div",{className:"compression-widget bg-white border border-gray-200 rounded-lg p-6 my-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-6"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[...Array(6)].map((e,t)=>(0,a.jsx)("div",{className:"h-20 bg-gray-200 rounded"},t))})]})}):x?(0,a.jsx)("div",{className:"compression-widget bg-white border border-gray-200 rounded-lg p-6 my-6",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDE14"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Sorry!"}),(0,a.jsx)("p",{className:"text-gray-500",children:"The compression data couldn't be loaded right now."})]})}):c||x||0!==e.length?(0,a.jsxs)("div",{className:"compression-widget bg-white border border-gray-200 rounded-lg p-4 sm:p-6 my-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:"Text Compression Explorer"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm sm:text-base",children:"Explore how different compression algorithms perform on various types of text. Try to guess in advance!"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Scale:"}),(0,a.jsx)("button",{onClick:()=>u(!h),className:"px-3 py-2 text-sm border rounded transition-colors min-h-[44px] ".concat(h?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:h?"Fixed Scale":"Adaptive Scale"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-6",children:e.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>{o(e),k(!1)},className:"p-4 text-left border rounded-lg transition-all min-h-[60px] ".concat((null==s?void 0:s.name)!==e.name||w?"border-gray-200 hover:border-gray-300 hover:bg-gray-50":"border-blue-500 bg-blue-50"),children:[(0,a.jsx)("div",{className:"font-medium text-sm sm:text-base",children:e.name}),(0,a.jsx)("div",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:e.description})]},t))}),(0,a.jsx)("div",{className:"flex justify-center mb-6",children:(0,a.jsxs)("button",{onClick:()=>{k(!0),o(null)},className:"px-6 py-4 text-center border-2 border-dashed rounded-lg transition-all min-h-[60px] ".concat(w?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-blue-300 hover:bg-blue-50 text-gray-700"),children:[(0,a.jsx)("div",{className:"font-medium text-base",children:"\uD83D\uDCDD Your Text"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Compress your own text using GPT-2"})]})}),s&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[(0,a.jsxs)("h4",{className:"font-medium mb-2",children:["Sample Text: ",s.name]}),(0,a.jsx)("div",{className:"text-xs sm:text-sm font-mono bg-white p-3 rounded border overflow-y-auto break-all",style:{height:"6rem",lineHeight:"1.2rem",wordWrap:"break-word",whiteSpace:"pre-wrap"},children:s.text}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["Total length: ",s.text.length," characters"]})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Compression Results:"}),(()=>{let e=Math.max(...s.results.map(e=>e.bits)),t=Math.min(...s.results.map(e=>e.bits)),r=h?F():void 0,n=P(t,e,r);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)("div",{className:"h-2 rounded-full relative",style:{background:h?"linear-gradient(to right, #ef4444 0%, #f97316 20%, #eab308 40%, #84cc16 60%, #22c55e 80%, #22c55e 100%)":"linear-gradient(to right, #22c55e 0%, #22c55e 25%, #84cc16 50%, #eab308 75%, #f97316 90%, #ef4444 100%)"},children:n.map((e,t)=>(0,a.jsx)("div",{className:"absolute top-0 h-2 w-px bg-gray-600",style:{left:"".concat(e.position,"%")},children:(0,a.jsx)("span",{className:"absolute -top-5 text-xs text-gray-600 transform -translate-x-1/2",children:e.ratio})},t))}),(0,a.jsx)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Worse compression"}),(0,a.jsx)("span",{children:"Better compression"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Better compression"}),(0,a.jsx)("span",{children:"Worse compression"})]})})]}),(0,a.jsx)("div",{className:"space-y-3",children:s.results.map((n,o)=>{let c=parseFloat(n.ratio.replace("x","")),d=A(n.bits,t,e,c,r),x=L(d);return(0,a.jsxs)(l.bL,{openDelay:100,closeDelay:300,children:[(0,a.jsx)(l.l9,{asChild:!0,children:(0,a.jsxs)("div",{className:"relative cursor-pointer",children:[(0,a.jsx)("div",{className:"relative h-12 rounded transition-all hover:opacity-90",style:{width:"".concat(d,"%"),backgroundColor:x},children:(0,a.jsx)("div",{className:"absolute inset-0 flex items-center px-3",children:(0,a.jsx)("span",{className:"text-white font-medium text-sm",children:n.algorithm})})}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[C(n.bits)," (",n.ratio,")"]})]})}),(0,a.jsx)(l.ZL,{children:(0,a.jsx)(l.UC,{className:"z-50 bg-white border border-gray-200 rounded-md shadow-lg p-4 max-w-xl",sideOffset:5,children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("div",{className:"font-medium mb-2 text-gray-900",children:[n.algorithm," Algorithm"]}),(0,a.jsxs)("div",{className:"mb-2 text-gray-700",children:[(0,a.jsx)("strong",{children:"How it works:"})," ",n.generalDescription]}),n.specificDescription&&(0,a.jsxs)("div",{className:"text-gray-700 mb-3",children:[(0,a.jsx)("strong",{children:"For this text:"})," ",(0,a.jsx)(T,{text:n.specificDescription})]}),n.algorithm.startsWith("LLM")&&(()=>{let e=W(n.algorithm,(null==s?void 0:s.filename)||"");return e?(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"Compression progression through text:"}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(i.default,{data:e.data,modelName:e.modelName,experimentName:e.experimentName,height:160})})]}):null})()]})})})]},o)})})]})})()]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,a.jsx)("strong",{children:"Hover over bars"})," to see how each algorithm works. Bar length shows compressed size on a logarithmic scale."]})})]}),w&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Your Text"}),(0,a.jsx)("textarea",{value:f,onChange:e=>b(e.target.value),placeholder:"Paste your text here to see how well different algorithms can compress it...",className:"w-full h-32 p-3 border border-gray-200 rounded-md text-sm font-mono resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Length: ",f.length," characters"]}),(0,a.jsx)("button",{onClick:R,disabled:!f.trim()||v,className:"px-4 py-2 bg-blue-500 text-white rounded-md text-sm hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px]",children:v?"Compressing...":"Run Compression"})]}),_&&(0,a.jsx)("div",{className:"mt-2 text-sm text-blue-600 italic",children:_})]}),y&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Compression Results:"}),(()=>{let e=Math.max(...y.map(e=>e.bits)),t=Math.min(...y.map(e=>e.bits)),s=h?F():void 0,r=P(t,e,s);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)("div",{className:"h-2 rounded-full relative",style:{background:h?"linear-gradient(to right, #ef4444 0%, #f97316 20%, #eab308 40%, #84cc16 60%, #22c55e 80%, #22c55e 100%)":"linear-gradient(to right, #22c55e 0%, #22c55e 25%, #84cc16 50%, #eab308 75%, #f97316 90%, #ef4444 100%)"},children:r.map((e,t)=>(0,a.jsx)("div",{className:"absolute top-0 h-2 w-px bg-gray-600",style:{left:"".concat(e.position,"%")},children:(0,a.jsx)("span",{className:"absolute -top-5 text-xs text-gray-600 transform -translate-x-1/2",children:e.ratio})},t))}),(0,a.jsx)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Worse compression"}),(0,a.jsx)("span",{children:"Better compression"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Better compression"}),(0,a.jsx)("span",{children:"Worse compression"})]})})]}),(0,a.jsx)("div",{className:"space-y-3",children:y.map((r,n)=>{let o=parseFloat(r.ratio.replace("x",""))||1,c=A(r.bits,t,e,o,s),d=L(c);return(0,a.jsxs)(l.bL,{openDelay:100,closeDelay:300,children:[(0,a.jsx)(l.l9,{asChild:!0,children:(0,a.jsxs)("div",{className:"relative cursor-pointer",children:[(0,a.jsx)("div",{className:"relative h-12 rounded transition-all hover:opacity-90",style:{width:"".concat(c,"%"),backgroundColor:d},children:(0,a.jsx)("div",{className:"absolute inset-0 flex items-center px-3",children:(0,a.jsx)("span",{className:"text-white font-medium text-sm",children:r.algorithm})})}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[C(r.bits)," (",r.ratio,")"]})]})}),(0,a.jsx)(l.ZL,{children:(0,a.jsx)(l.UC,{className:"z-50 bg-white border border-gray-200 rounded-md shadow-lg p-4 max-w-xl",sideOffset:5,children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("div",{className:"font-medium mb-2 text-gray-900",children:[r.algorithm," Algorithm"]}),(0,a.jsxs)("div",{className:"mb-2 text-gray-700",children:[(0,a.jsx)("strong",{children:"How it works:"})," ",r.generalDescription]}),r.specificDescription&&!["Best code","ZIP (gzip)"].includes(r.algorithm)&&(0,a.jsxs)("div",{className:"text-gray-700 mb-3",children:[(0,a.jsx)("strong",{children:"For this text:"})," ",(0,a.jsx)(T,{text:r.specificDescription})]}),r.algorithm.startsWith("LLM")&&r.compressionProgression&&r.compressionProgression.length>0&&(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"Compression progression through text:"}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(i.default,{data:r.compressionProgression.filter(e=>void 0!==e.progressPercent&&void 0!==e.bitsPerChar&&!isNaN(e.progressPercent)&&!isNaN(e.bitsPerChar)),modelName:"GPT-2",experimentName:"Your Text",height:160})})]})]})})})]},n)})})]})})()]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:(0,a.jsxs)("p",{className:"widget-explanation",children:[(0,a.jsx)("strong",{children:"Enter your text above"}),' and click "Run Compression" to see how different algorithms perform. GPT-2 processing may take 1-2 minutes for longer texts.']})})]})]}):(0,a.jsx)("div",{className:"compression-widget bg-white border border-gray-200 rounded-lg p-6 my-6",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDE14"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Sorry!"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No compression experiments are available to display."})]})})}},40612:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081),r=s(82149);let l=()=>{let e="Language models can compress text by predicting the next token",[t,s]=(0,r.useState)(e),[l,i]=(0,r.useState)(null),[n,o]=(0,r.useState)(0),[c,d]=(0,r.useState)(!1),[x,m]=(0,r.useState)(null),h="https://vaclavrozhon-probabilistic-lenses-widgets.hf.space",[u,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("/problens-web","/data/compression_visualization/default.json"));if(e.ok){let t=await e.json();p(t)}}catch(e){console.error("Failed to load default compression data:",e)}})()},[]);let g=async e=>{let t=Math.random().toString(36).substring(2,12);try{let s=await fetch("".concat(h,"/queue/join"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:[e],event_data:null,fn_index:7,session_hash:t})});if(!s.ok)throw Error("Queue join failed: ".concat(s.status));return new Promise((e,s)=>{let a=new EventSource("".concat(h,"/queue/data?session_hash=").concat(t)),r=setTimeout(()=>{a.close(),s(Error("API processing timeout"))},3e4);a.onmessage=t=>{try{let l=JSON.parse(t.data);if("process_completed"===l.msg){if(clearTimeout(r),a.close(),console.log("GPT2 Full API response:",JSON.stringify(l,null,2)),l.output&&l.output.data){let t;let a=l.output.data[0];if(console.log("GPT2 Raw data from API:",a),"string"==typeof a)try{t=JSON.parse(a)}catch(e){console.error("GPT2 Failed to parse JSON:",e,"Raw:",a),s(Error("Failed to parse response"));return}else t=a;e(t)}else console.log("GPT2 data.output:",JSON.stringify(l.output,null,2)),console.error("GPT2 No output data - full response:",JSON.stringify(l,null,2)),s(Error("No output data"))}else"process_errored"===l.msg&&(clearTimeout(r),a.close(),console.error("GPT2 API processing error:",JSON.stringify(l,null,2)),s(Error("API processing error")))}catch(e){}},a.onerror=e=>{clearTimeout(r),a.close(),s(Error("EventSource error"))}})}catch(e){throw console.error("API call failed:",e),Error("Failed to connect to compression API: ".concat(e))}},f=async()=>{if(!t.trim()||t.length>500){m("Text must be between 1 and 500 characters");return}d(!0),m(null),o(0);try{if(t.trim()===e&&u)await new Promise(e=>setTimeout(e,300)),i(u),m(null);else{let e=await g(t.trim());e&&e.success?(i(e),m(null)):(m((null==e?void 0:e.error)||"Compression failed"),i(null))}}catch(e){m(e instanceof Error?e.message:"Unknown error occurred"),i(null)}finally{d(!1)}},b=null==l?void 0:l.steps[n];return(0,a.jsxs)("div",{className:"p-6 bg-gray-50 rounded-lg space-y-6 max-w-4xl mx-auto",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800 text-center",children:"GPT2 Compression Visualization"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("input",{type:"text",value:t,onChange:e=>s(e.target.value),placeholder:"Enter text to compress (max 500 chars)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:500,disabled:c}),(0,a.jsx)("button",{onClick:f,disabled:c||!t.trim(),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:c?"Running...":"RUN"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[t.length,"/500 characters"]})]}),x&&(0,a.jsx)("div",{className:"p-3 bg-red-100 border border-red-300 rounded-md text-red-700",children:x}),l&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Compression Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Original:"}),(0,a.jsxs)("div",{className:"font-mono",children:[l.original_text.length,"\xd78=",l.original_bits," bits"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Compressed:"}),(0,a.jsxs)("div",{className:"font-mono",children:[l.total_bits," bits"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Bits per letter:"}),(0,a.jsx)("div",{className:"font-mono",children:(l.total_bits/l.original_text.length).toFixed(2)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Tokens:"}),(0,a.jsx)("div",{className:"font-mono",children:l.tokens.length})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{o(0)},disabled:0===n,className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Beginning"}),(0,a.jsx)("button",{onClick:()=>{n>0&&o(n-1)},disabled:0===n,className:"px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"← Step"}),(0,a.jsx)("button",{onClick:()=>{l&&n<l.steps.length-1&&o(n+1)},disabled:n===l.steps.length-1,className:"px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Step →"}),(0,a.jsx)("button",{onClick:()=>{l&&o(l.steps.length-1)},disabled:n===l.steps.length-1,className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"End"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Tokenization"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:l.tokens.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm font-mono border ".concat(t<=n?t===n?"bg-blue-200 border-blue-400":"bg-green-100 border-green-300":"bg-gray-100 border-gray-300"),children:e.replace(/ /g,"\xb7")},t))}),(0,a.jsxs)("div",{className:"border-t pt-3",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Shannon Codes:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mb-2",children:l.tokens.map((e,t)=>(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"px-3 py-2 rounded text-xs border min-w-[40px] ".concat(t<=n?t===n?"bg-blue-200 border-blue-400":"bg-green-100 border-green-300":"bg-gray-100 border-gray-300"),children:t<=n?"".concat(l.steps[t].shannon_code_length," bits"):"? bits"})},t))})]})]}),b&&(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Predictions (sorted by probability):"}),(0,a.jsx)("div",{className:"grid gap-2",children:(()=>{let e=e=>{let t=100*e;return t>=.1?t.toFixed(1)+"%":t>=.01?t.toFixed(2)+"%":t>=.001?t.toFixed(3)+"%":t.toFixed(6)+"%"};return[{token:b.token,probability:b.actual_probability,isActual:!0},...b.top_predictions.map(e=>({...e,isActual:!1}))].filter((e,t,s)=>s.findIndex(t=>t.token===e.token)===t).sort((e,t)=>t.probability-e.probability).slice(0,6).map((t,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center px-3 py-2 rounded text-sm ".concat(t.isActual?"bg-blue-100 border border-blue-300 font-semibold":"bg-gray-50 border border-gray-200"),children:[(0,a.jsxs)("span",{className:"font-mono",children:[t.token.replace(/ /g,"\xb7"),t.isActual?" (actual)":""]}),(0,a.jsx)("span",{className:"font-mono",children:e(t.probability)})]},s))})()})]}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Length = ⌈log₂(1/",(()=>{let e=b.actual_probability;return e>=.1?e.toFixed(2):e>=.01?e.toFixed(3):e>=.001?e.toFixed(4):e.toExponential(1)})(),")⌉ = ",Math.ceil(-Math.log2(b.actual_probability))," bits"]})})]})]})]})}},41094:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var a=s(58081),r=s(67426),l=s.n(r),i=s(82149),n=s(28542),o=s.n(n);let c=()=>{let e=2/3,[t,s]=(0,i.useState)(1),[r,n]=(0,i.useState)(()=>Array.from({length:15},(e,t)=>({index:t+1,weight:.06666666666666667}))),[c,d]=(0,i.useState)(null),[x,m]=(0,i.useState)(!1),[h,u]=(0,i.useState)(null),[p,g]=(0,i.useState)(0),[f,b]=(0,i.useState)(!1),[y,j]=(0,i.useState)(!1),v=(0,i.useRef)(null),N=()=>{n(Array.from({length:15},(e,t)=>({index:t+1,weight:.06666666666666667}))),d(null),m(!1),u(null),g(0),b(!1),j(!1),v.current&&clearTimeout(v.current)},w=e=>{let t=0;for(let s=0;s<e.length;s++)if((t+=e[s].weight)>=.5)return s;return Math.floor(e.length/2)};(0,i.useEffect)(()=>()=>{v.current&&clearTimeout(v.current)},[]);let k=Math.max(...r.map(e=>e.weight));return(0,a.jsxs)("div",{className:"jsx-330c10372a116a4b "+(o().widget||""),children:[(0,a.jsx)("h3",{className:"jsx-330c10372a116a4b",children:"Noisy Binary Search Visualization"}),(0,a.jsx)("div",{style:{marginBottom:"20px",textAlign:"center"},className:"jsx-330c10372a116a4b",children:(0,a.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:"10px",padding:"10px 20px",backgroundColor:"#f0f0f0",borderRadius:"8px",border:"2px solid #e0e0e0"},className:"jsx-330c10372a116a4b",children:[(0,a.jsx)("span",{style:{fontSize:"16px",fontWeight:"500"},className:"jsx-330c10372a116a4b",children:"Search for element:"}),(0,a.jsx)("input",{type:"number",min:"1",max:15,value:t,onChange:e=>{let t=parseInt(e.target.value);t>=1&&t<=15&&(s(t),N())},style:{width:"60px",padding:"5px 10px",fontSize:"16px",fontWeight:"bold",border:"2px solid #2196F3",borderRadius:"4px",textAlign:"center",backgroundColor:"white",cursor:"pointer"},className:"jsx-330c10372a116a4b"}),(0,a.jsxs)("span",{style:{fontSize:"14px",color:"#666"},className:"jsx-330c10372a116a4b",children:["(1-",15,")"]})]})}),(0,a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"center",marginBottom:"20px",height:"".concat(250,"px"),position:"relative"},className:"jsx-330c10372a116a4b",children:r.map((e,s)=>{let r=e.weight/k*200,l=s===c,i=e.index===t,n=x&&i;return(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"0 5px",position:"relative"},className:"jsx-330c10372a116a4b",children:[(0,a.jsx)("div",{style:{width:"30px",height:"".concat(r,"px"),backgroundColor:n?"#4CAF50":l?"#FF9800":i?"#2196F3":"#9E9E9E",transition:y?"all 0.5s ease":"all 0.3s ease",borderRadius:"2px",position:"relative"},className:"jsx-330c10372a116a4b",children:l&&!x&&f&&(0,a.jsx)("div",{style:{position:"absolute",top:"-25px",left:"50%",transform:"translateX(-50%)",fontSize:"20px",animation:"fadeIn 0.3s ease-in"},className:"jsx-330c10372a116a4b",children:"↓"})}),(0,a.jsx)("div",{style:{marginTop:"5px",fontSize:"12px",fontWeight:i?"bold":"normal"},className:"jsx-330c10372a116a4b",children:e.index}),(0,a.jsxs)("div",{style:{fontSize:"10px",color:"#666",marginTop:"2px"},className:"jsx-330c10372a116a4b",children:[(100*e.weight).toFixed(1),"%"]})]},e.index)})}),h&&(0,a.jsx)("div",{style:{marginBottom:"15px",textAlign:"center",fontSize:"16px",fontWeight:"bold",color:x?"#4CAF50":"#333"},className:"jsx-330c10372a116a4b",children:h}),(0,a.jsxs)("div",{style:{marginBottom:"15px",textAlign:"center"},className:"jsx-330c10372a116a4b",children:["Steps: ",p]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"center"},className:"jsx-330c10372a116a4b",children:[(0,a.jsx)("button",{onClick:()=>{if(x||f||y)return;let s=w(r),l=r[s];d(s),g(e=>e+1),b(!0),v.current=setTimeout(()=>{if(l.index===t){m(!0),u("Found at position ".concat(l.index,"!"));return}let i=Math.random()<e,o=l.index<t,c=i?o:!o;c?u((0,a.jsxs)("span",{children:[l.index," < ",t,(0,a.jsxs)("span",{style:{color:i?"#4CAF50":"#f44336",fontWeight:"bold"},children:[" ","(",i?"correct":"noisy!",")"]})]})):u((0,a.jsxs)("span",{children:[l.index," > ",t,(0,a.jsxs)("span",{style:{color:i?"#4CAF50":"#f44336",fontWeight:"bold"},children:[" ","(",i?"correct":"noisy!",")"]})]})),j(!0),v.current=setTimeout(()=>{let e=r.map((e,t)=>{let a=c?t>s:t<s;return{...e,weight:a?2*e.weight:e.weight}}),t=e.reduce((e,t)=>e+t.weight,0);n(e.map(e=>({...e,weight:e.weight/t}))),b(!1),j(!1)},500)},500)},disabled:x||f||y,style:{padding:"8px 16px",backgroundColor:x||f||y?"#ccc":"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:x||f||y?"default":"pointer"},className:"jsx-330c10372a116a4b",children:"Next Step"}),(0,a.jsx)("button",{onClick:N,style:{padding:"8px 16px",backgroundColor:"#757575",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},className:"jsx-330c10372a116a4b",children:"Reset"})]}),(0,a.jsx)(l(),{id:"330c10372a116a4b",children:"@-webkit-keyframes fadeIn{from{opacity:0;-webkit-transform:translatex(-50%)translatey(-5px);transform:translatex(-50%)translatey(-5px)}to{opacity:1;-webkit-transform:translatex(-50%)translatey(0);transform:translatex(-50%)translatey(0)}}@-moz-keyframes fadeIn{from{opacity:0;-moz-transform:translatex(-50%)translatey(-5px);transform:translatex(-50%)translatey(-5px)}to{opacity:1;-moz-transform:translatex(-50%)translatey(0);transform:translatex(-50%)translatey(0)}}@-o-keyframes fadeIn{from{opacity:0;-o-transform:translatex(-50%)translatey(-5px);transform:translatex(-50%)translatey(-5px)}to{opacity:1;-o-transform:translatex(-50%)translatey(0);transform:translatex(-50%)translatey(0)}}@keyframes fadeIn{from{opacity:0;-webkit-transform:translatex(-50%)translatey(-5px);-moz-transform:translatex(-50%)translatey(-5px);-o-transform:translatex(-50%)translatey(-5px);transform:translatex(-50%)translatey(-5px)}to{opacity:1;-webkit-transform:translatex(-50%)translatey(0);-moz-transform:translatex(-50%)translatey(0);-o-transform:translatex(-50%)translatey(0);transform:translatex(-50%)translatey(0)}}"})]})}},44151:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(58081),r=s(82149),l=s(10574);function i(){let[e,t]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!1);(0,r.useEffect)(()=>{i(window.matchMedia&&window.matchMedia("(pointer: coarse)").matches||"ontouchstart"in window||navigator.maxTouchPoints>0)},[]);let n=Array.from({length:100},(e,t)=>({x:t/99*200+50,y:140})),o=Array.from({length:100},(e,t)=>{let s=t/99,a=Math.exp(-((s-.5)*(s-.5))/.0072)/(.06*Math.sqrt(2*Math.PI))/(1/(.06*Math.sqrt(2*Math.PI)));return{x:200*s+50,y:160-90*a}}),c=e=>e.reduce((e,t,s)=>"".concat(e," ").concat(0===s?"M":"L"," ").concat(t.x," ").concat(t.y),""),d=t=>{let{pColor:s,qColor:r,pLabel:i,qLabel:d,title:x,resultText:m,sampleLineX:h,sampleLineLabel:u,isPeakyTrue:p}=t;return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 flex-1",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-1 text-center",children:(0,a.jsx)(l.A,{math:x})}),(0,a.jsxs)("svg",{width:"300",height:"180",viewBox:"0 0 300 180",className:"w-full",children:[(0,a.jsx)("path",{d:c(n),fill:"none",stroke:p?"#dc2626":"#2563eb",strokeWidth:"3",strokeLinecap:"round"}),(0,a.jsx)("path",{d:c(o),fill:"none",stroke:p?"#2563eb":"#dc2626",strokeWidth:"3",strokeLinecap:"round"}),(0,a.jsx)("line",{x1:"50",y1:"160",x2:"250",y2:"160",stroke:"#6b7280",strokeWidth:"1"}),(0,a.jsx)("g",{transform:"translate(70, 112)",children:(0,a.jsx)("foreignObject",{width:"100",height:"30",children:(0,a.jsx)(l.A,{math:"p_{\\text{broad}}"})})}),(0,a.jsx)("g",{transform:"translate(100, 50)",children:(0,a.jsx)("foreignObject",{width:"100",height:"30",children:(0,a.jsx)(l.A,{math:"p_{\\text{peaky}}"})})}),e&&h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("line",{x1:h,y1:"40",x2:h,y2:"160",stroke:"#6b7280",strokeWidth:"2",strokeDasharray:"5,5"}),u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("g",{transform:"translate(".concat(h-70,", 5)"),children:(0,a.jsx)("foreignObject",{width:"180",height:"70",style:{overflow:"visible"},children:(0,a.jsx)("div",{className:"text-lg text-gray-700 text-center",children:(0,a.jsx)(l.A,{math:u})})})}),(0,a.jsx)("g",{transform:"translate(".concat(h-10,", 165)"),children:(0,a.jsx)("foreignObject",{width:"20",height:"20",children:(0,a.jsx)("div",{className:"text-sm text-gray-600 text-center",children:(0,a.jsx)(l.A,{math:"x"})})})})]})]})]}),e&&m&&(0,a.jsx)("div",{className:"mt-3 text-center",children:(0,a.jsx)("div",{className:"text-sm font-medium px-3 py-2 rounded ".concat(m.includes("moderate")?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"),children:m})})]})};return(0,a.jsxs)("div",{className:"p-4 sm:p-6 bg-gray-50 rounded-lg space-y-4 max-w-4xl mx-auto",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-center text-gray-800",children:"KL Divergence Asymmetry"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 text-center",children:'KL divergence between a broad and a peaky distribution. The blue distribution is the "truth", the red one the "model".'}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",onMouseEnter:()=>{s||t(!0)},onMouseLeave:()=>{s||t(!1)},onClick:()=>{s&&t(e=>!e)},style:{cursor:s?"pointer":"default"},children:[(0,a.jsx)(d,{pColor:"#2563eb",qColor:"#dc2626",pLabel:"p",qLabel:"q",title:"D(p_{\\text{peaky}}, p_{\\text{broad}})",resultText:e?"KL is moderate":void 0,sampleLineX:e?160:void 0,sampleLineLabel:e?"\\frac{p_{\\text{peaky}}(x)}{p_{\\text{broad}}(x)} \\text{ is moderate}":void 0,isPeakyTrue:!0}),(0,a.jsx)(d,{pColor:"#2563eb",qColor:"#dc2626",pLabel:"p",qLabel:"q",title:"D(p_{\\text{broad}}, p_{\\text{peaky}})",resultText:e?"KL is large":void 0,sampleLineX:e?200:void 0,sampleLineLabel:e?"\\frac{p_{\\text{broad}}(x)}{p_{\\text{peaky}}(x)} \\text{ is large}":void 0,isPeakyTrue:!1})]}),s&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("button",{onClick:()=>t(!e),className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:e?"Hide Explanation":"Tap to reveal explanation"})}),e&&(0,a.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:(0,a.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"Why?"})," Two vertical lines show typical samples from ",(0,a.jsx)(l.A,{math:"p_{\\text{peaky}}"})," and"," ",(0,a.jsx)(l.A,{math:"p_{\\text{broad}}"}),". On the left, ",(0,a.jsx)(l.A,{math:"p_{\\text{broad}}"})," doesn't know where the peak of ",(0,a.jsx)(l.A,{math:"p_{\\text{peaky}}"})," is, but it is spread out and covers the peak with reasonably-sized probability mass. The ratio ",(0,a.jsx)(l.A,{math:"p_{\\text{peaky}}(x) / p_{\\text{broad}}(x)"})," ","is never too large. ",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"On the right, ",(0,a.jsx)(l.A,{math:"p_{\\text{peaky}}"})," is concentrated at one place, and it doesn't try to cover elsewhere. Thus, its surprise on a typical sample from ",(0,a.jsx)(l.A,{math:"p_{\\text{broad}}"})," is really big."]})})]})}},44412:e=>{e.exports={footnote:"Footnotes_footnote__9N0Ba","footnote-link":"Footnotes_footnote-link__l83hx",footnotes:"Footnotes_footnotes__EnB8v","footnote-list":"Footnotes_footnote-list__bsD0z","footnote-item":"Footnotes_footnote-item__9PuST","footnote-tooltip":"Footnotes_footnote-tooltip__riri3",slideDownAndFade:"Footnotes_slideDownAndFade__aGoCS",slideUpAndFade:"Footnotes_slideUpAndFade__yhnsh","footnote-tooltip-arrow":"Footnotes_footnote-tooltip-arrow__NBpi0",backlink:"Footnotes_backlink__S99hM"}},44464:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Footnote:()=>d,Footnotes:()=>x,FootnotesProvider:()=>c});var a=s(58081),r=s(82149),l=s(11436),i=s(44412),n=s.n(i);let o=(0,r.createContext)(null);function c(e){let{children:t}=e,[s]=(0,r.useState)(()=>new Map),[l]=(0,r.useState)(()=>[]),i=(0,r.useRef)(0),n=(0,r.useRef)(0);return(0,a.jsx)(o.Provider,{value:{footnotes:s,footnoteOrder:l,registerFootnote:(e,t)=>{let a=++n.current;if(t){let r="footnote-".concat(t);return!s.has(r)&&e?(s.set(r,{content:e,mark:t,locations:[a]}),l.push(r)):s.has(r)&&s.get(r).locations.push(a),[r,a]}if(e){let t=++i.current,r="footnote-".concat(t);return s.has(r)||(s.set(r,{content:e,mark:t.toString(),locations:[a]}),l.push(r)),[r,a]}return["footnote-1",a]},autoMarkCounter:i,locationCounter:n},children:t})}function d(e){let{children:t,mark:s}=e,{footnotes:i,registerFootnote:c}=function(){let e=(0,r.useContext)(o);if(!e)throw Error("useFootnotes must be used within a FootnotesProvider");return e}(),d=(0,r.useRef)(s),x=(0,r.useRef)(void 0),m=(0,r.useRef)(void 0);if(!x.current){let[e,s]=c(t,d.current);x.current=e,m.current=s}let h=i.get(x.current);return h?(0,a.jsxs)(l.bL,{openDelay:100,closeDelay:300,children:[(0,a.jsx)(l.l9,{asChild:!0,children:(0,a.jsx)("sup",{id:"ref-".concat(x.current,"-").concat(m.current),className:n().footnote,tabIndex:0,role:"button",children:(0,a.jsx)("span",{className:n()["footnote-link"],children:h.mark})})}),(0,a.jsx)(l.ZL,{children:(0,a.jsx)(l.UC,{className:n()["footnote-tooltip"],sideOffset:5,children:t||h.content})})]}):null}function x(e){let{headerLevel:t=2}=e;return null}},45639:(e,t,s)=>{"use strict";s.d(t,{default:()=>x});var a=s(58081),r=s(82149),l=s(87687),i=s(5257);let n={1:{10:3.6,20:3.2,30:3.333,40:3.6,50:3.92,60:3.267,70:3.657,80:4.05,90:3.6,100:4,110:3.636,120:4.033,130:3.723,140:4.114,150:3.84,160:4.225,170:3.976,180:3.756,190:3.558,200:3.92},2:{10:9.222,20:8.579,30:8.655,40:9.308,50:9.204,60:9,70:9.203,80:9.354,90:9.202,100:9.485,110:9.128,120:9.168,130:9.14,140:9.23,150:9.255,160:9.025,170:9.107,180:9.045,190:8.989,200:9.302},3:{10:20,20:17.556,30:17.714,40:17.579,50:17.333,60:17.862,70:17.412,80:17.59,90:17.636,100:17.918,110:17.185,120:17.729,130:17.75,140:17.71,150:17.838,160:17.595,170:17.238,180:17.596,190:17.617,200:17.596},4:{10:27.286,20:31,30:31.667,40:30.892,50:31.638,60:31.421,70:31.627,80:31.26,90:31.253,100:31.495,110:31.318,120:31.65,130:31.362,140:31.526,150:31.177,160:31.637,170:31.802,180:31,190:31.61,200:31.467}},o=(e,t)=>{let s=n[e];if(!s)return 30;let a=Object.keys(s).map(Number).sort((e,t)=>e-t);if(s[t])return s[t];if(t<=a[0])return s[a[0]];if(t>=a[a.length-1])return s[a[a.length-1]];let r=a[0],l=a[1];for(let e=0;e<a.length-1;e++)if(a[e]<=t&&t<=a[e+1]){r=a[e],l=a[e+1];break}let i=s[r],o=s[l];return i+(t-r)/(l-r)*(o-i)},c={H:{10:10,20:10.333,30:9.667,40:9.727,50:9.727,60:9.462,70:9.737,80:9.588,90:9.667,100:9.48,110:9.467,120:9.37,130:9.375,140:9.452,150:9.375,160:9.486,170:9.638,180:9.419,190:9.419,200:9.52},T:{10:10,20:10.333,30:9.857,40:9.667,50:9.545,60:9.588,70:9.588,80:9.667,90:9.667,100:9.364,110:9.667,120:9.231,130:9.727,140:9.727,150:9.424,160:9.432,170:9.429,180:9.571,190:9.419,200:9.696}},d=(e,t)=>{let s=c[e];if(!s)return 15;let a=Object.keys(s).map(Number).sort((e,t)=>e-t);if(s[t])return s[t];if(t<=a[0])return s[a[0]];if(t>=a[a.length-1])return s[a[a.length-1]];let r=a[0],l=a[1];for(let e=0;e<a.length-1;e++)if(a[e]<=t&&t<=a[e+1]){r=a[e],l=a[e+1];break}let i=s[r],n=s[l];return i+(t-r)/(l-r)*(n-i)},x=()=>{let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(""),c=e=>{let t=[],s=Math.pow(2,e);for(let a=0;a<s;a++){let s=a.toString(2).padStart(e,"0").replace(/0/g,"H").replace(/1/g,"T");t.push(s)}return t},x=(e,t)=>{let s={};c(t).forEach(e=>s[e]=0);for(let a=0;a<=e.length-t;a++){let r=e.slice(a,a+t).join("");s.hasOwnProperty(r)&&s[r]++}return s},m=(e,t,s,a)=>{let r=0;for(let s in t)if(t[s]>0){let a=e[s]||0,l=t[s];r+=Math.pow(a-l,2)/l}return{chiSquare:r,threshold:o(s,a)}},h=(e,t)=>{if(0===e.length)return[];let s=[],a=0,r=null;for(let l of e)l===t?r===t?a++:(a=1,r=t):(r===t&&a>0&&(s.push(a),a=0),r=l);return r===t&&a>0&&s.push(a),s},u=(e,t)=>{let s=h(e,t);if(0===s.length)return{chiSquare:0,threshold:d(t,e.length),observedCounts:{},expectedCounts:{},runLengths:[]};let a={},r={};for(let e=1;e<=5;e++)a[5===e?"5+":e.toString()]=0;for(let e of s)e<=4?a[e.toString()]++:a["5+"]++;let l=s.length;for(let e=1;e<5;e++)r[e.toString()]=l*Math.pow(.5,e);r["5+"]=.0625*l;let i=0;for(let e=1;e<=5;e++){let t=5===e?"5+":e.toString(),s=a[t],l=r[t];l>0&&(i+=Math.pow(s-l,2)/l)}return{chiSquare:i,threshold:d(t,e.length),observedCounts:a,expectedCounts:r,runLengths:s}},p=(0,r.useMemo)(()=>{if(e.length<4)return[];let t=[];for(let s=1;s<=4;s++){let a=e.length-s+1;if(a<5)continue;let r=x(e,s),l=a/Math.pow(2,s),i={};c(s).forEach(e=>i[e]=l);let{chiSquare:n,threshold:o}=m(r,i,s,e.length);t.push({k:s,expectedCounts:i,observedCounts:r,chiSquare:n,threshold:o,isRandom:n<=o})}return t},[e]),g=(0,r.useMemo)(()=>{if(e.length<10)return[];let t=[];for(let s of["H","T"]){let{chiSquare:a,threshold:r,observedCounts:l,expectedCounts:i,runLengths:n}=u(e,s);t.push({runType:s,runLengths:n,observedCounts:l,expectedCounts:i,chiSquare:a,threshold:r,isRandom:a<=r})}return t},[e]),f=e=>{t(t=>{let s=[...t,e];return n(s.join("")),s})},b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,s=[];for(let t=0;t<e;t++)s.push(.5>Math.random()?"H":"T");t(e=>{let t=[...e,...s];return n(t.join("")),t})};return(0,a.jsx)(i.Kq,{children:(0,a.jsxs)("div",{className:"p-4 sm:p-6 bg-gray-50 rounded-lg space-y-4 sm:space-y-6 max-w-4xl mx-auto",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-center text-gray-800",children:"Coin Flip Randomness Tester"}),(0,a.jsx)("p",{className:"text-center text-gray-600",children:"Click coins to build a sequence, then see if it passes statistical tests for randomness"}),(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("button",{onClick:()=>f("H"),className:"flex flex-col items-center justify-center w-24 h-24 bg-white rounded-lg border-2 border-gray-300 hover:border-blue-400 transition-colors p-2",children:[(0,a.jsx)("img",{src:(0,l.O)("/images/coin_heads_big.png"),alt:"Heads",className:"w-20 h-20"}),(0,a.jsx)("span",{className:"text-xs font-medium -mt-1",children:"Heads (H)"})]}),(0,a.jsxs)("button",{onClick:()=>f("T"),className:"flex flex-col items-center justify-center w-24 h-24 bg-white rounded-lg border-2 border-gray-300 hover:border-blue-400 transition-colors p-2",children:[(0,a.jsx)("img",{src:(0,l.O)("/images/coin_tail_big.png"),alt:"Tails",className:"w-20 h-20"}),(0,a.jsx)("span",{className:"text-xs font-medium -mt-1",children:"Tails (T)"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("button",{onClick:()=>{t([]),n("")},className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors text-sm",children:"Reset"}),(0,a.jsx)("button",{onClick:()=>b(20),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors text-sm",children:"Random 20"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:["Current Sequence (",e.length," flips)"]}),(0,a.jsx)("div",{className:"min-h-[60px] p-3 bg-gray-50 rounded border-2 border-dashed border-gray-300",children:0===e.length?(0,a.jsx)("p",{className:"text-gray-500 text-center",children:"Click coins above to build your sequence"}):(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.map((e,t)=>(0,a.jsx)("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded text-sm font-bold ".concat("H"===e?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:e},t))})}),(0,a.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Alternatively, write text here:"}),(0,a.jsx)("input",{type:"text",value:s,onChange:e=>n(e.target.value),placeholder:"e.g., HHTHT",className:"flex-1 px-3 py-1 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("button",{onClick:()=>{let e=s.toUpperCase().replace(/[^HT]/g,"");e&&e.match(/^[HT]+$/)&&(t(e.split("").map(e=>e)),n(e))},className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors text-sm",children:"OK"})]})]}),(p.length>0||g.length>0)&&(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Randomness Tests"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.map((e,t)=>(0,a.jsxs)(i.bL,{children:[(0,a.jsx)(i.l9,{asChild:!0,children:(0,a.jsx)("div",{className:"border rounded-lg p-3 hover:bg-gray-50 transition-colors cursor-help",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("h5",{className:"text-sm font-semibold",children:[e.k,"-mer Test"]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(e.isRandom?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isRandom?"✓ PASS":"✗ FAIL"})]})})}),(0,a.jsx)(i.ZL,{children:(0,a.jsxs)(i.UC,{className:"bg-gray-800 text-white text-sm p-3 rounded shadow-lg max-w-md",sideOffset:5,children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"font-semibold",children:[e.k,"-mer Test Details"]}),(0,a.jsxs)("div",{children:["Chi-square statistic: ",e.chiSquare.toFixed(3)]}),(0,a.jsxs)("div",{children:["Threshold (95%): ",e.threshold.toFixed(3)]}),(0,a.jsxs)("div",{children:["Patterns tested: ",Object.keys(e.expectedCounts).length]}),(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsx)("div",{className:"font-semibold mt-2",children:"Pattern counts (observed/expected):"}),Object.keys(e.expectedCounts).map(t=>(0,a.jsxs)("div",{children:[t,": ",e.observedCounts[t]||0,"/",e.expectedCounts[t].toFixed(1)]},t))]})]}),(0,a.jsx)(i.i3,{className:"fill-gray-800"})]})})]},t)),g.map((e,t)=>(0,a.jsxs)(i.bL,{children:[(0,a.jsx)(i.l9,{asChild:!0,children:(0,a.jsx)("div",{className:"border rounded-lg p-3 hover:bg-gray-50 transition-colors cursor-help",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("h5",{className:"text-sm font-semibold",children:[e.runType,"-Run Test"]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(e.isRandom?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isRandom?"✓ PASS":"✗ FAIL"})]})})}),(0,a.jsx)(i.ZL,{children:(0,a.jsxs)(i.UC,{className:"bg-gray-800 text-white text-sm p-3 rounded shadow-lg max-w-md",sideOffset:5,children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"font-semibold",children:[e.runType,"-Run Test Details"]}),(0,a.jsxs)("div",{children:["Chi-square statistic: ",e.chiSquare.toFixed(3)]}),(0,a.jsxs)("div",{children:["Threshold (95%): ",e.threshold.toFixed(3)]}),(0,a.jsxs)("div",{children:["Total runs: ",e.runLengths.length]}),(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsx)("div",{className:"font-semibold mt-2",children:"Run length counts (observed/expected):"}),Object.keys(e.expectedCounts).map(t=>(0,a.jsxs)("div",{children:[t,": ",e.observedCounts[t]||0,"/",e.expectedCounts[t].toFixed(1)]},t))]}),e.runLengths.length>0&&(0,a.jsx)("div",{className:"text-xs",children:(0,a.jsxs)("div",{className:"font-semibold mt-2",children:["Longest run: ",Math.max(...e.runLengths)]})})]}),(0,a.jsx)(i.i3,{className:"fill-gray-800"})]})})]},"run-".concat(t)))]})]})]})})}},47978:(e,t,s)=>{"use strict";s.d(t,{default:()=>h});var a=s(58081),r=s(82149),l=s(35313),i=s(39974),n=s(20619),o=s(99020),c=s(90207),d=s(37018),x=s(36653),m=s(99884);let h=()=>{let[e,t]=(0,r.useState)([1,2,3,4,3,2,1,1,2,1]),[s,h]=(0,r.useState)(!1),[u,p]=(0,r.useState)([]),[g,f]=(0,r.useState)(!1),[b,y]=(0,r.useState)(""),[j,v]=(0,r.useState)(null),N={top:20,right:20,bottom:40,left:60},w=600-N.left-N.right,k=300-N.top-N.bottom,_=w/10*.7,M=w/10,C=(0,r.useMemo)(()=>{let t=e.reduce((e,t)=>e+t,0);return 0===t?Array(10).fill(0):e.map(e=>e/t)},[e]),S=(0,r.useCallback)((s,a)=>{let r=Math.max(0,Math.min(1,a)),l=[...e],i=Math.max(e.reduce((e,t)=>e+t,0),20);l[s]=Math.round(r*i),t(l)},[e]),F=(0,r.useCallback)((e,t)=>{if(!s||u.length>0)return;let a=t.currentTarget.closest("svg").getBoundingClientRect(),r=t=>{S(e,Math.max(0,Math.min(1,1-(t.clientY-a.top-N.top)/k)))},l=()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",l)},[s,u.length,S]),E=(e,t)=>{let s=Array(t).fill(0);for(let a=0;a<200;a++){let r=Array(10).fill(0);for(let e=0;e<=9;e++){let a=0;for(let r=0;r<t;r++)a-=s[r]*Math.pow(e,r+1);r[e]=Math.exp(a)}let l=Array(t).fill(0);for(let s=0;s<t;s++){let t=0;for(let a=0;a<=9;a++)e[a]>0&&(t+=e[a]*Math.pow(a,s+1));l[s]=t}let i=.1/(1+.01*a);for(let e=0;e<t;e++)s[e]+=i*l[e];if(.001>Math.max(...l.map(Math.abs)))break}let a=Array(10).fill(0);for(let e=0;e<=9;e++){let r=0;for(let a=0;a<t;a++)r-=s[a]*Math.pow(e,a+1);a[e]=Math.exp(r)}let r=a.reduce((e,t)=>e+t,0);return{lambdas:s,probabilities:a.map(e=>e/r),converged:!0}},A=(e,t)=>{let s=0;for(let a=0;a<=9;a++)e[a]>0&&(s-=e[a]*Math.log(t[a]+1e-10));return s},L=async()=>{let t=e.reduce((e,t)=>e+t,0);if(0===t){y("Please add some data points first");return}f(!0),h(!1),y("");let s=[];try{for(let e=1;e<=10;e++){let{lambdas:a,probabilities:r,converged:l}=E(C,e),i=A(C,r),n=e*Math.log(t)/(2*t);s.push({model:e,crossEntropy:i,bic:n,total:i+n,lambdas:a,probabilities:r,converged:l}),e%3==0&&await new Promise(e=>setTimeout(e,10))}p(s)}catch(e){console.error("Error fitting models:",e),y("Error fitting models. Please try again.")}f(!1)};return(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 space-y-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"BIC Model Selection"}),(0,a.jsxs)("div",{className:"flex gap-4 flex-wrap items-center",children:[(0,a.jsx)("button",{onClick:()=>{t(Array(10).fill(0)),h(!0),p([]),y(""),v(null)},className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"RESET"}),(0,a.jsx)("button",{onClick:L,disabled:0===e.reduce((e,t)=>e+t,0)||g,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors disabled:bg-gray-400",children:g?"Running...":"Run"}),s&&0===u.length&&(0,a.jsx)("div",{className:"widget-explanation",children:"Drag bars up/down to adjust the distribution"}),b&&(0,a.jsx)("div",{className:"text-sm text-red-600",children:b})]}),(0,a.jsxs)("div",{className:"border rounded p-4",children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold mb-3",children:["Empirical Distribution",e.reduce((e,t)=>e+t,0)>0&&" (".concat(e.reduce((e,t)=>e+t,0)," total points)")]}),(0,a.jsxs)("svg",{width:600,height:300,className:"w-full",style:{maxWidth:"".concat(600,"px")},children:[[0,.2,.4,.6,.8,1].map(e=>(0,a.jsx)("line",{x1:N.left,y1:N.top+k*(1-e),x2:N.left+w,y2:N.top+k*(1-e),stroke:"#e5e7eb",strokeDasharray:0===e?"0":"2,2"},e)),C.map((e,t)=>{let r=e*k,l=N.left+t*M+(M-_)/2,i=N.top+k-r,n=0;null!==j&&u[j]&&(n=u[j].probabilities[t]);let o=n*k,c=N.top+k-o;return(0,a.jsxs)("g",{children:[(0,a.jsx)("rect",{x:l,y:N.top,width:_,height:k,fill:"transparent",className:s&&0===u.length?"cursor-ns-resize":"",onMouseDown:e=>F(t,e)}),(0,a.jsx)("rect",{x:l,y:i,width:_,height:r,fill:"#8884d8",stroke:"#6b63c7",strokeWidth:"1",className:"pointer-events-none"}),null!==j&&(0,a.jsx)("rect",{x:l,y:c,width:_,height:o,fill:"#ff7300",opacity:"0.7",className:"pointer-events-none"}),(0,a.jsx)("text",{x:l+_/2,y:N.top+k+20,textAnchor:"middle",fontSize:"14",fill:"#374151",children:t})]},t)}),(0,a.jsx)("line",{x1:N.left,y1:N.top+k,x2:N.left+w,y2:N.top+k,stroke:"#374151",strokeWidth:"2"}),(0,a.jsx)("line",{x1:N.left,y1:N.top,x2:N.left,y2:N.top+k,stroke:"#374151",strokeWidth:"2"}),[0,.2,.4,.6,.8,1].map(e=>(0,a.jsx)("text",{x:N.left-10,y:N.top+k*(1-e)+5,textAnchor:"end",fontSize:"12",fill:"#374151",children:e.toFixed(1)},e)),(0,a.jsx)("text",{x:N.left+w/2,y:295,textAnchor:"middle",fontSize:"14",fill:"#374151",fontWeight:"bold",children:"Value"}),(0,a.jsx)("text",{x:15,y:N.top+k/2,textAnchor:"middle",fontSize:"14",fill:"#374151",fontWeight:"bold",transform:"rotate(-90, 15, ".concat(N.top+k/2,")"),children:"Probability"}),null!==j&&(0,a.jsxs)("g",{children:[(0,a.jsx)("rect",{x:N.left+w-120,y:N.top+10,width:15,height:15,fill:"#8884d8"}),(0,a.jsx)("text",{x:N.left+w-100,y:N.top+22,fontSize:"12",fill:"#374151",children:"Empirical"}),(0,a.jsx)("rect",{x:N.left+w-120,y:N.top+30,width:15,height:15,fill:"#ff7300",opacity:"0.7"}),(0,a.jsxs)("text",{x:N.left+w-100,y:N.top+42,fontSize:"12",fill:"#374151",children:["Model ",j+1]})]})]})]}),u.length>0&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Models:"}),(0,a.jsx)("div",{className:"flex gap-2",children:u.map((e,t)=>(0,a.jsx)("div",{className:"relative group",onMouseEnter:()=>v(t),onMouseLeave:()=>v(null),children:(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold cursor-pointer transition-all ".concat(e.total===Math.min(...u.map(e=>e.total))?"bg-green-500 text-white ring-2 ring-green-300":"bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500"),title:"Model ".concat(e.model,": Total = ").concat(e.total.toFixed(4)),children:e.model})},t))})]})}),u.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-3",children:"Model Comparison"}),(0,a.jsx)(l.u,{width:"100%",height:400,children:(0,a.jsxs)(i.E,{data:u,margin:{top:20,right:20,left:20,bottom:40},children:[(0,a.jsx)(n.d,{strokeDasharray:"3 3"}),(0,a.jsx)(o.W,{dataKey:"model",label:{value:"Model Order (number of parameters)",position:"insideBottom",offset:-10}}),(0,a.jsx)(c.h,{label:{value:"Value",angle:-90,position:"insideLeft"}}),(0,a.jsx)(d.m,{formatter:e=>e.toFixed(4)}),(0,a.jsx)(x.s,{}),(0,a.jsx)(m.y,{dataKey:"crossEntropy",fill:"#8884d8",name:"Cross-Entropy"}),(0,a.jsx)(m.y,{dataKey:"bic",fill:"#82ca9d",name:"BIC Penalty"}),(0,a.jsx)(m.y,{dataKey:"total",fill:"#ff7300",name:"Total (CE + BIC)"})]})}),(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-100 dark:bg-gray-700 rounded",children:[(0,a.jsxs)("p",{className:"text-sm",children:["Best model (lowest total): Order ",u.reduce((e,t)=>t.total<e.total?t:e).model]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"BIC = k \xd7 log(n) / (2n), where k = number of parameters, n = number of data points"})]})]})]})}},49929:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081),r=s(82149);let l=e=>{let{title:t="Mutual Information Explorer",showToggle:s=!1}=e,[l,i]=(0,r.useState)([.14,.21,.35,.06,.09,.15]),[n,o]=(0,r.useState)(450);(0,r.useEffect)(()=>{let e=()=>{o(Math.min(450,window.innerWidth-80))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let c=(0,r.useMemo)(()=>{let e=l[0]+l[1]+l[2],t=l[3]+l[4]+l[5],s=l[0]+l[3];return{sun:e,cloud:t,walk:s,bike:l[1]+l[4],bus:l[2]+l[5]}},[l]),d=(0,r.useMemo)(()=>{let e=0;return[{joint:l[0],marginal:c.sun*c.walk},{joint:l[1],marginal:c.sun*c.bike},{joint:l[2],marginal:c.sun*c.bus},{joint:l[3],marginal:c.cloud*c.walk},{joint:l[4],marginal:c.cloud*c.bike},{joint:l[5],marginal:c.cloud*c.bus}].forEach(t=>{let{joint:s,marginal:a}=t;s>1e-10&&a>1e-10&&(e+=s*Math.log(s/a))}),e/Math.log(2)},[l,c]),x=(0,r.useCallback)((e,t)=>{let s=Math.max(0,Math.min(1,t)),a=[...l];l[e],l[e];let r=l.reduce((t,s,a)=>a===e?t:t+s,0);if(r>0){let t=(1-s)/r;for(let r=0;r<a.length;r++)r===e?a[r]=s:a[r]=l[r]*t}else if(a[e]=s,s<1){let t=a.map((e,t)=>t).filter(t=>t!==e&&l[t]>0);if(t.length>0){let e=(1-s)/t.length;t.forEach(t=>{a[t]=e})}else{let t=(1-s)/(a.length-1);for(let s=0;s<a.length;s++)s!==e&&(a[s]=t)}}a.every(e=>isFinite(e)&&e>=0&&e<=1)&&i(a)},[l]),m=(0,r.useCallback)((e,t)=>{let s=t.currentTarget.closest("svg").getBoundingClientRect(),a=50+95*Math.floor(e/3),r=t=>{x(e,Math.max(0,Math.min(1,1-(t.clientY-s.top-a)/80)))},l=()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",l)},[x]),h=(0,r.useCallback)(()=>{i([.14,.21,.35,.06,.09,.15])},[]),u=Math.min(280,.62*n),p=n/450,g=Math.max(60,80*p),f=Math.max(25,35*p);return(0,a.jsxs)("div",{className:"p-4 sm:p-6 bg-gray-50 rounded-lg space-y-4 sm:space-y-6 max-w-3xl mx-auto",children:[t&&(0,a.jsx)("h3",{className:"text-xl font-semibold text-center text-gray-800",children:t}),(0,a.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:(0,a.jsx)("p",{className:"widget-explanation text-blue-700",children:"Drag bars to adjust probabilities"})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 sm:p-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4 text-center",children:"Joint Distribution P(Weather, Transport)"}),(0,a.jsx)("div",{className:"flex justify-center overflow-x-auto",children:(0,a.jsxs)("svg",{width:n,height:u,className:"border rounded bg-white min-w-0 max-w-full",children:[(0,a.jsx)("rect",{width:n,height:u,fill:"#f9fafb",stroke:"#e5e7eb"}),(0,a.jsx)("text",{x:135*p,y:30*p,textAnchor:"middle",fontSize:Math.max(18,28*p),fill:"#374151",children:"\uD83D\uDEB6‍♀️"}),(0,a.jsx)("text",{x:235*p,y:30*p,textAnchor:"middle",fontSize:Math.max(18,28*p),fill:"#374151",children:"\uD83D\uDEB2"}),(0,a.jsx)("text",{x:335*p,y:30*p,textAnchor:"middle",fontSize:Math.max(18,28*p),fill:"#374151",children:"\uD83D\uDE8C"}),(0,a.jsx)("text",{x:50*p,y:90*p,textAnchor:"middle",fontSize:Math.max(18,28*p),fill:"#374151",children:"☀️"}),(0,a.jsx)("text",{x:50*p,y:185*p,textAnchor:"middle",fontSize:Math.max(18,28*p),fill:"#374151",children:"☁️"}),(0,a.jsx)("line",{x1:85*p,y1:45*p,x2:385*p,y2:45*p,stroke:"#d1d5db",strokeWidth:"1"}),(0,a.jsx)("line",{x1:85*p,y1:140*p,x2:385*p,y2:140*p,stroke:"#d1d5db",strokeWidth:"1"}),(0,a.jsx)("line",{x1:85*p,y1:235*p,x2:385*p,y2:235*p,stroke:"#d1d5db",strokeWidth:"1"}),(0,a.jsx)("line",{x1:85*p,y1:45*p,x2:85*p,y2:235*p,stroke:"#d1d5db",strokeWidth:"1"}),(0,a.jsx)("line",{x1:185*p,y1:45*p,x2:185*p,y2:235*p,stroke:"#d1d5db",strokeWidth:"1"}),(0,a.jsx)("line",{x1:285*p,y1:45*p,x2:285*p,y2:235*p,stroke:"#d1d5db",strokeWidth:"1"}),(0,a.jsx)("line",{x1:385*p,y1:45*p,x2:385*p,y2:235*p,stroke:"#d1d5db",strokeWidth:"1"}),[[{index:0,weather:"☀️",transport:"\uD83D\uDEB6‍♀️",label:"Sun, Walk"},{index:1,weather:"☀️",transport:"\uD83D\uDEB2",label:"Sun, Bike"},{index:2,weather:"☀️",transport:"\uD83D\uDE8C",label:"Sun, Bus"}],[{index:3,weather:"☁️",transport:"\uD83D\uDEB6‍♀️",label:"Cloud, Walk"},{index:4,weather:"☁️",transport:"\uD83D\uDEB2",label:"Cloud, Bike"},{index:5,weather:"☁️",transport:"\uD83D\uDE8C",label:"Cloud, Bus"}]].map((e,t)=>e.map((e,s)=>{let r=l[e.index],i=r*g,n=(117.5+100*s)*p,o=(50+95*t)*p;return(0,a.jsxs)("g",{children:[(0,a.jsx)("rect",{x:n,y:o,width:f,height:g,fill:"transparent",className:"cursor-ns-resize",onMouseDown:t=>m(e.index,t)}),(0,a.jsx)("rect",{x:n,y:o+g-i,width:f,height:i,fill:"#3b82f6",stroke:"#2563eb",strokeWidth:"1",className:"pointer-events-none"}),(0,a.jsxs)("text",{x:n+f/2,y:o+g+8*p,textAnchor:"middle",fontSize:Math.max(8,10*p),fill:"#374151",fontWeight:"bold",children:[(100*r).toFixed(1),"%"]})]},e.index)})),(0,a.jsxs)("text",{x:395*p,y:100*p,fontSize:Math.max(10,12*p),fontWeight:"bold",fill:"#059669",textAnchor:"start",children:[(100*c.sun).toFixed(1),"%"]}),(0,a.jsxs)("text",{x:395*p,y:195*p,fontSize:Math.max(10,12*p),fontWeight:"bold",fill:"#059669",textAnchor:"start",children:[(100*c.cloud).toFixed(1),"%"]}),(0,a.jsxs)("text",{x:135*p,y:255*p,textAnchor:"middle",fontSize:Math.max(10,12*p),fontWeight:"bold",fill:"#059669",children:[(100*c.walk).toFixed(1),"%"]}),(0,a.jsxs)("text",{x:235*p,y:255*p,textAnchor:"middle",fontSize:Math.max(10,12*p),fontWeight:"bold",fill:"#059669",children:[(100*c.bike).toFixed(1),"%"]}),(0,a.jsxs)("text",{x:335*p,y:255*p,textAnchor:"middle",fontSize:Math.max(10,12*p),fontWeight:"bold",fill:"#059669",children:[(100*c.bus).toFixed(1),"%"]})]})})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-xl font-bold text-blue-600 mb-2",children:["I(Weather; Transport) = ",d.toFixed(4)," bits"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"I(X;Y) = Σ P(x,y) log₂ [P(x,y) / (P(x)P(y))]"})]})}),(0,a.jsx)("div",{className:"flex justify-center gap-4",children:(0,a.jsx)("button",{onClick:h,className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors min-h-[44px]",children:"Reset to Default"})})]})}},50749:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var a=s(58081),r=s(82149),l=s(10574),i=s(37720);let n={E:12.7,T:9.06,A:8.17,O:7.51,I:6.97,N:6.75,S:6.33,H:6.09,R:5.99,D:4.25,L:4.03,C:2.78,U:2.76,M:2.41,W:2.36,F:2.23,G:2.02,Y:1.97,P:1.93,B:1.29,V:.98,K:.77,J:.15,X:.15,Q:.1,Z:.07};function o(){let[e,t]=(0,r.useState)(n),[s,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(0),[x,m]=(0,r.useState)([]),[h,u]=(0,r.useState)(null),[p,g]=(0,r.useState)(!1),f=(0,r.useRef)(null),b=(0,r.useRef)(null),y=(0,r.useRef)(null),j=(0,r.useMemo)(()=>{let t=Object.values(e).reduce((e,t)=>e+t,0);if(0===t)return e;let s={};return Object.entries(e).forEach(e=>{let[a,r]=e;s[a]=r/t*100}),s},[e]),v=(0,r.useCallback)(()=>{let e=Object.entries(j).sort((e,t)=>{let[,s]=e,[,a]=t;return a-s}).map(e=>{let[t,s]=e;return{letter:t,probability:s/100}}),t=[];for(let{letter:s,probability:a}of e){if(a<=0)continue;let e=Math.max(1,Math.min(11,Math.ceil(-Math.log2(a)))),r=Math.pow(2,-e);t.push({letter:s,probability:a,codeLength:e,code:"",roundedProb:r})}let s=new Set;for(let e of t){let t=!1;for(let a=0;a<Math.pow(2,e.codeLength);a++){let r=a.toString(2).padStart(e.codeLength,"0"),l=!1;for(let e of s)if(r.startsWith(e)||e.startsWith(r)){l=!0;break}if(!l){e.code=r,s.add(r),t=!0;break}}t||(console.warn("Could not assign code to ".concat(e.letter)),e.code="1".repeat(e.codeLength))}return t},[j]),N=(0,r.useCallback)(()=>{let e=new Map;for(let t=0;t<=11;t++)for(let s=0;s<Math.pow(2,t);s++){let a="".concat(t,"-").concat(s),r=Math.min(1600*Math.pow(.6,t),1600),l=1300+(s-Math.pow(2,t)/2+.5)*r,i=30+50*t,n={id:a,depth:t,position:s,x:l,y:i,isCodeNode:!1,isVisible:!0};e.set(a,n)}for(let t=0;t<11;t++)for(let s=0;s<Math.pow(2,t);s++){let a="".concat(t,"-").concat(s),r="".concat(t+1,"-").concat(2*s),l="".concat(t+1,"-").concat(2*s+1),i=e.get(a),n=e.get(r),o=e.get(l);n&&(i.left=n,n.parent=i),o&&(i.right=o,o.parent=i)}return e.get("0-0")},[]),w=(0,r.useCallback)(e=>{e.left&&(e.left.isVisible=!1,w(e.left)),e.right&&(e.right.isVisible=!1,w(e.right))},[]),k=(0,r.useCallback)((e,t)=>{if(""===t)return e;let s=e;for(let e of t)if("0"===e&&s.left)s=s.left;else{if("1"!==e||!s.right)return null;s=s.right}return s},[]),_=(0,r.useCallback)(()=>{let e=v();m([]),d(0),o(!0),u(N());let t=0,s=setInterval(()=>{if(t<e.length){let s=e[t];m(e=>[...e,s]),setTimeout(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},100),u(e=>{if(!e)return null;let t=k(e,s.code);return t?(t.isCodeNode=!0,t.letter=s.letter,t.code=s.code,w(t),setTimeout(()=>{t.x&&t.y&&[b.current,y.current].forEach(e=>{if(e){let s=e.getBoundingClientRect();if(s.width>0&&s.height>0){let a=t.x-s.width/2,r=t.y-s.height/2;e.scrollTo({left:Math.max(0,a),top:Math.max(0,r),behavior:"smooth"})}}})},200)):console.warn("Could not find node for code: ".concat(s.code," (letter: ").concat(s.letter,")")),{...e}}),t++}else clearInterval(s),o(!1)},800)},[v,N,k,w]),M=(0,r.useCallback)((e,a)=>{if(s)return;let r=a.currentTarget.parentElement.getBoundingClientRect(),l=s=>{let a=Math.max(.1,Math.min(30,(1-(s.clientY-r.top)/128)*20));t(t=>({...t,[e]:a}))},i=()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",i)},[s]),{entropy:C,averageCodeLength:S}=(0,r.useMemo)(()=>{if(0===x.length)return{entropy:0,averageCodeLength:0};let e=0,t=0;for(let s of x)s.probability>0&&(e-=s.probability*Math.log2(s.probability),t+=s.probability*s.codeLength);return{entropy:e,averageCodeLength:t}},[x]),F=(0,r.useMemo)(()=>{if(!h)return[];let e=[];return!function t(s){s.isVisible&&e.push(s),s.left&&s.left.isVisible&&t(s.left),s.right&&s.right.isVisible&&t(s.right)}(h),e},[h]),E=(0,r.useMemo)(()=>{if(0===F.length)return{width:1600,height:600};let e=1/0,t=-1/0,s=1/0,a=-1/0;return F.forEach(r=>{e=Math.min(e,r.x-20),t=Math.max(t,r.x+20),s=Math.min(s,r.y-20),a=Math.max(a,r.y+40)}),{width:Math.ceil(Math.max(2100,t-e+100)),height:Math.ceil(Math.max(600,a-s+100))}},[F]);return(0,a.jsxs)(a.Fragment,{children:[p&&h&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:()=>g(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-7xl max-h-[90vh] overflow-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h4",{className:"text-2xl font-semibold text-gray-800",children:"Shannon Code Tree Construction (Full View)"}),(0,a.jsx)("button",{onClick:()=>g(!1),className:"text-3xl hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center",children:"\xd7"})]}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 overflow-auto max-h-[70vh]",ref:y,children:(0,a.jsxs)("svg",{width:E.width,height:E.height,className:"mx-auto",children:[F.map(e=>(0,a.jsxs)("g",{children:[e.left&&e.left.isVisible&&(0,a.jsx)("line",{x1:e.x,y1:e.y,x2:e.left.x,y2:e.left.y,stroke:"#666",strokeWidth:"1"}),e.right&&e.right.isVisible&&(0,a.jsx)("line",{x1:e.x,y1:e.y,x2:e.right.x,y2:e.right.y,stroke:"#666",strokeWidth:"1"})]},"edges-".concat(e.id))),F.filter(e=>!e.isCodeNode).map(e=>(0,a.jsx)("g",{children:(0,a.jsx)("circle",{cx:e.x,cy:e.y,r:"15",fill:"#f3f4f6",stroke:"#9ca3af",strokeWidth:"1"})},"node-".concat(e.id))),F.filter(e=>e.isCodeNode).map(e=>(0,a.jsxs)("g",{children:[(0,a.jsx)("circle",{cx:e.x,cy:e.y,r:"15",fill:"#3b82f6",stroke:"#1d4ed8",strokeWidth:"3"}),e.letter&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("text",{x:e.x,y:e.y+3,textAnchor:"middle",fill:"white",fontSize:"14",fontWeight:"bold",children:e.letter}),(0,a.jsx)("text",{x:e.x,y:e.y+35,textAnchor:"middle",fill:"#374151",fontSize:"12",className:"font-mono",children:e.code})]})]},"node-".concat(e.id)))]})})]})}),(0,a.jsxs)("div",{className:"shannon-code-widget bg-white border border-gray-200 rounded-lg p-6 my-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Shannon Code Constructor"}),(0,a.jsx)("div",{className:"relative select-none frequency-bars-container",children:(0,a.jsx)("div",{className:"grid grid-cols-9 gap-2 mb-8",children:Object.entries(j).map(e=>{let[t,r]=e;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"h-32 bg-gray-100 rounded relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-blue-500 transition-colors ".concat(s?"cursor-not-allowed":"cursor-ns-resize hover:bg-blue-600"),style:{height:"".concat(5*r,"%")},onMouseDown:e=>M(t,e)}),(0,a.jsx)("div",{className:"absolute inset-x-0 top-2 text-center",children:(0,a.jsx)("div",{className:"font-mono font-bold",children:t})})]}),(0,a.jsxs)("div",{className:"text-xs text-center mt-1 text-gray-600",children:[r.toFixed(1),"%"]})]},t)})})}),(0,a.jsx)("p",{className:"text-gray-600 mb-6 text-center",children:"Drag the bars to adjust letter probabilities."}),(0,a.jsx)("div",{className:"text-center mb-6",children:(0,a.jsx)("button",{onClick:_,disabled:s,className:"px-6 py-3 rounded-lg font-semibold ".concat(s?"bg-gray-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"),children:s?"Computing...":"Compute Shannon's Code"})}),h&&(0,a.jsxs)("div",{className:"mt-6 mb-6",children:[(0,a.jsx)("div",{className:"text-center mb-4",children:(0,a.jsx)(i.A,{type:"zoom-toggle",isZoomed:p,onClick:()=>g(!p),className:"!float-none inline-block"})}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 overflow-auto max-h-96 ".concat(p?"cursor-zoom-out":"cursor-zoom-in"),ref:b,onClick:()=>g(!p),children:(0,a.jsxs)("svg",{width:E.width,height:E.height,className:"mx-auto",children:[F.map(e=>(0,a.jsxs)("g",{children:[e.left&&e.left.isVisible&&(0,a.jsx)("line",{x1:e.x,y1:e.y,x2:e.left.x,y2:e.left.y,stroke:"#666",strokeWidth:"1"}),e.right&&e.right.isVisible&&(0,a.jsx)("line",{x1:e.x,y1:e.y,x2:e.right.x,y2:e.right.y,stroke:"#666",strokeWidth:"1"})]},"edges-".concat(e.id))),F.filter(e=>!e.isCodeNode).map(e=>(0,a.jsx)("g",{children:(0,a.jsx)("circle",{cx:e.x,cy:e.y,r:"15",fill:"#f3f4f6",stroke:"#9ca3af",strokeWidth:"1"})},"node-".concat(e.id))),F.filter(e=>e.isCodeNode).map(e=>(0,a.jsxs)("g",{children:[(0,a.jsx)("circle",{cx:e.x,cy:e.y,r:"15",fill:"#3b82f6",stroke:"#1d4ed8",strokeWidth:"3"}),e.letter&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("text",{x:e.x,y:e.y+3,textAnchor:"middle",fill:"white",fontSize:"12",fontWeight:"bold",children:e.letter}),(0,a.jsx)("text",{x:e.x,y:e.y+30,textAnchor:"middle",fill:"#374151",fontSize:"10",className:"font-mono",children:e.code})]})]},"node-".concat(e.id)))]})})]}),x.length>0&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h4",{className:"font-medium mb-4",children:"Shannon Code Assignments"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm font-semibold text-gray-700 mb-3 p-2 bg-gray-100 rounded",children:[(0,a.jsx)("div",{children:"Letter"}),(0,a.jsx)("div",{children:"Probability"}),(0,a.jsx)("div",{children:(0,a.jsx)(l.A,{math:"\\text{Rounded to } 2^{-n}"})}),(0,a.jsx)("div",{children:"Code"})]}),(0,a.jsx)("div",{className:"max-h-64 overflow-y-auto",ref:f,children:x.map((e,t)=>(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm py-2 ".concat(t%2==0?"bg-white":"bg-gray-100"," rounded mb-1"),children:[(0,a.jsx)("div",{className:"font-mono font-bold text-blue-600",children:e.letter}),(0,a.jsxs)("div",{children:[(100*e.probability).toFixed(2),"%"]}),(0,a.jsxs)("div",{children:["1/2",(0,a.jsx)("sup",{children:e.codeLength})," = ",(100*e.roundedProb).toFixed(1),"%"]}),(0,a.jsx)("div",{className:"font-mono text-green-600 font-bold",children:e.code})]},e.letter))})]})]}),x.length>0&&(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"font-semibold text-blue-800 mb-2",children:"Entropy"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[C.toFixed(3)," bits"]}),(0,a.jsx)("div",{className:"text-sm text-blue-700 mt-1",children:(0,a.jsx)(l.A,{math:"H = \\sum p(x) \\log_2 \\frac{1}{p(x)}"})})]}),(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"font-semibold text-green-800 mb-2",children:"Average code length (rate)"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[S.toFixed(3)," bits"]}),(0,a.jsx)("div",{className:"text-sm text-green-700 mt-1",children:(0,a.jsx)(l.A,{math:"L = \\sum p(x) \\cdot \\text{length}(\\text{code}(x))"})})]})]})]})]})}},60148:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081);s(82149);var r=s(13790);function l(e){return(0,a.jsx)(r.default,{...e,showExplanations:!1})}},60544:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var a=s(58081),r=s(82149),l=s(5340),i=s(19651);function n(){let[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)(!1);(0,i.usePathname)();let o=()=>t(!1);return(0,r.useEffect)(()=>{let e=()=>{n(window.scrollY>50)};return e(),window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,r.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"sticky left-0 right-0 top-0 z-50 bg-white/80 backdrop-blur-sm gap-0 transition-all duration-200 ".concat(s?"py-0":"py-2"),children:(0,a.jsx)("div",{className:"max-w-[var(--content-width)] mx-auto px-4 py-6 flex h-16 items-center justify-end",children:(0,a.jsx)("button",{onClick:()=>t(!e),className:"lg:hidden p-2 text-neutral-600 hover:text-neutral-900","aria-label":"Toggle menu",children:(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e?(0,a.jsx)("path",{d:"M6 18L18 6M6 6l12 12"}):(0,a.jsx)("path",{d:"M4 6h16M4 12h16M4 18h16"})})})})}),(0,a.jsxs)("div",{className:"fixed inset-0 z-40 lg:hidden transition-opacity duration-300 ".concat(e?"opacity-100":"opacity-0 pointer-events-none"),children:[(0,a.jsx)("div",{className:"top-16 fixed inset-0 bg-neutral-100/80 backdrop-blur-sm shadow-xl",onClick:o}),(0,a.jsx)("div",{className:"top-16 fixed inset-x-0 bottom-0 bg-white shadow-xl transition-transform duration-300 overflow-y-auto ".concat(e?"translate-y-0":"-translate-y-full"),children:(0,a.jsx)("div",{className:"w-full min-h-full",style:{marginLeft:"calc(max((100% - var(--content-width)) / 2 + 1rem, 2rem))"},children:(0,a.jsx)(l.default,{className:"py-6 text-lg",onLinkClick:o})})})]})]})}},61803:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var a=s(58081),r=s(82149),l=s(49399);s(65476);var i=s(10572);let n={"\\R":"\\mathbb{R}","\\eps":"\\varepsilon"},o=e=>{let{math:t,displayMode:s=!1,throwOnError:o=!1,macros:c=n,id:d}=e,x=(0,r.useRef)(null),{getEquationNumber:m,registerEquation:h}=(0,i.t)(),[u,p]=(0,r.useState)(null);return((0,r.useEffect)(()=>{if(d){let e=m(d);null!==e?p(e):p(h(d))}},[d,m,h]),(0,r.useEffect)(()=>{if(x.current)try{l.Ay.render(t,x.current,{throwOnError:o,displayMode:s,macros:c,trust:!0})}catch(e){console.error("KaTeX render error:",e),x.current&&(e instanceof Error?x.current.textContent="Error: ".concat(e.message):x.current.textContent="Error: An unknown error occurred")}},[t,s,o,c,u]),s)?d&&null!==u?(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",margin:"1rem 0"},children:[(0,a.jsx)("div",{className:"katex-display-wrapper",style:{flex:1,overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch",textAlign:"center"},children:(0,a.jsx)("span",{ref:x,style:{display:"inline-block"}})}),(0,a.jsxs)("span",{style:{fontSize:"1rem",color:"#666",marginLeft:"2rem",fontFamily:"inherit",flexShrink:0},children:["(",u,")"]})]}):(0,a.jsx)("div",{className:"katex-display-wrapper",style:{overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch",width:"100%",margin:"1rem 0",textAlign:"center"},children:(0,a.jsx)("span",{ref:x,style:{display:"inline-block"}})}):(0,a.jsx)("span",{ref:x})}},62808:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081),r=s(82149);function l(){let[e,t]=(0,r.useState)(new Set(["4-1","3-2","2-2"])),s=(0,r.useMemo)(()=>{let e=new Map;for(let t=0;t<=4;t++)for(let s=0;s<Math.pow(2,t);s++){let a="".concat(t,"-").concat(s);e.set(a,{id:a,x:0,y:0,depth:t,isCode:!1,isDisabled:!1})}for(let t=0;t<4;t++)for(let s=0;s<Math.pow(2,t);s++){let a="".concat(t,"-").concat(s),r="".concat(t+1,"-").concat(2*s),l="".concat(t+1,"-").concat(2*s+1),i=e.get(a),n=e.get(r),o=e.get(l);n&&(i.left=n,n.parent=i),o&&(i.right=o,o.parent=i)}return e.get("0-0")},[]),l=(0,r.useMemo)(()=>{let e=[180,80,40,20,10];!function t(s,a,r){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(s.x=a,s.y=r,s.left&&s.right){let i=e[l]||5;t(s.left,a-i,r+50,l+1),t(s.right,a+i,r+50,l+1)}}(s,0,20,0);let t=1/0,a=-1/0,r=1/0,l=-1/0;function i(e){t=Math.min(t,e.x),a=Math.max(a,e.x),r=Math.min(r,e.y),l=Math.max(l,e.y),e.left&&i(e.left),e.right&&i(e.right)}i(s);let n=-(t+a)/2;!function e(t){t.x+=n,t.left&&e(t.left),t.right&&e(t.right)}(s),t=1/0,a=-1/0,i(s);let o=Math.ceil(a-t+48),c=Math.ceil(l-r+48);return!function e(s){s.x+=24-t,s.y+=24-r,s.left&&e(s.left),s.right&&e(s.right)}(s),{width:o,height:c}},[s]),i=(0,r.useMemo)(()=>{let t=new Map;return!function s(a){let r=e.has(a.id),l=!1,i=a.parent;for(;i;){if(e.has(i.id)){l=!0;break}i=i.parent}t.set(a.id,{isCode:r,isDisabled:l}),a.left&&s(a.left),a.right&&s(a.right)}(s),t},[s,e]),n=(0,r.useMemo)(()=>{let t=0;for(let s of e)t+=Math.pow(2,-parseInt(s.split("-")[0]));return t},[e]),o=(0,r.useMemo)(()=>{let e=[];return!function t(s){e.push(s),s.left&&t(s.left),s.right&&t(s.right)}(s),e},[s]),c=(0,r.useCallback)(e=>{let s=i.get(e);null!=s&&s.isDisabled||t(t=>{let s=new Set(t);if(s.has(e))s.delete(e);else{let[t,a]=e.split("-").map(Number),r=new Set;for(let e=t+1;e<=4;e++){let l=a*Math.pow(2,e-t),i=(a+1)*Math.pow(2,e-t);for(let t=l;t<i;t++){let a="".concat(e,"-").concat(t);s.has(a)&&r.add(a)}}r.forEach(e=>s.delete(e)),s.add(e)}return s})},[i,4]),d=(0,r.useCallback)(e=>{for(let t=0;t<16;t++){let s="".concat(4,"-").concat(t),a=!0,r=4,l=t;for(;r>=0;){let t="".concat(r,"-").concat(l);if(e.has(t)){a=!1;break}r--,l=Math.floor(l/2)}if(a)return s}return null},[]),x=(0,r.useCallback)((e,t)=>{let[s,a]=e.split("-").map(Number);for(let e=s;e<=4;e++){let r=a*Math.pow(2,e-s),l=(a+1)*Math.pow(2,e-s);for(let s=r;s<l;s++)if(t.has("".concat(e,"-").concat(s)))return!0}return!1},[]),m=(0,r.useCallback)((e,t)=>{let[s,a]=e.split("-").map(Number);for(let e=s;e<=4;e++){let r=a*Math.pow(2,e-s),l=(a+1)*Math.pow(2,e-s);for(let s=r;s<l;s++){let a="".concat(e,"-").concat(s);if(t.has(a))return a}}return null},[]),h=(0,r.useCallback)(()=>{t(e=>{let t=new Set(e),s=d(t);if(!s)return e;let[a,r]=s.split("-").map(Number),l=a,i=r;for(;l>0;){let e=l-1,s=Math.floor(i/2),a="".concat(e,"-").concat(s),r=2*s+ +(i%2==0),n="".concat(l,"-").concat(r);if(x(n,t)){if(t.has(n))return t.delete(n),t.add(a),t;{let e=m(n,t);if(e)return t.delete(e),t.add("".concat(l,"-").concat(i)),t}}l=e,i=s}return e})},[d,x,m]),u=(0,r.useCallback)(()=>{t(new Set)},[]);return(0,a.jsxs)("div",{className:"kraft-widget bg-white border border-gray-200 rounded-lg p-6 my-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Kraft's Inequality Explorer"}),(0,a.jsx)("p",{className:"widget-explanation mb-6",children:'Click nodes to make them code words. Use "Improve Code" to improve the code towards Kraft equality.'}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 overflow-auto",children:(0,a.jsxs)("svg",{width:l.width,height:l.height,className:"mx-auto",children:[o.map(e=>(0,a.jsxs)("g",{children:[e.left&&(0,a.jsx)("line",{x1:e.x,y1:e.y,x2:e.left.x,y2:e.left.y,stroke:"#666",strokeWidth:"1"}),e.right&&(0,a.jsx)("line",{x1:e.x,y1:e.y,x2:e.right.x,y2:e.right.y,stroke:"#666",strokeWidth:"1"})]},"edges-".concat(e.id))),o.map(e=>{let t=i.get(e.id),s=(null==t?void 0:t.isCode)||!1,r=(null==t?void 0:t.isDisabled)||!1;return(0,a.jsxs)("g",{children:[(0,a.jsx)("circle",{cx:e.x,cy:e.y,r:"12",fill:r?"#e5e7eb":s?"#3b82f6":"#f3f4f6",stroke:s?"#1d4ed8":"#9ca3af",strokeWidth:s?"3":"1",className:r?"cursor-not-allowed":"cursor-pointer hover:stroke-blue-500",onClick:()=>c(e.id)}),s&&(0,a.jsx)("text",{x:e.x,y:e.y+4,textAnchor:"middle",fill:"white",fontSize:"10",fontWeight:"bold",className:"pointer-events-none",children:e.depth})]},"node-".concat(e.id))})]})}),(0,a.jsxs)("div",{className:"flex gap-4 mb-6 justify-center",children:[(0,a.jsx)("button",{onClick:h,disabled:0===e.size,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Improve Code"}),(0,a.jsx)("button",{onClick:u,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Reset"})]}),(0,a.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm text-blue-700 mb-2",children:"Kraft Sum:"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:["Σ 2",(0,a.jsx)("sup",{children:"-ℓᵢ"})," = ",n.toFixed(4)]}),e.size>0&&(0,a.jsxs)("div",{className:"text-xs text-blue-600 mt-2",children:["Code lengths: ",Array.from(e).sort().map(e=>parseInt(e.split("-")[0])).join(", ")]})]})})]})}},66131:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(58081),r=s(82149);let l=((e,t,s,a)=>{let r=[];for(let l=t;l<=s;l+=a){let t=String(l).padStart(4,"0");r.push({src:"/problens-web/financial/".concat(e,"_plot").concat(t,".png"),index:l})}return r})("sap",20,7460,20),i=()=>{let[e,t]=(0,r.useState)(0),[s,i]=(0,r.useState)(new Set),[n,o]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=l.slice(0,Math.min(10,l.length)),t=0;e.forEach(s=>{let a=new Image;a.onload=()=>{i(e=>new Set([...e,s.src])),o(++t/e.length*100)},a.onerror=()=>{o(++t/e.length*100)},a.src=s.src})},[]),(0,r.useEffect)(()=>{for(let t=Math.max(0,e-3);t<=Math.min(l.length-1,e+3);t++){let e=l[t];if(!s.has(e.src)){let t=new Image;t.onload=()=>{i(t=>new Set([...t,e.src]))},t.src=e.src}}},[e,s]);let c=Math.max(0,Math.min(e,l.length-1));return 0===l.length?(0,a.jsx)("div",{className:"p-4 bg-red-50 rounded-md text-red-700",children:"No S&P plots found."}):c>=l.length||!l[c]?(0,a.jsx)("div",{className:"p-4 bg-yellow-50 rounded-md text-yellow-700",children:"Loading S&P data..."}):(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("div",{className:"relative",children:[!s.has(l[c].src)&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 rounded-md border",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-2"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Loading image..."}),n>0&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[Math.round(n),"% preloaded"]})]})}),(0,a.jsx)("img",{src:l[c].src,alt:"S&P 500 Plot ".concat(l[c].index),className:"max-w-full h-auto border rounded-md shadow-lg transition-opacity duration-300 ".concat(s.has(l[c].src)?"opacity-100":"opacity-0"),style:{maxHeight:"600px",minHeight:"400px"},onError:e=>{console.error("Image failed to load:",l[c].src),e.target.style.border="2px solid red"},onLoad:()=>{i(e=>new Set([...e,l[c].src]))}})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-lg font-semibold text-gray-800",children:["Past ",l[c].index," Days"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[c+1," of ",l.length]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"range",min:0,max:Math.max(0,l.length-1),step:1,value:c,onChange:e=>t(Number(e.target.value)),className:"w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer accent-blue-500"}),(0,a.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>t(Math.max(0,c-1)),disabled:0===c,className:"px-3 py-1 bg-gray-200 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300",children:"← Previous"}),(0,a.jsx)("button",{onClick:()=>t(Math.min(l.length-1,c+1)),disabled:c===l.length-1,className:"px-3 py-1 bg-gray-200 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300",children:"Next →"})]})]})]})]})}},66704:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(58081),r=s(82149),l=s(87687);let i=e=>{let{src:t,alt:s,title:i,style:n,className:o=""}=e,[c,d]=(0,r.useState)(!1),x=(0,l.O)(t),m=()=>{d(!c)};return c?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:m,children:(0,a.jsxs)("div",{className:"relative max-w-full max-h-full",children:[(0,a.jsx)("img",{src:x,alt:s,title:i,className:"max-w-full max-h-full object-contain cursor-pointer",style:{maxWidth:"100vw",maxHeight:"100vh"},onClick:m}),(0,a.jsx)("button",{className:"absolute top-4 right-4 text-white text-2xl bg-black bg-opacity-50 rounded-full w-8 h-8 flex items-center justify-center hover:bg-opacity-75",onClick:m,children:"\xd7"})]})})}):(0,a.jsx)("img",{src:x,alt:s,title:i,style:{cursor:"pointer",...n},className:o,onClick:m})}},67520:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081),r=s(82149);let l=e=>{var t,s,l,i,n,o,c,d,x,m,h,u;let{title:p="Bayes sequence calculator",logSpace:g=!1,highlightSurprisals:f=!1}=e,[b,y]=(0,r.useState)(["H","T","T","H","T"]),[j,v]=(0,r.useState)(0),[N,w]=(0,r.useState)(!1),[k,_]=(0,r.useState)("HTTHT"),M=g?1:2,C=+!g,S=g?-1:.5,F=g?-2:.25,E=g?-1:.5,A=g?Math.log2(.75):.75,L=(0,r.useMemo)(()=>{let e=[],t=M,s=C;g?e.push({step:0,flip:null,likelihoodFair:null,likelihoodBiased:null,logOddsFair:t,logOddsBiased:s,oddsFair:Math.pow(2,t),oddsBiased:Math.pow(2,s),probFair:Math.pow(2,t)/(Math.pow(2,t)+Math.pow(2,s))*100,probBiased:Math.pow(2,s)/(Math.pow(2,t)+Math.pow(2,s))*100}):e.push({step:0,flip:null,likelihoodFair:null,likelihoodBiased:null,oddsFair:t,oddsBiased:s,probFair:t/(t+s)*100,probBiased:s/(t+s)*100});for(let a=0;a<b.length;a++){let r=b[a],l="H"===r?S:E,i="H"===r?F:A;if(g){let n=Math.pow(2,t+=l),o=Math.pow(2,s+=i);e.push({step:a+1,flip:r,likelihoodFair:l,likelihoodBiased:i,logOddsFair:t,logOddsBiased:s,oddsFair:n,oddsBiased:o,probFair:n/(n+o)*100,probBiased:o/(n+o)*100})}else t*=l,s*=i,e.push({step:a+1,flip:r,likelihoodFair:l,likelihoodBiased:i,oddsFair:t,oddsBiased:s,probFair:t/(t+s)*100,probBiased:s/(t+s)*100})}return e},[b,g,S,F,E,A,M,C]),D=e=>{if(N){let t=[...b];t[e]="H"===t[e]?"T":"H",y(t),_(t.join(""))}else v(e+1)};return(0,a.jsxs)("div",{className:"p-6 bg-gray-50 rounded-lg space-y-4 max-w-4xl mx-auto",children:[p&&(0,a.jsx)("h3",{className:"text-lg font-semibold text-center text-gray-800",children:p}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Coin sequence:"}),N?(0,a.jsx)("input",{type:"text",value:k,onChange:e=>_(e.target.value),className:"px-3 py-1 border border-gray-300 rounded font-mono text-center",placeholder:"HTTHT"}):(0,a.jsx)("div",{className:"flex space-x-1",children:b.map((e,t)=>(0,a.jsx)("div",{className:"w-8 h-8 flex items-center justify-center rounded border-2 font-mono font-bold cursor-pointer ".concat(t<j?g?"bg-purple-100 border-purple-300 text-purple-700":"bg-blue-100 border-blue-300 text-blue-700":"bg-gray-100 border-gray-300 text-gray-500"),onClick:()=>D(t),children:e},t))}),(0,a.jsx)("button",{onClick:()=>{if(N){let e=k.toUpperCase().split("").filter(e=>"H"===e||"T"===e);e.length>0&&(y(e),v(0))}else _(b.join(""));w(!N)},className:"px-3 py-1 bg-gray-200 text-gray-700 rounded text-sm hover:bg-gray-300",children:N?"Save":"Edit"}),(0,a.jsx)("button",{onClick:()=>v(Math.min(j+1,b.length)),disabled:j>=b.length||N,className:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Next Step"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 relative",children:[(0,a.jsxs)("div",{className:"relative flex items-center py-3 pl-4 pr-4 ml-44 rounded bg-blue-50 border-blue-200",children:[(0,a.jsx)("div",{className:"absolute -left-44 w-40 text-right text-sm font-medium text-gray-700",children:g?"Prior log-odds":"Prior odds"}),(0,a.jsxs)("div",{className:"flex-1 flex items-center",children:[(0,a.jsx)("div",{className:"flex-1 text-right",children:(0,a.jsx)("span",{className:"font-mono text-sm font-bold",children:M})}),(0,a.jsx)("div",{className:"w-8 flex justify-center",children:(0,a.jsx)("span",{className:"text-gray-500 font-bold",children:g?(0,a.jsx)("span",{className:"text-xs font-normal text-gray-400",children:"vs"}):":"})}),(0,a.jsx)("div",{className:"flex-1 text-left",children:(0,a.jsx)("span",{className:"font-mono text-sm font-bold",children:C})})]})]}),L.slice(1,j+1).map((e,t)=>{var s,r;return(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("div",{className:"relative flex items-center py-3 pl-4 pr-4 ml-44 rounded bg-orange-50 mt-2",children:[(0,a.jsx)("div",{className:"absolute -left-44 top-1/2 transform -translate-y-1/2 w-40 text-right font-mono font-bold text-lg",children:e.flip}),(0,a.jsxs)("div",{className:"flex-1 flex items-center",children:[(0,a.jsx)("div",{className:"flex-1 text-right",children:(0,a.jsx)("span",{className:"font-mono text-sm ".concat(f&&g?"text-green-600 font-bold":""),children:null===(s=e.likelihoodFair)||void 0===s?void 0:s.toFixed(2)})}),(0,a.jsxs)("div",{className:"w-8 flex justify-center relative",children:[(0,a.jsx)("span",{className:"text-gray-500 font-bold",children:g?(0,a.jsx)("span",{className:"text-xs font-normal text-gray-400",children:"vs"}):":"}),(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 -mt-7 z-10",children:(0,a.jsx)("div",{className:"bg-white border-2 border-gray-300 rounded-full w-8 h-8 flex items-center justify-center shadow-sm",children:(0,a.jsx)("span",{className:"text-blue-600 text-lg font-bold",children:g?"+":"\xd7"})})})]}),(0,a.jsx)("div",{className:"flex-1 text-left",children:(0,a.jsx)("span",{className:"font-mono text-sm ".concat(f&&g?"text-orange-600 font-bold":""),children:null===(r=e.likelihoodBiased)||void 0===r?void 0:r.toFixed(2)})})]})]})},t)}),(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-300",children:[f&&g&&j>0&&(0,a.jsxs)("div",{className:"relative flex items-center py-3 pl-4 pr-4 ml-44 rounded bg-orange-50 mb-2",children:[(0,a.jsx)("div",{className:"absolute -left-44 w-40 text-right text-sm font-medium text-gray-700",children:"Total surprisal"}),(0,a.jsxs)("div",{className:"flex-1 flex items-center",children:[(0,a.jsx)("div",{className:"flex-1 text-right",children:(0,a.jsx)("span",{className:"font-mono text-sm font-bold text-green-600",children:(-(null!==(h=null===(t=L[j])||void 0===t?void 0:t.logOddsFair)&&void 0!==h?h:0)+1).toFixed(2)})}),(0,a.jsx)("div",{className:"w-8 flex justify-center",children:(0,a.jsx)("span",{className:"text-gray-500 font-bold",children:g?(0,a.jsx)("span",{className:"text-xs font-normal text-gray-400",children:"vs"}):":"})}),(0,a.jsx)("div",{className:"flex-1 text-left",children:(0,a.jsx)("span",{className:"font-mono text-sm font-bold text-orange-600",children:(-(null!==(u=null===(s=L[j])||void 0===s?void 0:s.logOddsBiased)&&void 0!==u?u:0)).toFixed(2)})})]})]}),g&&(0,a.jsxs)("div",{className:"relative flex items-center py-3 pl-4 pr-4 ml-44 rounded bg-green-50 mb-2",children:[(0,a.jsx)("div",{className:"absolute -left-44 w-40 text-right text-sm font-medium text-gray-700",children:"Posterior log odds"}),(0,a.jsxs)("div",{className:"flex-1 flex items-center",children:[(0,a.jsx)("div",{className:"flex-1 text-right",children:(0,a.jsx)("span",{className:"font-mono text-sm font-bold text-blue-600",children:null===(i=L[j])||void 0===i?void 0:null===(l=i.logOddsFair)||void 0===l?void 0:l.toFixed(2)})}),(0,a.jsx)("div",{className:"w-8 flex justify-center",children:(0,a.jsx)("span",{className:"text-gray-500 font-bold",children:g?(0,a.jsx)("span",{className:"text-xs font-normal text-gray-400",children:"vs"}):":"})}),(0,a.jsx)("div",{className:"flex-1 text-left",children:(0,a.jsx)("span",{className:"font-mono text-sm font-bold text-blue-600",children:null===(o=L[j])||void 0===o?void 0:null===(n=o.logOddsBiased)||void 0===n?void 0:n.toFixed(2)})})]})]}),(0,a.jsxs)("div",{className:"relative flex items-center py-3 pl-4 pr-4 ml-44 rounded bg-green-50 mb-2",children:[(0,a.jsx)("div",{className:"absolute -left-44 w-40 text-right text-sm font-medium text-gray-700",children:"Posterior odds"}),(0,a.jsxs)("div",{className:"flex-1 flex items-center",children:[(0,a.jsx)("div",{className:"flex-1 text-right",children:(0,a.jsx)("span",{className:"font-mono text-sm font-bold text-blue-600",children:null===(c=L[j])||void 0===c?void 0:c.oddsFair.toFixed(3)})}),(0,a.jsx)("div",{className:"w-8 flex justify-center",children:(0,a.jsx)("span",{className:"text-gray-500 font-bold",children:":"})}),(0,a.jsx)("div",{className:"flex-1 text-left",children:(0,a.jsx)("span",{className:"font-mono text-sm font-bold text-blue-600",children:null===(d=L[j])||void 0===d?void 0:d.oddsBiased.toFixed(3)})})]})]}),(0,a.jsxs)("div",{className:"relative flex items-center py-3 pl-4 pr-4 ml-44 rounded bg-green-50",children:[(0,a.jsx)("div",{className:"absolute -left-44 w-40 text-right text-sm font-medium text-gray-700",children:"Posterior probability"}),(0,a.jsxs)("div",{className:"flex-1 flex items-center",children:[(0,a.jsx)("div",{className:"flex-1 text-right",children:(0,a.jsxs)("span",{className:"font-mono text-sm font-bold text-blue-600",children:[null===(x=L[j])||void 0===x?void 0:x.probFair.toFixed(1),"%"]})}),(0,a.jsx)("div",{className:"w-8 flex justify-center"}),(0,a.jsx)("div",{className:"flex-1 text-left",children:(0,a.jsxs)("span",{className:"font-mono text-sm font-bold text-blue-600",children:[null===(m=L[j])||void 0===m?void 0:m.probBiased.toFixed(1),"%"]})})]})]})]})]})]})]})}},68283:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(58081),r=s(82149),l=s(10574);function i(e){let{initialP:t,initialQ:s,default_p:i=.5,default_q:n=.5,change_p:o=!0,change_q:c=!0,maxSurprise:d=7,bottomSpeedMultiplier:x=2,entropy:m=!1}=e,[h,u]=(0,r.useState)(null!=t?t:i),[p,g]=(0,r.useState)(null!=s?s:n),f=m?h:p,[b,y]=(0,r.useState)([]),[j,v]=(0,r.useState)([]),[N,w]=(0,r.useState)(!1),[k,_]=(0,r.useState)(0),[M,C]=(0,r.useState)(100),S=(0,r.useRef)(null),F=(0,r.useRef)(0),E=(0,r.useRef)(0),A=(0,r.useRef)(new Set),L=h*Math.log2(1/f)+(1-h)*Math.log2(1/(1-f)),D=(0===f||1===f)&&(0!==h||0!==f);(0,r.useEffect)(()=>{let e=[],t=300;for(let s=0;s<4;s++)e.push({id:s,isHeads:Math.random()<h,x:t+100*s});y(e),_(4),v([]),A.current.clear()},[h,f]);let z=(0,r.useCallback)(e=>{let t={id:k,isHeads:Math.random()<h,x:e+100};y(e=>[...e,t]),_(e=>e+1)},[h,k]),P=(0,r.useCallback)(e=>e?0===f?d:Math.log2(1/f):1===f?d:Math.log2(1/(1-f)),[f,d]),T=(0,r.useCallback)(e=>{if(!N)return;let t=e-E.current;if(t>16){let s=M/1e3;y(e=>{let a=e.map(e=>({...e,x:e.x-s*t})).filter(e=>e.x>-70);return a.forEach(e=>{if(e.x<=100&&!A.current.has(e.id)){A.current.add(e.id);let t=P(e.isHeads);if(t<=d){let s=306-t/d*306,a={id:e.id,isHeads:e.isHeads,x:300,y:s,surprise:t};v(e=>[...e,a])}}}),a});let a=M/x/1e3;v(e=>e.map(e=>({...e,x:e.x-a*t})).filter(e=>e.x>-40.8)),E.current=e}N&&(F.current=requestAnimationFrame(T))},[N,M,P,d,x]);return(0,r.useEffect)(()=>{if(!N)return;let e=Math.max(...b.map(e=>e.x),-1/0);e<200&&z(e)},[b,N,z]),(0,r.useEffect)(()=>(N?(E.current=performance.now(),F.current=requestAnimationFrame(T)):cancelAnimationFrame(F.current),()=>cancelAnimationFrame(F.current)),[N,T]),(0,r.useEffect)(()=>{let e=()=>{document.hidden&&N&&(E.current=performance.now())};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[N]),(0,a.jsxs)("div",{className:"crossentropy-widget bg-white border border-gray-200 rounded-lg p-6 my-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:m?"Entropy Widget":"Cross-Entropy Widget"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["p(heads): ",h.toFixed(2)," ",(0,a.jsx)("span",{className:"text-gray-500",children:"(true probability)"})]}),(0,a.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:h,onChange:e=>u(parseFloat(e.target.value)),disabled:!o,className:"w-full ".concat(o?"":"opacity-50")})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["q(heads): ",f.toFixed(2)," ",(0,a.jsx)("span",{className:"text-gray-500",children:"(model probability)"})]}),(0,a.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:f,onChange:e=>g(parseFloat(e.target.value)),disabled:!c||m,className:"w-full ".concat(!c||m?"opacity-50":"")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coin movement speed"}),(0,a.jsx)("input",{type:"range",min:"10",max:"150",step:"5",value:M,onChange:e=>C(parseInt(e.target.value)),className:"w-full"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,a.jsx)("button",{onClick:()=>{v([]),A.current.clear(),w(!0)},disabled:N,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50",children:"Start"}),(0,a.jsx)("button",{onClick:()=>{w(!1)},disabled:!N,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 disabled:opacity-50",children:"Stop"}),(0,a.jsx)("button",{onClick:()=>{w(!1),y([]),v([]),A.current.clear(),_(0);let e=[],t=300;for(let s=0;s<4;s++)e.push({id:s,isHeads:Math.random()<h,x:t+100*s});y(e),_(4)},className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Reset"})]}),(0,a.jsx)("div",{className:"bg-gray-100 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Coin flips generated by ",(0,a.jsx)(l.A,{math:"p"})]}),(0,a.jsxs)("div",{ref:S,className:"relative overflow-hidden bg-white rounded border-2 border-gray-300",style:{width:200,height:100},children:[(0,a.jsx)("div",{className:"absolute bg-red-300 opacity-50",style:{left:100,top:0,width:2,height:100}}),b.map(e=>(0,a.jsx)("div",{className:"absolute transition-none",style:{left:e.x,top:-13,width:70,height:70},children:e.isHeads?(0,a.jsx)("img",{src:"/problens-web/images/coin_heads_small.png",alt:"Heads",className:"w-full h-full object-contain"}):(0,a.jsx)("img",{src:"/problens-web/images/coin_tail_small.png",alt:"Tails",className:"w-full h-full object-contain"})},e.id))]})]})}),(0,a.jsxs)("div",{className:"bg-gray-100 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded border-2 border-gray-300 relative overflow-hidden w-full",style:{height:340},children:[(0,a.jsxs)("svg",{width:"100%",height:340,className:"absolute inset-0",viewBox:"0 0 ".concat(600," ").concat(340),children:[(0,a.jsx)("defs",{children:(0,a.jsx)("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:(0,a.jsx)("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"#f0f0f0",strokeWidth:"1"})})}),(0,a.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),Array.from({length:Math.ceil(d)+1},(e,t)=>t).map(e=>{let t=306-e/d*306;return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:0,y1:t,x2:600,y2:t,stroke:"#e0e0e0",strokeWidth:"1"}),(0,a.jsx)("text",{x:5,y:t-5,fontSize:"12",fill:"#666",children:e})]},e)}),D?(0,a.jsx)("text",{x:300,y:30,fontSize:"14",fill:"#ff6b6b",textAnchor:"middle",fontWeight:"bold",children:0===f?"Infinite surprise on heads ⇒ infinite ".concat(m?"entropy":"cross-entropy"):"Infinite surprise on tails ⇒ infinite ".concat(m?"entropy":"cross-entropy")}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("line",{x1:0,y1:306-L/d*306,x2:600,y2:306-L/d*306,stroke:"#ff6b6b",strokeWidth:"2",strokeDasharray:"5,5"}),(0,a.jsxs)("text",{x:480,y:306-L/d*306-5,fontSize:"12",fill:"#ff6b6b",children:[m?"Entropy":"Cross-entropy",": ",L.toFixed(2)]}),(()=>{let e=P(!0);return e<=d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("line",{x1:0,y1:306-e/d*306,x2:600,y2:306-e/d*306,stroke:"#4CAF50",strokeWidth:"1",strokeDasharray:"3,3"}),(0,a.jsxs)("text",{x:480,y:306-e/d*306-5,fontSize:"12",fill:"#4CAF50",children:["Heads: ",e.toFixed(2)]})]}):null})(),(()=>{let e=P(!1);return e<=d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("line",{x1:0,y1:306-e/d*306,x2:600,y2:306-e/d*306,stroke:"#2196F3",strokeWidth:"1",strokeDasharray:"3,3"}),(0,a.jsxs)("text",{x:480,y:306-e/d*306-5,fontSize:"12",fill:"#2196F3",children:["Tails: ",e.toFixed(2)]})]}):null})()]}),(0,a.jsx)("line",{x1:300,y1:0,x2:300,y2:306,stroke:"#ccc",strokeWidth:"1",strokeDasharray:"2,2"})]}),j.map(e=>(0,a.jsx)("div",{className:"absolute",style:{left:"".concat(e.x/600*100,"%"),top:e.y-20.4-32.64,width:40.8,height:40.8,transform:"translateX(-50%)"},children:(0,a.jsx)("img",{src:e.isHeads?"/problens-web/images/coin_heads_small.png":"/problens-web/images/coin_tail_small.png",alt:e.isHeads?"Heads":"Tails",className:"w-full h-full object-contain"})},"bottom-".concat(e.id)))]}),(0,a.jsx)("div",{className:"widget-explanation",children:m?(0,a.jsxs)(a.Fragment,{children:["Heads/Tails lines show the corresponding surprise according to ",(0,a.jsx)(l.A,{math:"p"}),". Entropy is the average surprise.",(0,a.jsx)("br",{}),(0,a.jsx)(l.A,{math:"H(p) = p(\\text{heads}) \\log \\frac{1}{p(\\text{heads})} + p(\\text{tails}) \\log \\frac{1}{p(\\text{tails})}"})]}):(0,a.jsxs)(a.Fragment,{children:["Heads/Tails lines show the corresponding surprise according to ",(0,a.jsx)(l.A,{math:"q"}),". Cross-entropy is the average surprise.",(0,a.jsx)("br",{}),(0,a.jsx)(l.A,{math:"H(p,q) = p(\\text{heads}) \\log \\frac{1}{q(\\text{heads})} + p(\\text{tails}) \\log \\frac{1}{q(\\text{tails})}"})]})})]})]})}},68466:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081),r=s(82149);let l=e=>{let{title:t="Expert Rating Widget",showBrierScore:s=!1}=e,[l,i]=(0,r.useState)([[.99,.99,.01,.99,.99],[.5,.9,.6,.6,.6],[.5,.5,.5,.5,.5]]),[n,o]=(0,r.useState)([1,1,0,1,0]),c=(0,r.useMemo)(()=>l.map(e=>{let t=0,s=!1;for(let a=0;a<e.length;a++){let r=e[a],l=n[a];if(1===l&&0===r||0===l&&1===r){s=!0;break}r>0&&r<1&&(t+=l*Math.log(r)+(1-l)*Math.log(1-r))}return s?1/0:-t/e.length}),[l,n]),d=(0,r.useMemo)(()=>l.map(e=>{let t=0;for(let s=0;s<e.length;s++)t+=Math.pow(e[s]-n[s],2);return t/e.length}),[l,n]),x=(e,t,s)=>{let a=parseFloat(s);if(isNaN(a))return;let r=Math.max(0,Math.min(1,a)),n=[...l];n[e]=[...n[e]],n[e][t]=r,i(n)},m=(e,t)=>{let s=parseInt(t);if(0!==s&&1!==s)return;let a=[...n];a[e]=s,o(a)},h=n.length;return(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg space-y-4 max-w-6xl mx-auto",children:[t&&(0,a.jsx)("h3",{className:"text-lg font-semibold text-center text-gray-800",children:t}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"border-collapse bg-white rounded-lg shadow ".concat(h>=7?"":"w-full"),style:h>=7?{width:"auto",minWidth:"100%"}:{},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"border border-gray-300 p-2 text-center font-semibold w-20",children:"Expert"}),Array.from({length:h},(e,t)=>(0,a.jsxs)("th",{className:"border border-gray-300 p-2 text-center font-semibold",style:{minWidth:"65px"},children:["Q",t+1]},t)),(0,a.jsxs)("th",{className:"border-l-4 border-blue-500 border-t border-r border-b border-gray-300 p-1 text-center font-semibold text-black",style:{minWidth:"auto",whiteSpace:"nowrap"},children:["Log Score",(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-xs font-normal",children:"(Cross-entropy)"})]}),s&&(0,a.jsx)("th",{className:"border border-gray-300 p-2 text-center font-semibold text-green-700",children:"Brier Score"})]})}),(0,a.jsxs)("tbody",{children:[[{emoji:"\uD83E\uDDD1",name:"Expert 1"},{emoji:"\uD83D\uDC75\uD83C\uDFFF",name:"Expert 2"},{emoji:"\uD83D\uDC76",name:"Expert 3"}].map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"border border-gray-300 p-2 text-center font-semibold w-20",children:[(0,a.jsx)("div",{className:"text-2xl",children:e.emoji}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:e.name})]}),Array.from({length:h},(e,s)=>(0,a.jsx)("td",{className:"border border-gray-300 p-0",style:{minWidth:"65px"},children:(0,a.jsx)("input",{type:"number",min:"0",max:"1",step:"0.01",value:l[t][s].toFixed(2),onChange:e=>x(t,s,e.target.value),className:"w-full h-full p-2 text-center border-none text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})},s)),(0,a.jsx)("td",{className:"border-l-4 border-blue-500 border-t border-r border-b border-gray-300 p-2 text-center font-mono font-bold text-blue-700",children:c[t]===1/0?"∞":c[t].toFixed(3)}),s&&(0,a.jsx)("td",{className:"border border-gray-300 p-2 text-center font-mono font-bold text-green-700",children:d[t].toFixed(3)})]},t)),(0,a.jsxs)("tr",{className:"bg-yellow-50 border-t-2 border-yellow-400",children:[(0,a.jsx)("td",{className:"border border-gray-300 p-2 text-center font-semibold w-20",children:(0,a.jsx)("div",{className:"text-sm font-bold text-gray-700",children:"Ground Truth"})}),Array.from({length:h},(e,t)=>(0,a.jsx)("td",{className:"border border-gray-300 p-0",style:{minWidth:"65px"},children:(0,a.jsxs)("select",{value:n[t],onChange:e=>m(t,e.target.value),className:"w-full h-full p-2 text-center border-none text-sm bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-500",children:[(0,a.jsx)("option",{value:0,children:"0"}),(0,a.jsx)("option",{value:1,children:"1"})]})},t)),(0,a.jsx)("td",{className:"border-l-4 border-blue-500 border-t border-r border-b border-gray-300 p-2 text-center text-gray-500",children:"—"}),s&&(0,a.jsx)("td",{className:"border border-gray-300 p-2 text-center text-gray-500",children:"—"})]})]})]})}),(0,a.jsxs)("div",{className:"text-center space-x-3",children:[(0,a.jsx)("button",{onClick:()=>{i(l.map(e=>[...e,.5])),o([...n,1])},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Add Question"}),(0,a.jsx)("button",{onClick:()=>{h>1&&(i(l.map(e=>e.slice(0,-1))),o(n.slice(0,-1)))},disabled:h<=1,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Remove Last Question"})]})]})}},73460:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081),r=s(82149);let l=e=>{let{title:t="Distribution Comparison"}=e,[s,l]=(0,r.useState)([.1,.4,.3,.15,.05]),[i,n]=(0,r.useState)([.2,.2,.2,.2,.2]),[o,c]=(0,r.useState)(500),[d,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{x(window.matchMedia&&window.matchMedia("(pointer: coarse)").matches||"ontouchstart"in window||navigator.maxTouchPoints>0)},[]),(0,r.useEffect)(()=>{let e=()=>{c(Math.min(500,window.innerWidth-80))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let m=Math.min(300,.6*o),h={top:20,right:20,bottom:60,left:40},u=o-h.left-h.right,p=m-h.top-h.bottom,g=u/5,f=.4*g,b=.05*g,y=(0,r.useMemo)(()=>{let e=0,t=!1;for(let a=0;a<i.length;a++){let r=i[a],l=s[a];if(r>0&&0===l){t=!0;break}r>0&&l>0&&(e+=r*Math.log2(r/l))}return{kl:t?1/0:Math.max(0,e),l1:s.reduce((e,t,s)=>e+Math.abs(t-i[s]),0),l2:Math.sqrt(s.reduce((e,t,s)=>e+Math.pow(t-i[s],2),0))}},[s,i]),j=(0,r.useCallback)((e,t,s,a)=>{let r=Math.max(0,Math.min(1,a)),l=[...e],i=1-r,n=e.reduce((e,t,a)=>a===s?e:e+t,0);if(n>0){let t=i/n;for(let a=0;a<l.length;a++)a===s?l[a]=r:l[a]=e[a]*t}else{l[s]=r;let e=(1-r)/(l.length-1);for(let t=0;t<l.length;t++)t!==s&&(l[t]=e)}t(l)},[]),v=(0,r.useCallback)((e,t,a)=>{a.currentTarget.getBoundingClientRect();let r=a.currentTarget.closest("svg").getBoundingClientRect(),o=a=>{let o=Math.max(0,Math.min(1,1-(a.clientY-r.top-h.top)/p));e?j(s,l,t,o):j(i,n,t,o)},c=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",c)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",c)},[s,i,j,p]),N=(0,r.useCallback)((e,t,a)=>{var r;if(!d)return;let o=a.currentTarget.closest("svg").getBoundingClientRect(),c=Math.max(0,Math.min(1,1-((null!==(r=a.clientY)&&void 0!==r?r:0)-o.top-h.top)/p));e?j(s,l,t,c):j(i,n,t,c)},[d,h.top,p,s,i,j]);return(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg space-y-4 max-w-3xl mx-auto",children:[t&&(0,a.jsx)("h3",{className:"text-lg font-semibold text-center text-gray-800",children:t}),(0,a.jsx)("div",{className:"flex justify-center overflow-x-auto",children:(0,a.jsxs)("svg",{width:o,height:m,className:"border rounded bg-white min-w-0 max-w-full",children:[(0,a.jsx)("rect",{x:h.left,y:h.top,width:u,height:p,fill:"#f9fafb",stroke:"#e5e7eb"}),[.2,.4,.6,.8,1].map(e=>{let t=h.top+p-e*p;return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:h.left,y1:t,x2:h.left+u,y2:t,stroke:"#e5e7eb",strokeDasharray:"2,2"}),(0,a.jsx)("text",{x:h.left-10,y:t+4,textAnchor:"end",fontSize:"10",fill:"#6b7280",children:e.toFixed(1)})]},e)}),Array.from({length:5},(e,t)=>(0,a.jsx)("text",{x:h.left+t*g+g/2,y:h.top+p+20,textAnchor:"middle",fontSize:"12",fill:"#374151",fontWeight:"bold",children:t+1},t)),s.map((e,t)=>{let s=i[t],r=h.left+t*g,l=Math.max(10,s*p),n=h.top+p-l,o=Math.max(10,e*p),c=r+b+f+b,d=h.top+p-o;return(0,a.jsxs)("g",{children:[(0,a.jsx)("rect",{x:r+b,y:n,width:f,height:l,fill:0===s?"#dbeafe":"#2563EB",stroke:0===s?"#93c5fd":"#1D4ED8",strokeWidth:"1",className:"cursor-ns-resize",onMouseDown:e=>v(!1,t,e),onClick:e=>N(!1,t,e)}),(0,a.jsx)("rect",{x:c,y:d,width:f,height:o,fill:0===e?"#fee2e2":"#DC2626",stroke:0===e?"#fca5a5":"#B91C1C",strokeWidth:"1",className:"cursor-ns-resize",onMouseDown:e=>v(!0,t,e),onClick:e=>N(!0,t,e)})]},t)}),(0,a.jsx)("line",{x1:h.left,y1:h.top+p,x2:h.left+u,y2:h.top+p,stroke:"#374151",strokeWidth:"2"}),(0,a.jsx)("line",{x1:h.left,y1:h.top,x2:h.left,y2:h.top+p,stroke:"#374151",strokeWidth:"2"}),(0,a.jsx)("text",{x:15,y:h.top+p/2,textAnchor:"middle",fontSize:"12",fill:"#374151",fontWeight:"bold",transform:"rotate(-90, 15, ".concat(h.top+p/2,")"),children:"Probability"})]})}),(0,a.jsx)("p",{className:"widget-explanation",children:d?"Tap above or below bars to set probabilities.":"Drag bars to adjust probabilities"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"bg-white p-3 rounded text-center border",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-700",children:"KL Divergence"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["D(",(0,a.jsx)("span",{className:"text-blue-600",children:"Blue"}),", ",(0,a.jsx)("span",{className:"text-red-600",children:"Red"}),")"]}),(0,a.jsx)("div",{className:"text-lg text-orange-600 font-mono",children:y.kl===1/0?"∞":y.kl.toFixed(3)})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded text-center border",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-700",children:"L1 Distance"}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Manhattan"}),(0,a.jsx)("div",{className:"text-lg text-green-600 font-mono",children:y.l1.toFixed(3)})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded text-center border",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-700",children:"L2 Distance"}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Euclidean"}),(0,a.jsx)("div",{className:"text-lg text-blue-600 font-mono",children:y.l2.toFixed(3)})]})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("button",{onClick:()=>{l([.1,.4,.3,.15,.05]),n([.2,.2,.2,.2,.2])},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Reset Distributions"})})]})}},75154:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081);s(82149);var r=s(19651);function l(e){let t=(0,r.useRouter)(),{href:s="",onClick:l,...i}=e,n=/^([a-z]+:)?\/\//i.test(s),o=s.startsWith("#"),c=n||o||s.startsWith("/")?s:"/".concat(s),d=e=>{let t=document.getElementById(e);if(!t)return;let s=t.querySelector('[class*="header"]');s&&s.click()};return n?(0,a.jsx)("a",{href:s,onClick:l,...i}):(0,a.jsx)("a",{href:c,onClick:e=>{if(null==l||l(e),!e.defaultPrevented){if(o){e.preventDefault();let t=s.slice(1);d(t);let a=document.getElementById(t);a&&a.scrollIntoView({behavior:"smooth"}),history.pushState(null,"",s);return}if(!n){e.preventDefault(),t.push(c);let s=c.indexOf("#");if(-1!==s){let e=c.slice(s+1);setTimeout(()=>d(e),400)}}}},...i})}},77631:e=>{e.exports={sidebar:"Sidebar_sidebar__G7Mzs",scrollableContent:"Sidebar_scrollableContent__WtZmB",list:"Sidebar_list__I5HfV",item:"Sidebar_item__IbyhT",link:"Sidebar_link__NjnkI",active:"Sidebar_active__Bfm7L",subsections:"Sidebar_subsections__4JMe7",subsectionsVisible:"Sidebar_subsectionsVisible__0k2N4",subsectionWrapper:"Sidebar_subsectionWrapper__tUx1X",subsectionWrapperVisible:"Sidebar_subsectionWrapperVisible__ycLhq",subsectionWrapperHidden:"Sidebar_subsectionWrapperHidden__3D_C_",tableOfContents:"Sidebar_tableOfContents__zMzen",gap:"Sidebar_gap__NmoxM"}},79444:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var a=s(82149);function r(){return(0,a.useEffect)(()=>{(()=>{try{let e=new Date().toISOString().split("T")[0],t=localStorage.getItem("problens-views"),s=[];t&&(s=JSON.parse(t));let a=s.findIndex(t=>t.date===e);a>=0?s[a].views+=1:s.push({date:e,views:1}),localStorage.setItem("problens-views",JSON.stringify(s))}catch(e){console.error("Error tracking view:",e)}})()},[]),null}},79688:(e,t,s)=>{"use strict";s.d(t,{default:()=>u});var a=s(58081),r=s(82149),l=s(77864),i=s(87493),n=s(59228),o=s(45538),c=s(36115),d=s(43090);let x=(0,r.memo)(e=>{let{heatmapData:t,getColor:s}=e;return(0,a.jsx)(a.Fragment,{children:t.map(e=>{let{x1:t,x2:r,normalizedDensity:l,i,j:n}=e;return(0,a.jsx)("rect",{x:400*t,y:(1-r)*400,width:5,height:5,fill:s(l)},"".concat(i,"-").concat(n))})})});x.displayName="Heatmap2D";let m=e=>{let{circleData:t,lambda1_3D:s,lambda2_3D:l,constraint1_3D:i,constraint2_3D:n}=e,{exists:o,center:d,radius:x,normal:m}=t,h=(0,r.useRef)(null);if((0,r.useMemo)(()=>[new c.Zcv(new c.Pq0(1,0,0),0),new c.Zcv(new c.Pq0(-1,0,0),1),new c.Zcv(new c.Pq0(0,1,0),0),new c.Zcv(new c.Pq0(0,-1,0),1),new c.Zcv(new c.Pq0(0,0,1),0),new c.Zcv(new c.Pq0(0,0,-1),1)],[]),!o||x<=0)return null;let u=(e=>{let t,s,a;let r=Math.max(0,Math.min(1,e));if(r<.25){let e=4*r;t=Math.floor(68*(1-e)+49*e),s=Math.floor(+(1-e)+54*e),a=Math.floor(84*(1-e)+149*e)}else if(r<.5){let e=(r-.25)*4;t=Math.floor(49*(1-e)+42*e),s=Math.floor(54*(1-e)+150*e),a=Math.floor(149*(1-e)+92*e)}else if(r<.75){let e=(r-.5)*4;t=Math.floor(42*(1-e)+175*e),s=Math.floor(150*(1-e)+215*e),a=Math.floor(92*(1-e)+85*e)}else{let e=(r-.75)*4;t=Math.floor(175*(1-e)+253*e),s=Math.floor(215*(1-e)+231*e),a=Math.floor(85*(1-e)+36*e)}return"rgb(".concat(t,", ").concat(s,", ").concat(a,")")})((Math.max(-100,Math.min(0,s*i+l*n))+100)/100),p=new c.Pq0(0,0,1),g=new c.Pq0(m[0],m[1],m[2]),f=new c.PTz().setFromUnitVectors(p,g);return(0,a.jsxs)("group",{children:[(0,a.jsxs)("mesh",{position:d,children:[(0,a.jsx)("sphereGeometry",{args:[.05]}),(0,a.jsx)("meshStandardMaterial",{color:"#00ff00"})]}),(0,a.jsxs)("mesh",{ref:h,position:d,quaternion:f,children:[(0,a.jsx)("ringGeometry",{args:[Math.max(0,x-.02),x+.02,64]}),(0,a.jsx)("meshStandardMaterial",{color:u,transparent:!0,opacity:.9,side:c.$EB})]})]})},h=()=>(0,a.jsxs)("group",{children:[(0,a.jsx)(i.N,{points:[[0,0,0],[1.2,0,0]],color:"red",lineWidth:2}),(0,a.jsx)(i.N,{points:[[0,0,0],[0,1.2,0]],color:"green",lineWidth:2}),(0,a.jsx)(i.N,{points:[[0,0,0],[0,0,1.2]],color:"blue",lineWidth:2}),(0,a.jsx)(n.E,{position:[1.3,0,0],center:!0,children:(0,a.jsx)("div",{className:"text-red-600 font-semibold pointer-events-none",children:(0,a.jsx)(d.InlineMath,{math:"x_1"})})}),(0,a.jsx)(n.E,{position:[0,1.3,0],center:!0,children:(0,a.jsx)("div",{className:"text-green-600 font-semibold pointer-events-none",children:(0,a.jsx)(d.InlineMath,{math:"x_2"})})}),(0,a.jsx)(n.E,{position:[0,0,1.3],center:!0,children:(0,a.jsx)("div",{className:"text-blue-600 font-semibold pointer-events-none",children:(0,a.jsx)(d.InlineMath,{math:"x_3"})})}),[.2,.4,.6,.8].map(e=>(0,a.jsxs)("group",{children:[(0,a.jsx)(i.N,{points:[[e,0,0],[e,0,1]],color:"#cccccc",lineWidth:1}),(0,a.jsx)(i.N,{points:[[0,0,e],[1,0,e]],color:"#cccccc",lineWidth:1}),(0,a.jsx)(i.N,{points:[[e,0,0],[e,1,0]],color:"#cccccc",lineWidth:1}),(0,a.jsx)(i.N,{points:[[0,e,0],[1,e,0]],color:"#cccccc",lineWidth:1}),(0,a.jsx)(i.N,{points:[[0,e,0],[0,e,1]],color:"#cccccc",lineWidth:1}),(0,a.jsx)(i.N,{points:[[0,0,e],[0,1,e]],color:"#cccccc",lineWidth:1})]},e)),(0,a.jsx)(i.N,{points:[[0,0,0],[1,0,0]],color:"#999999",lineWidth:1}),(0,a.jsx)(i.N,{points:[[1,0,0],[1,0,1]],color:"#999999",lineWidth:1}),(0,a.jsx)(i.N,{points:[[1,0,1],[0,0,1]],color:"#999999",lineWidth:1}),(0,a.jsx)(i.N,{points:[[0,0,1],[0,0,0]],color:"#999999",lineWidth:1}),(0,a.jsx)(i.N,{points:[[0,0,0],[0,1,0]],color:"#999999",lineWidth:1}),(0,a.jsx)(i.N,{points:[[0,1,0],[1,1,0]],color:"#999999",lineWidth:1}),(0,a.jsx)(i.N,{points:[[1,1,0],[1,0,0]],color:"#999999",lineWidth:1}),(0,a.jsx)(i.N,{points:[[0,0,0],[0,0,1]],color:"#999999",lineWidth:1}),(0,a.jsx)(i.N,{points:[[0,0,1],[0,1,1]],color:"#999999",lineWidth:1}),(0,a.jsx)(i.N,{points:[[0,1,1],[0,1,0]],color:"#999999",lineWidth:1})]}),u=()=>{let[e,t]=(0,r.useState)("2d"),[s,i]=(0,r.useState)(-1),[n,c]=(0,r.useState)(1.3),[u,p]=(0,r.useState)(-20),[g,f]=(0,r.useState)(-20),[b,y]=(0,r.useState)(.75),[j,v]=(0,r.useState)(1),N=(0,r.useMemo)(()=>{let e=[],t=0,a=1/0;for(let r=0;r<100;r++)for(let l=0;l<100;l++){let i=r/99,n=l/99,o=Math.exp(s*i)*Math.exp(s*n);t=Math.max(t,o),a=Math.min(a,o),e.push({x1:i,x2:n,density:o,i:r,j:l})}return e.map(e=>({...e,normalizedDensity:(e.density-a)/(t-a)}))},[s]),w=(0,r.useMemo)(()=>{if(n<0||n>2)return[];let e=[];return n<=1?(e.push([0,n]),e.push([n,0])):(e.push([n-1,1]),e.push([1,n-1])),e.filter(e=>{let[t,s]=e;return t>=0&&t<=1&&s>=0&&s<=1})},[n]),k=(0,r.useCallback)(e=>{let t,s,a;if(e<.25){let r=4*e;t=Math.floor(68*(1-r)+49*r),s=Math.floor(+(1-r)+54*r),a=Math.floor(84*(1-r)+149*r)}else if(e<.5){let r=(e-.25)*4;t=Math.floor(49*(1-r)+42*r),s=Math.floor(54*(1-r)+150*r),a=Math.floor(149*(1-r)+92*r)}else if(e<.75){let r=(e-.5)*4;t=Math.floor(42*(1-r)+175*r),s=Math.floor(150*(1-r)+215*r),a=Math.floor(92*(1-r)+85*r)}else{let r=(e-.75)*4;t=Math.floor(175*(1-r)+253*r),s=Math.floor(215*(1-r)+231*r),a=Math.floor(85*(1-r)+36*r)}return"rgb(".concat(t,", ").concat(s,", ").concat(a,")")},[]),_=(0,r.useMemo)(()=>{if(Math.abs(j)/Math.sqrt(3)>Math.sqrt(b))return{exists:!1,center:[0,0,0],radius:0,normal:[0,0,1]};let e=[j/3,j/3,j/3],t=Math.sqrt(b-j*j/3),s=u*b+g*j,a=Math.max(-100,Math.min(0,s));return{exists:!0,center:e,radius:t,normal:[1/Math.sqrt(3),1/Math.sqrt(3),1/Math.sqrt(3)],logDensity:s,clampedLogDensity:a,normalizedDensity:(a+100)/100}},[b,j,u,g]);return(0,a.jsxs)("div",{className:"mb-6 p-6 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-center mb-4",children:"Maximum Entropy Distribution Visualization"}),(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsxs)("div",{className:"inline-flex rounded-lg border border-gray-200 bg-gray-100 p-1",children:[(0,a.jsx)("button",{onClick:()=>t("2d"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors ".concat("2d"===e?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"Exponential"}),(0,a.jsx)("button",{onClick:()=>t("3d"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors ".concat("3d"===e?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"Gaussian"})]})}),"2d"===e?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-4 space-y-4",children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"text-lg bg-white rounded-lg py-3 px-6 inline-block",children:(0,a.jsx)(d.InlineMath,{math:"p(x_1, x_2) \\propto e^{".concat(s," \\cdot x_1} \\cdot e^{").concat(s," \\cdot x_2}")})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["λ = ",s]}),(0,a.jsx)("input",{type:"range",min:"-5",max:"5",step:"0.1",value:s,onChange:e=>i(parseFloat(e.target.value)),className:"w-full h-2 rounded-lg appearance-none cursor-pointer bg-blue-200"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Constraint: x₁ + x₂ = ",n.toFixed(2)]}),(0,a.jsx)("input",{type:"range",min:"0",max:"2",step:"0.1",value:n,onChange:e=>c(parseFloat(e.target.value)),className:"w-full h-2 rounded-lg appearance-none cursor-pointer bg-green-200"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsxs)("svg",{width:"400",height:"400",className:"border border-gray-300",children:[(0,a.jsx)(x,{heatmapData:N,getColor:k}),2===w.length&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("line",{x1:400*w[0][0],y1:(1-w[0][1])*400,x2:400*w[1][0],y2:(1-w[1][1])*400,stroke:"white",strokeWidth:"3",strokeDasharray:"5,5"}),(0,a.jsx)("text",{x:(w[0][0]+w[1][0])*200,y:(2-w[0][1]-w[1][1])*200-10,fill:"white",fontSize:"14",fontWeight:"bold",textAnchor:"middle",style:{filter:"drop-shadow(0 0 3px rgba(0,0,0,0.8))"},children:"constant density"})]})]}),(0,a.jsx)("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2",children:(0,a.jsx)(d.InlineMath,{math:"x_1"})}),(0,a.jsx)("div",{className:"absolute -left-10 top-1/2 transform -translate-y-1/2 -rotate-90",children:(0,a.jsx)(d.InlineMath,{math:"x_2"})}),(0,a.jsx)("div",{className:"absolute -bottom-6 left-0 text-sm",children:(0,a.jsx)(d.InlineMath,{math:"0"})}),(0,a.jsx)("div",{className:"absolute -bottom-6 right-0 text-sm",children:(0,a.jsx)(d.InlineMath,{math:"1"})}),(0,a.jsx)("div",{className:"absolute -left-6 bottom-0 text-sm",children:(0,a.jsx)(d.InlineMath,{math:"0"})}),(0,a.jsx)("div",{className:"absolute -left-6 top-0 text-sm",children:(0,a.jsx)(d.InlineMath,{math:"1"})})]})}),(0,a.jsx)("div",{className:"mt-8 max-w-md mx-auto",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Density scale"}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"Low"}),(0,a.jsx)("div",{className:"flex-1 h-6 rounded-lg",style:{background:"linear-gradient(to right, rgb(68,1,84), rgb(49,54,149), rgb(42,150,92), rgb(175,215,85), rgb(253,231,36))"}}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"High"})]})})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-4 space-y-4",children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"text-lg bg-white rounded-lg py-3 px-6 inline-block",children:(0,a.jsx)(d.InlineMath,{math:"p(x_1, x_2, x_3) \\propto e^{".concat(u," \\cdot x_1^2 + ").concat(g," \\cdot x_1} \\cdot e^{").concat(u," \\cdot x_2^2 + ").concat(g," \\cdot x_2} \\cdot e^{").concat(u," \\cdot x_3^2 + ").concat(g," \\cdot x_3}")})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["λ₁ (quadratic coefficient) = ",u]}),(0,a.jsx)("input",{type:"range",min:"-50",max:"-1",step:"1",value:u,onChange:e=>p(parseFloat(e.target.value)),className:"w-full h-2 rounded-lg appearance-none cursor-pointer bg-blue-200"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["λ₂ (linear coefficient) = ",g]}),(0,a.jsx)("input",{type:"range",min:"-50",max:"-1",step:"1",value:g,onChange:e=>f(parseFloat(e.target.value)),className:"w-full h-2 rounded-lg appearance-none cursor-pointer bg-green-200"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,a.jsx)(d.InlineMath,{math:"x_1 + x_2 + x_3 = ".concat(j.toFixed(2))})}),(0,a.jsx)("input",{type:"range",min:"0",max:"2.5",step:"0.05",value:j,onChange:e=>v(parseFloat(e.target.value)),className:"w-full h-2 rounded-lg appearance-none cursor-pointer bg-purple-200"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,a.jsx)(d.InlineMath,{math:"x_1^2 + x_2^2 + x_3^2 = ".concat(b.toFixed(2))})}),(0,a.jsx)("input",{type:"range",min:"0.05",max:"2",step:"0.05",value:b,onChange:e=>y(parseFloat(e.target.value)),className:"w-full h-2 rounded-lg appearance-none cursor-pointer bg-red-200"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-2",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"relative inline-block",children:(0,a.jsx)("div",{style:{width:"500px",height:"400px"},children:(0,a.jsxs)(l.Hl,{camera:{position:[1.5,1.2,1.5],fov:50},gl:{localClippingEnabled:!0},children:[(0,a.jsx)("ambientLight",{intensity:.5}),(0,a.jsx)("directionalLight",{position:[5,5,5],intensity:.8}),(0,a.jsx)("directionalLight",{position:[-5,-5,-5],intensity:.3}),(0,a.jsxs)("group",{position:[-.5,-.5,-.5],children:[(0,a.jsx)(h,{}),(0,a.jsx)(m,{circleData:_,lambda1_3D:u,lambda2_3D:g,constraint1_3D:b,constraint2_3D:j})]}),(0,a.jsx)(o.N,{enablePan:!1,enableZoom:!0,enableRotate:!0,minDistance:1,maxDistance:5})]})})})}),(0,a.jsxs)("div",{className:"mt-8 text-center space-y-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Drag to rotate • Scroll to zoom"}),!_.exists&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-gray-100 rounded text-sm text-red-600 text-center",children:"No circle exists for these constraint values"})]}),(0,a.jsx)("div",{className:"mt-6 max-w-md mx-auto",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Density scale"}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"Low"}),(0,a.jsx)("div",{className:"flex-1 h-6 rounded-lg",style:{background:"linear-gradient(to right, rgb(68,1,84), rgb(49,54,149), rgb(42,150,92), rgb(175,215,85), rgb(253,231,36))"}}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"High"})]})})]})]})]})}},79916:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var a=s(58081);s(82149);var r=s(87687),l=s(47950),i=s.n(l);function n(e){let{src:t,alt:s="image",width:l="75%",className:n=""}=e;return(0,a.jsxs)("div",{className:"relative mx-auto my-6 flex justify-center ".concat(n),style:{width:l},children:[(0,a.jsx)("img",{src:(0,r.O)(t),alt:s,className:"block max-w-full h-auto select-none",title:"Image source: https://www.pngegg.com/en/png-nllqe/"}),(0,a.jsx)(i(),{href:"/01-kl_intro",className:"absolute bottom-0 left-0 hover:bg-red-300/20",style:{width:"33%",height:"33%"},"aria-label":"Go to first chapter"})]})}},80823:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(58081),r=s(82149),l=s(43090);let i=e=>{let{title:t="Logistic Function",minLambda:s=-3,maxLambda:i=3,initialLambda:n=1,xMin:o=-5,xMax:c=5}=e,[d,x]=(0,r.useState)(n),[m,h]=(0,r.useState)(500);(0,r.useEffect)(()=>{let e=()=>{h(Math.min(500,window.innerWidth-80))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let u=(0,r.useMemo)(()=>{let e=(c-o)/200,t=[];for(let s=0;s<=200;s++){let a=o+s*e,r=Math.exp(d*a)/(1+Math.exp(d*a));t.push({x:a,y:r})}return t},[d,o,c]),p=Math.min(300,.6*m),g={top:20,right:40,bottom:40,left:50},f=m-g.left-g.right,b=p-g.top-g.bottom,y=e=>g.left+(e-o)/(c-o)*f,j=e=>g.top+b-e*b,v=u.map((e,t)=>"".concat(0===t?"M":"L"," ").concat(y(e.x)," ").concat(j(e.y))).join(" "),N=[];for(let e=Math.ceil(o);e<=Math.floor(c);e++)N.push(e);return(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg space-y-4 max-w-3xl mx-auto",children:[t&&(0,a.jsx)("h3",{className:"text-lg font-semibold text-center text-gray-800",children:t}),(0,a.jsx)("div",{className:"flex justify-center overflow-x-auto",children:(0,a.jsxs)("svg",{width:m,height:p,className:"border rounded bg-white min-w-0 max-w-full",children:[(0,a.jsx)("rect",{x:g.left,y:g.top,width:f,height:b,fill:"#f9fafb",stroke:"#e5e7eb"}),N.map(e=>(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:y(e),y1:g.top,x2:y(e),y2:g.top+b,stroke:"#e5e7eb",strokeDasharray:"2,2"}),(0,a.jsx)("text",{x:y(e),y:g.top+b+15,textAnchor:"middle",fontSize:"12",fill:"#6b7280",children:e})]},"x-".concat(e))),[0,.25,.5,.75,1].map(e=>(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:g.left,y1:j(e),x2:g.left+f,y2:j(e),stroke:"#e5e7eb",strokeDasharray:"2,2"}),(0,a.jsx)("text",{x:g.left-10,y:j(e)+4,textAnchor:"end",fontSize:"12",fill:"#6b7280",children:e.toFixed(2)})]},"y-".concat(e))),(0,a.jsx)("line",{x1:g.left,y1:g.top+b,x2:g.left+f,y2:g.top+b,stroke:"#374151",strokeWidth:"2"}),(0,a.jsx)("line",{x1:g.left,y1:g.top,x2:g.left,y2:g.top+b,stroke:"#374151",strokeWidth:"2"}),(0,a.jsx)("line",{x1:y(0),y1:g.top,x2:y(0),y2:g.top+b,stroke:"#9CA3AF",strokeWidth:"1"}),(0,a.jsx)("line",{x1:g.left,y1:j(.5),x2:g.left+f,y2:j(.5),stroke:"#9CA3AF",strokeWidth:"1"}),(0,a.jsx)("path",{d:v,fill:"none",stroke:"#2563EB",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("text",{x:g.left+f/2,y:p-5,textAnchor:"middle",fontSize:"14",fill:"#374151",fontWeight:"bold",children:"x"}),(0,a.jsx)("text",{x:15,y:g.top+b/2,textAnchor:"middle",fontSize:"14",fill:"#374151",fontWeight:"bold",transform:"rotate(-90, 15, ".concat(g.top+b/2,")"),children:"p(x)"})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-center text-sm text-gray-700",children:[(0,a.jsx)("strong",{children:"Lambda"})," (λ)"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"range",min:s,max:i,step:.1,value:d,onChange:e=>x(Number(e.target.value)),className:"w-full h-3 bg-gradient-to-r from-red-200 via-yellow-200 to-green-200 rounded-lg appearance-none cursor-pointer",style:{background:"linear-gradient(to right, \n                #fecaca 0%, \n                #fef3c7 50%, \n                #d1fae5 100%)"}}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,a.jsx)("span",{children:s}),(0,a.jsx)("span",{children:"0"}),(0,a.jsx)("span",{children:i})]})]}),(0,a.jsx)("div",{className:"text-xs text-center text-gray-600",children:"← flipped & steep | flat at 0 | steep →"})]}),(0,a.jsx)("div",{className:"bg-blue-50 p-3 rounded text-center",children:(0,a.jsx)(l.BlockMath,{math:"p(x) = \\frac{e^{".concat(d.toFixed(2)," \\cdot x}}{1 + e^{").concat(d.toFixed(2)," \\cdot x}}")})})]})}},80900:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(58081),r=s(82149),l=s(10574);function i(){let[e,t]=(0,r.useState)(""),[s,i]=(0,r.useState)(""),[n,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!1),[x,m]=(0,r.useState)(!0),[h,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{let e="/problens-web",[s,a]=await Promise.all([fetch("".concat(e,"/compression_experiments/texts/anthems-en.txt")),fetch("".concat(e,"/compression_experiments/texts/anthems.txt"))]);if(s.ok&&a.ok){let e=await s.text(),r=await a.text();t(e.trim()),i(r.trim())}}catch(e){console.error("Failed to load default texts:",e),t("O say can you see, by the dawn's early light, What so proudly we hailed at the twilight's last gleaming..."),i("Allons, enfants de la Patrie, Le jour de gloire est arrive...")}finally{m(!1)}})()},[]);let p=e=>{let t={},s=e.toLowerCase().replace(/[^a-z]/g,"");if(0===s.length)return{};for(let e of s)t[e]=(t[e]||0)+1;let a=s.length;for(let e in t)t[e]=t[e]/a;return t},g=(e,t)=>{let s=0;for(let a of new Set([...Object.keys(e),...Object.keys(t)])){let r=e[a]||0,l=t[a]||0;if(r>0){if(0===l)return 1/0;s+=r*Math.log2(r/l)}}return s},f=e=>{let t=0;for(let s in e){let a=e[s];a>0&&(t+=a*Math.log2(1/a))}return t},b=(e,t,s,a)=>{let r=[];for(let s in e)e[s]>0&&(!t[s]||0===t[s])&&r.push(s);if(r.length>0){let e=r.map(e=>"'".concat(e,"'")).join(", ");return"because ".concat(s," contains ").concat(e," but ").concat(a," misses ").concat(1===r.length?"it":"them"," entirely")}return null};return x?(0,a.jsx)("div",{className:"p-6 bg-gray-50 rounded-lg",children:(0,a.jsx)("div",{className:"text-center text-gray-600",children:"Loading default texts..."})}):(0,a.jsxs)("div",{className:"p-4 sm:p-6 bg-gray-50 rounded-lg space-y-4 sm:space-y-6 max-w-4xl mx-auto",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-center text-gray-800",children:"KL & Entropy Calculator"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 text-center",children:"Computes KL and entropy for the letter frequency distributions (case insensitive, English letters only)"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Text 1 (distribution p₁)"}),(0,a.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),className:"w-full h-48 p-3 border border-gray-300 rounded-md resize-none text-sm font-mono",placeholder:"Enter first text..."}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Characters: ",e.length," | Letters: ",e.toLowerCase().replace(/[^a-z]/g,"").length]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Text 2 (distribution p₂)"}),(0,a.jsx)("textarea",{value:s,onChange:e=>i(e.target.value),className:"w-full h-48 p-3 border border-gray-300 rounded-md resize-none text-sm font-mono",placeholder:"Enter second text..."}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Characters: ",s.length," | Letters: ",s.toLowerCase().replace(/[^a-z]/g,"").length]})]})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("button",{onClick:()=>{e.trim()&&s.trim()&&(d(!0),setTimeout(()=>{let t=p(e),a=p(s);if(0===Object.keys(t).length||0===Object.keys(a).length){o(null),d(!1);return}let r=g(t,a),l=g(a,t);o({kl12:r,kl21:l,entropy1:f(t),entropy2:f(a)}),d(!1)},100))},disabled:c||!e.trim()||!s.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:c?"Computing...":"Compute KL & entropies"})}),n&&(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 space-y-4",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:"Results"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-blue-800 mb-1",children:(0,a.jsx)(l.A,{math:"D(p_1, p_2)"})}),(0,a.jsx)("div",{className:"text-lg font-bold text-blue-900",children:isFinite(n.kl12)?"".concat(n.kl12.toFixed(4)," bits"):"infinite"}),(0,a.jsxs)("div",{className:"text-xs text-blue-700",children:["KL divergence from Text 1 to Text 2",!isFinite(n.kl12)&&(()=>{let t=b(p(e),p(s),"p₁","p₂");return t?(0,a.jsx)("div",{className:"mt-1 italic",children:t}):null})()]})]}),(0,a.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-green-800 mb-1",children:(0,a.jsx)(l.A,{math:"D(p_2, p_1)"})}),(0,a.jsx)("div",{className:"text-lg font-bold text-green-900",children:isFinite(n.kl21)?"".concat(n.kl21.toFixed(4)," bits"):"infinite"}),(0,a.jsxs)("div",{className:"text-xs text-green-700",children:["KL divergence from Text 2 to Text 1",!isFinite(n.kl21)&&(()=>{let t=p(e),r=b(p(s),t,"p₂","p₁");return r?(0,a.jsx)("div",{className:"mt-1 italic",children:r}):null})()]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-800 mb-1",children:(0,a.jsx)(l.A,{math:"H(p_1)"})}),(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[n.entropy1.toFixed(4)," bits"]}),(0,a.jsx)("div",{className:"text-xs text-gray-700",children:"Entropy of Text 1"})]}),(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-800 mb-1",children:(0,a.jsx)(l.A,{math:"H(p_2)"})}),(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[n.entropy2.toFixed(4)," bits"]}),(0,a.jsx)("div",{className:"text-xs text-gray-700",children:"Entropy of Text 2"})]})]})]}),(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsx)("button",{onClick:()=>u(!h),className:"text-sm font-medium text-blue-600 hover:text-blue-800 underline cursor-pointer",children:"\uD83D\uDCCA Letter Frequency Distributions"}),h&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-xs mt-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-700 mb-2",children:"Text 1 Distribution (p₁)"}),(0,a.jsx)("div",{className:"bg-white p-2 rounded border max-h-32 overflow-y-auto",children:(0,a.jsx)("div",{className:"font-mono space-y-1",children:Object.entries(p(e)).sort((e,t)=>{let[,s]=e,[,a]=t;return a-s}).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{children:[t,":"]}),(0,a.jsx)("span",{children:s.toFixed(4)})]},t)})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-700 mb-2",children:"Text 2 Distribution (p₂)"}),(0,a.jsx)("div",{className:"bg-white p-2 rounded border max-h-32 overflow-y-auto",children:(0,a.jsx)("div",{className:"font-mono space-y-1",children:Object.entries(p(s)).sort((e,t)=>{let[,s]=e,[,a]=t;return a-s}).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{children:[t,":"]}),(0,a.jsx)("span",{children:s.toFixed(4)})]},t)})})})]})]})})]}),(0,a.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,a.jsx)("h5",{className:"text-base font-semibold text-blue-800 mb-3",children:"Understanding the Results"}),(0,a.jsxs)("div",{className:"space-y-3 text-sm text-gray-700",children:[(0,a.jsxs)("p",{children:["First, we can see that the mixed file has larger entropy. This makes sense! Every language uses different letters with different frequencies. For example, ",(0,a.jsx)(l.A,{math:"\\mathsf{z}"})," is quite uncommon in English, but pretty common in German. If we pool different languages together, the distribution of frequencies is becoming ‘smoother’, more uniform. Hence, larger entropy. Admittedly, it’s only slightly larger, since increasing the probability of ",(0,a.jsx)(l.A,{math:"\\mathsf{z}"})," from 0.0003 to 0.02 is not really increasing the entropy that much."]}),(0,a.jsxs)("p",{children:["For similar reasons, KL between ",(0,a.jsx)(l.A,{math:"p_1"})," and ",(0,a.jsx)(l.A,{math:"p_2"})," is smaller than vice versa. Remember, KL is all about probability ",(0,a.jsx)("em",{children:"ratios"}),", not differences. Since ",(0,a.jsx)(l.A,{math:"p_1"}),"(",(0,a.jsx)(l.A,{math:"\\mathsf{e}"}),") = 0.12 and ",(0,a.jsx)(l.A,{math:"p_2"}),"(",(0,a.jsx)(l.A,{math:"\\mathsf{e}"}),") = 0.11, ",(0,a.jsx)(l.A,{math:"p_2"})," is a good model of ",(0,a.jsx)(l.A,{math:"p_1"}),". However, since ",(0,a.jsx)(l.A,{math:"p_2"}),"(",(0,a.jsx)(l.A,{math:"\\mathsf{z}"}),") = 0.02 and ",(0,a.jsx)(l.A,{math:"p_1"}),"(",(0,a.jsx)(l.A,{math:"\\mathsf{z}"}),")=0.0003, ",(0,a.jsx)(l.A,{math:"p_1"})," is a crappy model of ",(0,a.jsx)(l.A,{math:"p_2"}),"."]})]})]})]})]})}},82483:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(58081),r=s(82149),l=s(10574);let i=e=>{let{title:t="Maximum Entropy Distribution Builder"}=e,[s,i]=(0,r.useState)([{id:"lambda1",name:"λ₁",mathDisplay:"\\lambda_1",value:20,type:"polynomial",power:1},{id:"lambda2",name:"λ₂",mathDisplay:"\\lambda_2",value:-20,type:"polynomial",power:2},{id:"lambda3",name:"λ₃",mathDisplay:"\\lambda_3",value:0,type:"polynomial",power:3},{id:"lambdalog",name:"λ_log",mathDisplay:"\\lambda_{\\log}",value:0,type:"log"},{id:"lambdaind",name:"λ_ind",mathDisplay:"\\lambda_{\\mathbb{1}_{x>2/3}}",value:0,type:"indicator"},{id:"lambdasin",name:"λ_sin",mathDisplay:"\\lambda_{\\sin}",value:0,type:"sin"}]),n=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3,r=(s-t)/a,l=0;for(let s=0;s<a;s++){let a=t+s*r,i=t+(s+1)*r;l+=(e(a)+e(i))*r/2}return l},[]),o=(0,r.useMemo)(()=>{let e=e=>{let t=0;return s.forEach(s=>{"polynomial"===s.type&&void 0!==s.power?t+=s.value*Math.pow(e,s.power):"log"===s.type&&e>0?t+=s.value*Math.log(e):"indicator"===s.type?t+=s.value*+(e>2/3):"sin"===s.type&&(t+=s.value*Math.sin(20*e))}),Math.exp(t=Math.max(-50,Math.min(50,t)))},t=n(e),a=-Math.log(t),r=s=>e(s)/t,l=[];for(let e=0;e<=200;e++){let t=e/200;t>0&&t<1&&l.push({x:t,y:r(t)})}let i=[];for(let e=1;e<=3;e++){let t=n(t=>r(t)*Math.pow(t,e));i.push({label:"E[X^".concat(e,"]"),value:t})}let o=n(e=>r(e)*Math.log(e));i.push({label:"E[\\log X]",value:o});let c=n(e=>r(e)*+(e>2/3));i.push({label:"E[\\mathbb{1}_{X>2/3}]",value:c});let d=n(e=>r(e)*Math.sin(20*e));return i.push({label:"E[\\sin(20X)]",value:d}),{points:l,expectations:i,lambda0:a}},[s,n]),c=(e,t)=>{i(s=>s.map(s=>s.id===e?{...s,value:t}:s))},d=Math.max(...o.points.map(e=>e.y),.1),x=s.map((e,t)=>{if(0===e.value)return null;let a=Math.abs(e.value).toFixed(2),r=e.value>=0?0===t||s.slice(0,t).every(e=>0===e.value)?"":"+":"-";return"polynomial"===e.type&&void 0!==e.power?1===e.power?"".concat(r).concat(a," x"):"".concat(r).concat(a," x^").concat(e.power):"log"===e.type?"".concat(r).concat(a," \\log x"):"indicator"===e.type?"".concat(r).concat(a," \\mathbb{1}_{x>2/3}"):"sin"===e.type?"".concat(r).concat(a," \\sin(20x)"):null}).filter(Boolean).join(" ");return(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg space-y-4 max-w-6xl mx-auto",children:[t&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:t}),(0,a.jsx)("button",{onClick:()=>{i([{id:"lambda1",name:"λ₁",mathDisplay:"\\lambda_1",value:20,type:"polynomial",power:1},{id:"lambda2",name:"λ₂",mathDisplay:"\\lambda_2",value:-20,type:"polynomial",power:2},{id:"lambda3",name:"λ₃",mathDisplay:"\\lambda_3",value:0,type:"polynomial",power:3},{id:"lambdalog",name:"λ_log",mathDisplay:"\\lambda_{\\log}",value:0,type:"log"},{id:"lambdaind",name:"λ_ind",mathDisplay:"\\lambda_{\\mathbb{1}_{x>2/3}}",value:0,type:"indicator"},{id:"lambdasin",name:"λ_sin",mathDisplay:"\\lambda_{\\sin}",value:0,type:"sin"}])},className:"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors",children:"Reset"})]}),(0,a.jsx)("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:(0,a.jsx)("div",{className:"text-lg",children:(0,a.jsx)(l.A,{math:"p(x) \\propto \\exp\\left(".concat(x||"0","\\right)")})})}),(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-white rounded-lg border",children:[(0,a.jsx)("div",{className:"w-16",children:(0,a.jsx)(l.A,{math:e.mathDisplay})}),(0,a.jsx)("span",{className:"text-gray-600 text-lg",children:"="}),(0,a.jsx)("input",{type:"number",step:"0.5",value:e.value,onChange:t=>c(e.id,parseFloat(t.target.value)||0),className:"w-20 px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("div",{className:"text-sm text-gray-500 w-40",children:(0,a.jsx)(l.A,{math:"polynomial"===e.type&&e.power?"\\text{for } x^".concat(e.power):"log"===e.type?"\\text{for } \\log x":"indicator"===e.type?"\\text{for } \\mathbb{1}_{x>2/3}":"\\text{for } \\sin(20x)"})})]},e.id))})}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border",children:(0,a.jsxs)("svg",{width:"100%",height:"280",viewBox:"0 0 800 280",className:"border",children:[[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1].map(e=>(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:740*e+40,y1:20,x2:740*e+40,y2:240,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:e%.2==0?"0":"2,2"}),[0,.2,.4,.6,.8,1].includes(e)&&(0,a.jsx)("text",{x:740*e+40,y:255,textAnchor:"middle",className:"text-sm fill-gray-600",children:e.toFixed(1)})]},e)),o.points&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{d:"M 40 240 ".concat(o.points.map(e=>"L ".concat(740*e.x+40," ").concat(240-e.y/d*200)).join(" ")," L 780 240 Z"),fill:"#3b82f6",fillOpacity:"0.2"}),(0,a.jsx)("path",{d:"M ".concat(o.points.map(e=>"".concat(740*e.x+40," ").concat(240-e.y/d*200)).join(" L ")),fill:"none",stroke:"#3b82f6",strokeWidth:"3"})]}),(0,a.jsx)("line",{x1:"40",y1:"240",x2:"780",y2:"240",stroke:"#374151",strokeWidth:"2"}),(0,a.jsx)("line",{x1:"40",y1:"20",x2:"40",y2:"240",stroke:"#374151",strokeWidth:"2"}),(0,a.jsx)("text",{x:"400",y:"273",textAnchor:"middle",className:"text-base fill-gray-700",children:"x"}),(0,a.jsx)("text",{x:"20",y:"15",textAnchor:"middle",className:"text-base fill-gray-700",children:"p(x)"})]})})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-3",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Computed Expectations"}),(0,a.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-2",children:o.expectations.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-50 p-2 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:(0,a.jsx)(l.A,{math:e.label})}),(0,a.jsx)("div",{className:"text-lg font-mono font-semibold text-gray-800",children:e.value.toFixed(4)})]},t))})]})]})}},82678:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081),r=s(82149);let l=e=>{let{title:t="Multiplicative Weights Update in Action"}=e,s=[{emoji:"\uD83E\uDDD1",name:"Expert 1",color:"#3b82f6"},{emoji:"\uD83D\uDC75\uD83C\uDFFF",name:"Expert 2",color:"#ef4444"},{emoji:"\uD83D\uDC76",name:"Expert 3",color:"#10b981"}],l=[{id:"mwu",name:"Multiplicative Weights",emoji:"⚖️",color:"#8b5cf6"},{id:"followLeader",name:"Follow the Leader",emoji:"\uD83D\uDC51",color:"#f59e0b"},{id:"sampleProportional",name:"Sample Proportionally",emoji:"\uD83C\uDFB2",color:"#06b6d4"}],i=[{id:1,name:"Steady Performers",description:"Experts consistently perform with probabilities 3/4, 1/2, 1/4",probabilities:[3/4,.5,1/4]},{id:2,name:"Regime Change",description:"First 100 steps: 2/3, 1/3, 0. Last 100 steps: 0, 1, 1/3"},{id:3,name:"Adversarial Alternating",description:"Alternating wins, but the expert Follow the Leader picks always loses"}],[n,o]=(0,r.useState)(new Set(["mwu"])),[c,d]=(0,r.useState)(!1),[x,m]=(0,r.useState)(0),[h,u]=(0,r.useState)(null),[p,g]=(0,r.useState)(new Map),[f,b]=(0,r.useState)(new Map),[y,j]=(0,r.useState)([]),[v,N]=(0,r.useState)([0,0,0]),[w,k]=(0,r.useState)(!1),[_,M]=(0,r.useState)(null),[C,S]=(0,r.useState)(!1),[F,E]=(0,r.useState)(new Map),A=(0,r.useRef)(null),L=()=>{let e=new Map,t=new Map,s=new Map;n.forEach(a=>{let r={gains:[0,0,0],weights:[1/3,1/3,1/3],totalGain:0};e.set(a,r),t.set(a,[0]),s.set(a,[r])}),g(e),b(t),E(s),j([]),N([0,0,0])},D=(e,t)=>{switch(e){case 1:return s.map((e,t)=>+(Math.random()<i[0].probabilities[t]));case 2:let a=t<100?[2/3,1/3,0]:[0,1,1/3];return s.map((e,t)=>+(Math.random()<a[t]));case 3:let r=v.slice(),l=Math.max(...r),n=r.indexOf(l);for(let e=0;e<r.length;e++)if(r[e]===l){n=e;break}if(0===n)return[0,1,0];if(1===n);return[1,0,0];default:return[0,0,0]}},z=e=>{let t=new Map,s=new Map,a=new Map;n.forEach(r=>{let l=p.get(r),i=f.get(r)||[0],n=F.get(r)||[],o=[...l.weights],c=0;switch(r){case"mwu":let d=(o=l.weights.map((t,s)=>t*Math.exp(.1*e[s]))).reduce((e,t)=>e+t,0);o=o.map(e=>e/d);let x=Math.random(),m=0;for(let t=0;t<o.length;t++)if(x<(m+=l.weights[t])){c=e[t];break}break;case"followLeader":let h=l.gains,u=Math.max(...h),g=h.indexOf(u);for(let e=0;e<h.length;e++)if(h[e]===u){g=e;break}c=e[g],(o=[0,0,0])[g]=1;break;case"sampleProportional":let b=l.gains.map(e=>Math.max(e,.1)),y=b.reduce((e,t)=>e+t,0),j=b.map(e=>e/y),v=Math.random(),N=0;for(let t=0;t<j.length;t++)if(v<(N+=j[t])){c=e[t];break}o=j}let w={gains:l.gains.map((t,s)=>t+e[s]),weights:o,totalGain:l.totalGain+c};t.set(r,w),s.set(r,[...i,w.totalGain]),a.set(r,[...n,w])}),g(t),b(s),E(a)},P=()=>{if(x>=200||!h){d(!1),x>=200&&(S(!0),M(200));return}let e=D(h,x);j(t=>[...t,e]),z(e),m(e=>e+1),3===h&&N(t=>t.map((t,s)=>t+e[s]))},T=e=>{0!==n.size&&(u(e),m(0),d(!0),S(!1),M(null),L())};(0,r.useEffect)(()=>(c?A.current=setInterval(P,50):A.current&&clearInterval(A.current),()=>{A.current&&clearInterval(A.current)}),[c,x,h,p]);let W=e=>{o(t=>{let s=new Set(t);return s.has(e)?s.size>1&&s.delete(e):s.add(e),s})},B=C&&null!==_?_:x,I=(()=>{if(C&&null!==_){let e=new Map;return n.forEach(t=>{let s=F.get(t);s&&_<s.length&&e.set(t,s[_])}),e}return p})(),R=Math.max(...Array.from(f.values()).flat(),...s.map((e,t)=>y.reduce((e,s)=>e+s[t],0))),O=()=>(0,a.jsxs)(a.Fragment,{children:[[0,50,100,150,200].map(e=>(0,a.jsx)("line",{x1:3.8*e+40,y1:20,x2:3.8*e+40,y2:280,stroke:"#e5e7eb",strokeWidth:"1"},e)),Array.from(f.entries()).map((e,t)=>{let[s,r]=e,i=l.find(e=>e.id===s),n=r.slice(0,B+1);return(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{d:n.map((e,t)=>"".concat(0===t?"M":"L"," ").concat(3.8*t+40," ").concat(280-e/Math.max(R,1)*240)).join(" "),fill:"none",stroke:i.color,strokeWidth:"3"}),n.length>0&&(0,a.jsx)("circle",{cx:(n.length-1)*3.8+40,cy:280-n[n.length-1]/Math.max(R,1)*240,r:"4",fill:i.color}),n.length>0&&(0,a.jsx)("text",{x:(n.length-1)*3.8+40+10,y:280-n[n.length-1]/Math.max(R,1)*240+5-6*t,fontSize:"16",textAnchor:"start",children:i.emoji})]},s)}),s.map((e,t)=>{let s=[],r=0;s.push(0);let l=Math.min(B,y.length);for(let e=0;e<l;e++)s.push(r+=y[e][t]||0);return(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{d:s.map((e,t)=>"".concat(0===t?"M":"L"," ").concat(3.8*t+40," ").concat(280-e/Math.max(R,1)*240)).join(" "),fill:"none",stroke:e.color,strokeWidth:"2",strokeDasharray:"5,5"}),s.length>0&&(0,a.jsx)("text",{x:(s.length-1)*3.8+40-10,y:280-s[s.length-1]/Math.max(R,1)*240+5+6*t,fontSize:"16",textAnchor:"start",children:e.emoji})]},t)}),(0,a.jsx)("line",{x1:"40",y1:"280",x2:"810",y2:"280",stroke:"#374151",strokeWidth:"2"}),(0,a.jsx)("line",{x1:"40",y1:"20",x2:"40",y2:"280",stroke:"#374151",strokeWidth:"2"}),(0,a.jsx)("text",{x:"420",y:"295",textAnchor:"middle",className:"text-sm fill-gray-700",children:"Steps"}),(0,a.jsx)("text",{x:"25",y:"15",textAnchor:"middle",className:"text-sm fill-gray-700",children:"Gain"})]});return(0,a.jsxs)(a.Fragment,{children:[w&&h&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:()=>k(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-7xl max-h-[90vh] overflow-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h4",{className:"text-2xl font-semibold text-gray-800",children:["Cumulative Gains (Step ",B,"/200)"]}),(0,a.jsx)("button",{onClick:()=>k(!1),className:"text-3xl hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center",children:"\xd7"})]}),(0,a.jsx)("svg",{width:"100%",height:"600",viewBox:"0 0 850 300",preserveAspectRatio:"xMidYMid meet",className:"border",children:O()}),(0,a.jsxs)("div",{className:"mt-6 text-lg",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-6 mb-3",children:[(0,a.jsx)("div",{className:"font-semibold",children:"Algorithms:"}),Array.from(n).map(e=>{let t=l.find(t=>t.id===e);return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-6 h-1.5",style:{backgroundColor:t.color}}),(0,a.jsxs)("span",{children:[t.emoji," ",t.name]})]},e)})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-6",children:[(0,a.jsx)("div",{className:"font-semibold",children:"Experts:"}),s.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-6 h-1.5 border-dashed border-2",style:{borderColor:e.color}}),(0,a.jsxs)("span",{children:[e.emoji," ",e.name]})]},t))]})]}),!c&&x>=200&&C&&(0,a.jsx)("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{className:"text-lg font-semibold text-gray-700",children:"Replay:"}),(0,a.jsx)("input",{type:"range",min:"0",max:"200",value:_||200,onChange:e=>M(parseInt(e.target.value)),className:"flex-1 h-2",style:{background:"linear-gradient(to right, #3b82f6 0%, #3b82f6 ".concat((_||200)/200*100,"%, #e5e7eb ").concat((_||200)/200*100,"%, #e5e7eb 100%)")}}),(0,a.jsxs)("span",{className:"text-lg font-mono text-gray-600 w-20 text-right",children:[_||200,"/200"]})]})}),h&&I.size>0&&(0,a.jsxs)("div",{className:"mt-6 bg-white rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Current Algorithm States"}),(0,a.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:Array.from(I.entries()).map(e=>{let[t,s]=e,r=l.find(e=>e.id===t);return(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"text-lg font-semibold",style:{color:r.color},children:[r.emoji," ",r.name]}),(0,a.jsxs)("div",{className:"text-base text-gray-600 mt-2",children:["Total Gain: ",(0,a.jsx)("span",{className:"font-mono",children:s.totalGain.toFixed(1)})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:["Weights: ",s.weights.map(e=>e.toFixed(2)).join(", "),"followLeader"===t&&1===s.weights.filter(e=>1===e).length&&(0,a.jsx)("span",{className:"text-gray-400",children:" (ties→first)"}),"mwu"===t&&(0,a.jsx)("span",{className:"text-gray-400",children:" (ε=0.1)"})]})]},t)})})]})]})}),(0,a.jsxs)("div",{className:"p-6 bg-gray-50 rounded-lg space-y-6 max-w-6xl mx-auto",children:[t&&(0,a.jsx)("h3",{className:"text-xl font-semibold text-center text-gray-800",children:t}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Select Algorithms"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3",children:l.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:n.has(e.id),onChange:()=>W(e.id),className:"rounded"}),(0,a.jsxs)("span",{style:{color:e.color,fontWeight:"bold"},children:[e.emoji," ",e.name]})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Choose Scenario"}),(0,a.jsx)("div",{className:"grid md:grid-cols-3 gap-3",children:i.map(e=>(0,a.jsxs)("button",{onClick:()=>T(e.id),disabled:c||0===n.size,className:"p-3 rounded-lg border text-left transition-colors ".concat(h===e.id?"bg-blue-100 border-blue-300":"bg-gray-50 border-gray-200 hover:bg-gray-100"," ").concat(c||0===n.size?"opacity-50 cursor-not-allowed":"cursor-pointer"),children:[(0,a.jsxs)("div",{className:"font-semibold",children:["Scenario ",e.id]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.description})]},e.id))})]}),h&&(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold text-gray-800",children:["Cumulative Gains (Step ",B,"/200)"]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Scenario ",h,": ",i[h-1].name]}),(0,a.jsx)("button",{onClick:()=>k(!w),className:"text-sm px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:w?"\uD83D\uDDD7 Exit Fullscreen":"\uD83D\uDD0D Zoom"})]})]}),(0,a.jsx)("div",{className:"relative overflow-hidden ".concat(w?"cursor-zoom-out":"cursor-zoom-in"),onClick:()=>k(!w),children:(0,a.jsx)("svg",{width:"100%",height:w?"600":"300",viewBox:"0 0 850 300",preserveAspectRatio:"xMidYMid meet",className:"border transition-all duration-300",children:O()})}),(0,a.jsxs)("div",{className:"mt-4 ".concat(w?"text-lg":""),children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 mb-2",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:(0,a.jsx)("strong",{children:"Algorithms:"})}),Array.from(n).map(e=>{let t=l.find(t=>t.id===e);return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-1",style:{backgroundColor:t.color}}),(0,a.jsxs)("span",{className:"text-sm",children:[t.emoji," ",t.name]})]},e)})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:(0,a.jsx)("strong",{children:"Experts:"})}),s.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-1 border-dashed border-2",style:{borderColor:e.color}}),(0,a.jsxs)("span",{className:"text-sm",children:[e.emoji," ",e.name]})]},t))]})]}),!c&&x>=200&&C&&(0,a.jsx)("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"Replay:"}),(0,a.jsx)("input",{type:"range",min:"0",max:"200",value:_||200,onChange:e=>M(parseInt(e.target.value)),className:"flex-1",style:{background:"linear-gradient(to right, #3b82f6 0%, #3b82f6 ".concat((_||200)/200*100,"%, #e5e7eb ").concat((_||200)/200*100,"%, #e5e7eb 100%)")}}),(0,a.jsxs)("span",{className:"text-sm font-mono text-gray-600 w-16 text-right",children:[_||200,"/200"]})]})})]}),h&&I.size>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Current Algorithm States"}),(0,a.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:Array.from(I.entries()).map(e=>{let[t,s]=e,r=l.find(e=>e.id===t);return(0,a.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"font-semibold",style:{color:r.color},children:[r.emoji," ",r.name]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-2",children:["Total Gain: ",(0,a.jsx)("span",{className:"font-mono",children:s.totalGain.toFixed(1)})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Weights: ",s.weights.map(e=>e.toFixed(2)).join(", "),"followLeader"===t&&1===s.weights.filter(e=>1===e).length&&(0,a.jsx)("span",{className:"text-gray-400",children:" (ties→first)"}),"mwu"===t&&(0,a.jsx)("span",{className:"text-gray-400",children:" (ε=0.1)"})]})]},t)})})]})]})]})}},82926:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(58081),r=s(82149),l=s(37720);let i=()=>{let[e,t]=(0,r.useState)(null),[s,i]=(0,r.useState)(!0),[n,o]=(0,r.useState)({exponential:!0,logNormal:!0,inverseGamma:!0}),[c,d]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[h,u]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),[f,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{let e="/problens-web",s=await fetch("".concat(e,"/volatility_data_15day.json"));if(!s.ok&&!(s=await fetch("".concat(e,"/volatility_data_full.json"))).ok&&!(s=await fetch("".concat(e,"/volatility_data.json"))).ok)throw Error("Failed to load data: ".concat(s.status));let a=await s.json();t(a),d(!1)}catch(e){console.error("Error loading volatility data:",e),m("Failed to load volatility data"),d(!1)}})()},[]);let y=e=>{o(t=>({...t,[e]:!t[e]}))};if(c)return(0,a.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-300 rounded w-1/4 mb-4"}),(0,a.jsx)("div",{className:"h-64 bg-gray-300 rounded"})]})});if(x||!e)return(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-red-600",children:["Error: ",x||"No data available"]})});let j={top:20,right:20,bottom:50,left:60},v=800-j.left-j.right,N=400-j.top-j.bottom,w=Math.max(...e.histogram.binCenters,...Object.values(e.fits).flatMap(e=>e.curve.map(e=>e.x))),k=f?.002:w,_=e.histogram.binCenters.map((e,t)=>e<=k?t:-1).filter(e=>e>=0).map(t=>e.histogram.density[t]),M=Math.max(Math.max(..._),Math.max(...Object.values(e.fits).flatMap(e=>e.curve.filter(e=>e.x<=k).map(e=>e.y)))),C=s?e=>e<=.1?N:N-Math.log10(e)/Math.log10(M)*N:e=>N-e/M*N,S=e=>e/k*v,F=s?[.1,1,10,100,1e3,1e4].filter(e=>e>=.1&&e<=M):Array.from({length:6},(e,t)=>t/5*M);return(0,a.jsxs)("div",{className:"p-4 sm:p-6 bg-gray-50 rounded-lg space-y-4 max-w-4xl mx-auto",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"S&P 500 Variance Distribution"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Y-axis:"}),(0,a.jsx)("button",{onClick:()=>i(!s),className:"px-4 py-2 text-sm rounded-md border transition-colors min-h-[44px] ".concat(s?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:s?"Log Scale":"Linear Scale"}),(0,a.jsx)("button",{onClick:()=>b(!f),className:"px-4 py-2 text-sm rounded-md border transition-colors min-h-[44px] ".concat(f?"bg-orange-500 text-white border-orange-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:f?"Show Full Range":"Show Main Range"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Show fits:"}),(0,a.jsx)("div",{className:"flex gap-2",children:Object.entries(n).map(e=>{let[t,s]=e;return(0,a.jsx)("button",{onClick:()=>y(t),className:"px-3 py-2 text-sm rounded-md border transition-colors min-h-[44px] ".concat(s?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"),children:"exponential"===t?"Exponential":"logNormal"===t?"Log-Normal":"Inverse-Γ"},t)})})]})]}),(0,a.jsx)("div",{className:p?"fixed inset-0 z-50 bg-white p-8":"bg-white p-4 rounded-lg border relative",children:(0,a.jsxs)("div",{className:"".concat(p?"h-full":""," relative"),children:[(0,a.jsx)(l.A,{type:"zoom-toggle",isZoomed:p,onClick:()=>g(!p),className:"absolute top-2 right-2 z-10"}),(0,a.jsxs)("svg",{width:"100%",height:p?"100%":400,viewBox:"0 0 ".concat(800," ").concat(400),className:"border border-gray-200 rounded",children:[(0,a.jsxs)("g",{transform:"translate(".concat(j.left,", ").concat(j.top,")"),children:[(0,a.jsx)("line",{x1:"0",y1:"0",x2:"0",y2:N,stroke:"#6b7280",strokeWidth:"1"}),(0,a.jsx)("line",{x1:"0",y1:N,x2:v,y2:N,stroke:"#6b7280",strokeWidth:"1"}),F.map((e,t)=>{let s=C(e);return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:"-5",y1:s,x2:"0",y2:s,stroke:"#6b7280",strokeWidth:"1"}),(0,a.jsx)("line",{x1:"0",y1:s,x2:v,y2:s,stroke:"#e5e7eb",strokeWidth:"0.5"}),(0,a.jsx)("text",{x:"-10",y:s+3,textAnchor:"end",fontSize:"10",fill:"#6b7280",children:e>=1?e.toFixed(0):e.toFixed(1)})]},t)}),Array.from({length:6},(e,t)=>t/5*k).map((e,t)=>{let s=S(e);return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:s,y1:N,x2:s,y2:N+5,stroke:"#6b7280",strokeWidth:"1"}),(0,a.jsx)("text",{x:s,y:N+18,textAnchor:"middle",fontSize:"10",fill:"#6b7280",children:e.toFixed(4)})]},t)}),e.histogram.binCenters.map((t,r)=>{let l=e.histogram.density[r];if(l<=0||t>k||s&&l<.1)return null;let i=S(t),n=C(l),o=N-n,c=.8*S(e.histogram.binEdges[1]-e.histogram.binEdges[0]);return(0,a.jsx)("rect",{x:i-c/2,y:n,width:c,height:o,fill:"#93c5fd",stroke:"#3b82f6",strokeWidth:"0.5",opacity:"0.7",children:(0,a.jsx)("title",{children:"Variance: ".concat(t.toFixed(6),"\\nDensity: ").concat(l.toFixed(1))})},r)}),n.exponential&&(0,a.jsx)("path",{d:e.fits.exponential.curve.filter(e=>e.x<=k&&(s?e.y>=.1:e.y>0)).map((e,t)=>"".concat(0===t?"M":"L"," ").concat(S(e.x)," ").concat(C(e.y))).join(" "),fill:"none",stroke:"#ef4444",strokeWidth:"2",strokeDasharray:s?"8 4":"none"}),n.logNormal&&(0,a.jsx)("path",{d:e.fits.logNormal.curve.filter(e=>e.x<=k&&(s?e.y>=.1:e.y>0)).map((e,t)=>"".concat(0===t?"M":"L"," ").concat(S(e.x)," ").concat(C(e.y))).join(" "),fill:"none",stroke:"#3b82f6",strokeWidth:"2",strokeDasharray:s?"8 4":"none"}),n.inverseGamma&&(0,a.jsx)("path",{d:e.fits.inverseGamma.curve.filter(e=>e.x<=k&&(s?e.y>=.1:e.y>0)).map((e,t)=>"".concat(0===t?"M":"L"," ").concat(S(e.x)," ").concat(C(e.y))).join(" "),fill:"none",stroke:"#10b981",strokeWidth:"2",strokeDasharray:s?"8 4":"none"})]}),(0,a.jsxs)("text",{x:400,y:15,textAnchor:"middle",fontSize:"12",fill:"#374151",fontWeight:"bold",children:["Daily Variance Distribution (15-day rolling window)",f?" - Showing 0 to 0.002":""]}),(0,a.jsx)("text",{x:400,y:390,textAnchor:"middle",fontSize:"11",fill:"#6b7280",children:"Variance (σ\xb2)"}),(0,a.jsx)("text",{x:15,y:200,textAnchor:"middle",fontSize:"11",fill:"#6b7280",transform:"rotate(-90, 15, ".concat(200,")"),children:"Probability Density"})]})]})}),(0,a.jsx)("div",{className:"bg-white p-3 rounded-lg border",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-3 bg-blue-300 border border-blue-500 rounded"}),(0,a.jsx)("span",{children:"Empirical variance"})]}),n.exponential&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-0.5 bg-red-500"}),(0,a.jsx)("span",{children:"Exponential"})]}),n.logNormal&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-0.5 bg-blue-500"}),(0,a.jsx)("span",{children:"Log-normal"})]}),n.inverseGamma&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-0.5 bg-green-500"}),(0,a.jsx)("span",{children:"Inverse-Gamma"})]})]})}),(0,a.jsxs)("div",{className:"bg-white p-2 rounded-lg border text-xs",children:[(0,a.jsxs)("h4",{className:"text-sm font-normal text-gray-700 cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>u(!h),children:["Distribution Statistics ",h?"▼":"▶"]}),h&&(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 mt-2",children:[(0,a.jsxs)("div",{className:"p-1.5 bg-gray-50 rounded",children:[(0,a.jsx)("strong",{children:"Count:"})," ",e.stats.count.toLocaleString()]}),(0,a.jsxs)("div",{className:"p-1.5 bg-gray-50 rounded",children:[(0,a.jsx)("strong",{children:"Mean:"})," ",e.stats.mean.toFixed(6)]}),(0,a.jsxs)("div",{className:"p-1.5 bg-gray-50 rounded",children:[(0,a.jsx)("strong",{children:"Median:"})," ",e.stats.median.toFixed(6)]}),(0,a.jsxs)("div",{className:"p-1.5 bg-gray-50 rounded",children:[(0,a.jsx)("strong",{children:"Std Dev:"})," ",e.stats.std.toFixed(6)]}),(0,a.jsxs)("div",{className:"p-1.5 bg-gray-50 rounded",children:[(0,a.jsx)("strong",{children:"Min:"})," ",e.stats.min.toFixed(6)]}),(0,a.jsxs)("div",{className:"p-1.5 bg-gray-50 rounded",children:[(0,a.jsx)("strong",{children:"Max:"})," ",e.stats.max.toFixed(6)]})]})]})]})}},84592:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(58081),r=s(82149),l=s(14816);let i=e=>{let{question:t,options:s,correctIndices:i,explanation:n,feedbackType:o="correct-incorrect"}=e,[c,d]=(0,r.useState)(null),[x,m]=(0,r.useState)(!1),h=e=>{x||(d(e),m(!0))};return(0,a.jsxs)("div",{className:"my-6 p-4 bg-gray-50 rounded-lg border",children:[t&&(0,a.jsx)("div",{className:"mb-4 text-lg font-medium text-gray-800",children:t}),(0,a.jsx)("div",{className:"space-y-3",children:s.map((e,t)=>{let s="w-full p-3 text-left rounded-lg border border-gray-300 transition-all duration-200 ";if(x){let e=i.includes(t),a=t===c;e?s+="bg-green-200 text-green-900 ":a?s+="bg-red-200 text-red-900 ":s+="bg-gray-100 text-gray-600 ",s+="cursor-default "}else s+="bg-gray-100 hover:bg-gray-200 cursor-pointer ";return(0,a.jsx)("button",{onClick:()=>h(t),className:s,disabled:x,children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"font-semibold mr-3",children:[t+1,"."]}),(0,a.jsx)("span",{children:e}),x&&(()=>{let e=i.includes(t),s=t===c;return e?(0,a.jsx)("span",{className:"ml-auto font-bold",children:"✓"}):s?(0,a.jsx)("span",{className:"ml-auto font-bold",children:"✗"}):null})()]})},t)})}),x&&(0,a.jsx)("div",{className:"mt-4 space-y-3",children:(0,a.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-blue-800 mb-2",children:"Explanation:"}),(0,a.jsx)("div",{className:"text-blue-700",children:"string"==typeof n?(0,a.jsx)(l.oz,{children:n}):n})]})})]})}},86012:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081),r=s(82149);let l=e=>{let{title:t="Polling Error Calculator"}=e,[s,l]=(0,r.useState)(3),[i,n]=(0,r.useState)(50),[o,c]=(0,r.useState)(95),d=(0,r.useMemo)(()=>{let e=i/100,t=s/100,a={90:1.645,95:1.96,99:2.576}[o],r=Math.ceil(a*a*e*(1-e)/(t*t));return{sampleSize:r,totalCost:2*r,percentOfUSVoters:r/24e7*100,errorMargin:s,worstCaseSampleSize:Math.ceil(a*a/(4*t*t))}},[s,i,o]);return(0,a.jsxs)("div",{className:"p-6 bg-gray-50 rounded-lg space-y-6 max-w-4xl mx-auto",children:[t&&(0,a.jsx)("h3",{className:"text-xl font-semibold text-center text-gray-800",children:t}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Desired Margin of Error: \xb1",s.toFixed(1),"%"]}),(0,a.jsx)("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:s,onChange:e=>l(parseFloat(e.target.value)),className:"w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer accent-blue-500"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsx)("span",{children:"0.1%"}),(0,a.jsx)("span",{children:"10%"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Population Split: ",i.toFixed(1),"% / ",(100-i).toFixed(1),"%"]}),(0,a.jsx)("input",{type:"range",min:"45",max:"55",step:"0.5",value:i,onChange:e=>n(parseFloat(e.target.value)),className:"w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer accent-red-500"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsx)("span",{children:"45/55"}),(0,a.jsx)("span",{children:"50/50"}),(0,a.jsx)("span",{children:"55/45"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Confidence Level"}),(0,a.jsxs)("select",{value:o,onChange:e=>c(parseInt(e.target.value)),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:90,children:"90%"}),(0,a.jsx)("option",{value:95,children:"95%"}),(0,a.jsx)("option",{value:99,children:"99%"})]})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-md",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:"Required Sample Size"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-4xl font-bold text-blue-600",children:(e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e.toString())(d.sampleSize)}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"people needed"})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Estimated cost:"}),(0,a.jsx)("span",{className:"font-semibold",children:(e=>e>=1e6?"$".concat((e/1e6).toFixed(1),"M"):e>=1e3?"$".concat((e/1e3).toFixed(0),"K"):"$".concat(e))(d.totalCost)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"% of US voters:"}),(0,a.jsx)("span",{className:"font-semibold",children:d.percentOfUSVoters<.001?"<0.001%":"".concat(d.percentOfUSVoters.toFixed(3),"%")})]})]})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:"Quick Scenarios"}),(0,a.jsx)("div",{className:"grid md:grid-cols-5 gap-2",children:[{name:"Typical Poll",error:3,description:"Standard media poll"},{name:"High-Quality Poll",error:2,description:"Premium polling"},{name:"Super Precise",error:1,description:"Research grade"},{name:"Election Night",error:.5,description:"Call the race"},{name:"Impossible?",error:.1,description:"Ultimate precision"}].map(e=>(0,a.jsxs)("button",{onClick:()=>l(e.error),className:"p-3 rounded-lg border text-sm transition-colors ".concat(.05>Math.abs(s-e.error)?"bg-blue-100 border-blue-500 text-blue-800":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"),children:[(0,a.jsx)("div",{className:"font-semibold",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:["\xb1",e.error,"%"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]},e.name))})]})]})}},87687:(e,t,s)=>{"use strict";function a(e){if(e.startsWith("http"))return e;let t=e.startsWith("/")?e:"/".concat(e);return"".concat("/problens-web").concat(t)}s.d(t,{O:()=>a})},89509:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(58081),r=s(82149),l=s(43090);function i(e,t,s){return 1/(s*Math.sqrt(2*Math.PI))*Math.exp(-((e-t)**2)/(2*s*s))}function n(){let e=(0,r.useRef)(null),[t,s]=(0,r.useState)(600);(0,r.useEffect)(()=>{let t=()=>{e.current&&s(Math.min(600,e.current.offsetWidth-32))};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);let[n,o]=(0,r.useState)(()=>[.25,.35,.65,.3,.7,.45,.28,.68,.75,.2,.6,.72,.22,.67,.78,.05].map(e=>Math.max(.02,Math.min(.98,e)))),[c,d]=(0,r.useState)("best"),[x,m]=(0,r.useState)({mu:.5,sigma:.2}),{mu:h,sigma:u}=(0,r.useMemo)(()=>{if("best"===c){let e=n.reduce((e,t)=>e+t,0)/16,t=n.reduce((t,s)=>t+(s-e)**2,0)/16;return{mu:e,sigma:Math.sqrt(t||.01)}}return x},[c,n,x]),p=e=>Math.log(e)/Math.log(2),g=(0,r.useMemo)(()=>{let e=0;for(let t of n){let s=i(t,h,u);s>0&&(e-=.0625*p(s))}return e},[n,h,u]),f=(0,r.useMemo)(()=>g-p(16),[g]),b=(e,s)=>{s.preventDefault();let a=s.currentTarget.closest("svg");if(!a)return;a.getBoundingClientRect();let r="touches"in s?s.touches[0].clientX:s.clientX,l=n[e],i=s=>{let a=Math.max(.02,Math.min(.98,l+(("touches"in s?s.touches[0].clientX:s.clientX)-r)/t));o(t=>{let s=[...t];return s[e]=a,s})},c=()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",c),document.removeEventListener("touchmove",i),document.removeEventListener("touchend",c)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",c),document.addEventListener("touchmove",i),document.addEventListener("touchend",c)},y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toFixed(t)},j=e=>d(e);return(0,a.jsxs)("div",{ref:e,className:"p-4 bg-gray-50 rounded-lg space-y-4 max-w-full",children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Fitting data with a Gaussian"})}),(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)("div",{className:"inline-flex rounded-lg border border-gray-200 bg-gray-100 p-1",children:[["best","Best fit"],["manual","Try different fits"]].map(e=>{let[t,s]=e;return(0,a.jsx)("button",{onClick:()=>j(t),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors ".concat(c===t?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:s},t)})})}),(0,a.jsx)("div",{className:"relative overflow-x-auto",children:(0,a.jsxs)("svg",{width:t,height:320,className:"bg-white border rounded-lg",style:{minWidth:t},children:[(0,a.jsx)("line",{x1:0,y1:238,x2:t,y2:238,stroke:"#d1d5db",strokeWidth:2}),n.map((e,s)=>{let r=e*t,l=84;return(0,a.jsxs)("g",{children:[(0,a.jsx)("rect",{x:r-10,y:l-5,width:20,height:238-l+10,fill:"transparent",cursor:"ew-resize",onMouseDown:e=>b(s,e),onTouchStart:e=>b(s,e)}),(0,a.jsx)("line",{x1:r,y1:l,x2:r,y2:238,stroke:"#3b82f6",strokeWidth:4,cursor:"ew-resize",style:{pointerEvents:"none"}}),(0,a.jsx)("line",{x1:r-12,y1:l,x2:r+12,y2:l,stroke:"#3b82f6",strokeWidth:4,style:{pointerEvents:"none"}})]},s)}),(0,a.jsx)("polyline",{fill:"none",stroke:"#ef4444",strokeWidth:3,opacity:.9,points:Array.from({length:t},(e,s)=>{let a=i(s/t,h,u),r=i(h,h,u);return"".concat(s,",").concat(238-a/r*123.2)}).join(" ")})]})}),(0,a.jsx)("div",{className:"text-center text-xs text-gray-400 mt-1",children:"Drag bars left/right to change input distribution"}),"manual"===c&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Mean (μ): ",y(h)]}),(0,a.jsx)("input",{type:"range",min:0,max:1,step:"0.01",value:h,onChange:e=>m(t=>({...t,mu:parseFloat(e.target.value)})),className:"w-full h-2 rounded-lg appearance-none cursor-pointer bg-red-200"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Standard Deviation (σ): ",y(u)]}),(0,a.jsx)("input",{type:"range",min:"0.01",max:"0.5",step:"0.01",value:u,onChange:e=>m(t=>({...t,sigma:parseFloat(e.target.value)})),className:"w-full h-2 rounded-lg appearance-none cursor-pointer bg-orange-200"})]})]}),(0,a.jsx)("hr",{className:"border-gray-300 my-4"}),(0,a.jsxs)("div",{className:"flex justify-center gap-6 mb-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-blue-600",children:(0,a.jsx)(l.InlineMath,{math:"p_{\\text{empirical}}"})}),(0,a.jsx)("span",{className:"text-blue-600 font-medium",children:": the empirical distribution"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-red-600",children:(0,a.jsx)(l.InlineMath,{math:"q_{\\text{Gaussian}}"})}),(0,a.jsx)("span",{className:"text-red-600 font-medium",children:": the model"})]})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("span",{className:"text-lg font-semibold",children:["KL divergence: ",(0,a.jsx)(l.InlineMath,{math:"D(p_{\\text{empirical}}, q_{\\text{Gaussian}}) = ".concat(f.toFixed(3))})]})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("span",{className:"text-lg font-semibold",children:["Cross-entropy: ",(0,a.jsx)(l.InlineMath,{math:"H(p_{\\text{empirical}}, q_{\\text{Gaussian}}) = ".concat(g.toFixed(3))})]})})]})}},94384:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(58081),r=s(82149),l=s(39989);let i=()=>{var e;let t=(0,r.useRef)(null),[s,i]=(0,r.useState)(null),[n,o]=(0,r.useState)("kl"),[c,d]=(0,r.useState)("unified"),[x,m]=(0,r.useState)(!0),[h,u]=(0,r.useState)(null),[p,g]=(0,r.useState)(null),[f,b]=(0,r.useState)(null),[y,j]=(0,r.useState)(!1),[v,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)(.4),[_,M]=(0,r.useState)(40),[C,S]=(0,r.useState)(250),[F,E]=(0,r.useState)(.6),[A,L]=(0,r.useState)(-800),[D,z]=(0,r.useState)(8),P={president_washington:"#1E3A8A",president_jefferson:"#7C2D12",president_lincoln:"#991B1B",president_roosevelt:"#166534",president_kennedy:"#7C3AED"},T={country_france:"#3B82F6",country_japan:"#EF4444",country_brazil:"#10B981",country_germany:"#F59E0B",country_australia:"#8B5CF6"},W=(e,t)=>"president"===t?P[e]||"#374151":T[e]||"#6B7280",B=e=>({president_washington:"Washington",president_jefferson:"Jefferson",president_lincoln:"Lincoln",president_roosevelt:"Roosevelt",president_kennedy:"Kennedy",country_france:"France",country_japan:"Japan",country_brazil:"Brazil",country_germany:"Germany",country_australia:"Australia"})[e]||e;(0,r.useEffect)(()=>{I()},[]);let I=async()=>{try{let e;m(!0),u(null);try{if(!(e=await fetch("/data/wikipedia_analysis.json")).ok)throw Error("Dev path failed")}catch(t){if(!(e=await fetch("/problens-web/data/wikipedia_analysis.json")).ok)throw Error("Failed to fetch Wikipedia analysis data")}let t=await e.json();i(t)}catch(e){u("Failed to load Wikipedia analysis data"),console.error(e)}finally{m(!1)}},R=(0,r.useCallback)(()=>{let e,a,r;if(!s||!t.current)return;let i="kl"===n?s.kl_analysis.baseline:s.deflate_analysis;if(!i)return;let o=i.languages;"president"===c?o=i.languages.filter(e=>"president"===i.categories[e]):"country"===c&&(o=i.languages.filter(e=>"country"===i.categories[e]));let d=l.Ltv(t.current);d.selectAll("*").remove();let x=t.current.parentElement;if(!x)return;if(y){let t=window.innerWidth-40,s=window.innerHeight-120;t/1.6<=s?a=(e=t)/1.6:e=1.6*(a=s),r=e/1e3}else a=(e=Math.min(1e3,Math.max(700,x.getBoundingClientRect().width-32)))/1.6,r=e/1e3;let m=50*r,h=30*r;d.attr("width",e).attr("height",a);let u=d.append("g").attr("transform","translate(".concat(m,", ").concat(m,")")),p=o.map(e=>{var t;return{id:e,category:i.categories[e],displayName:B(e),size:(null===(t=i.entropy_values)||void 0===t?void 0:t[e])||1}}),j=[];o.forEach(e=>{o.forEach(t=>{if(e!==t){let s=i.distance_matrix[e][t],a="kl"===n?Math.max(0,s-.05):s;if(a<=w){let r=a/w;j.push({source:e,target:t,value:1-r,distance:s})}}})});let v=l.tXi(p).force("link",l.kJC(j).id(e=>e.id).distance(e=>(_+(1-e.value)*C)*r).strength(e=>Math.pow(e.value,2)*F)).force("charge",l.xJS().strength(A*r)).force("center",l.jTM((e-2*m)/2,(a-2*m)/2)).force("collision",l.eRw().radius(h+D*r)).force("boundary",()=>{p.forEach(t=>{void 0!==t.x&&void 0!==t.y&&(t.x=Math.max(h+10,Math.min(e-2*m-h-10,t.x)),t.y=Math.max(h+10,Math.min(a-2*m-h-10,t.y)))})}),N=u.append("g").selectAll("line").data(j).join("line").attr("stroke","#999").attr("stroke-opacity",.6).attr("stroke-width",e=>6*Math.pow(e.value,1.5)*r),k=u.append("g").selectAll("circle").data(p).join("circle").attr("r",e=>Math.min("country"===e.category?1.2*h:h,15+4*(e.size||1))).attr("fill",e=>W(e.id,e.category)).attr("stroke","#fff").attr("stroke-width",3).style("cursor","pointer"),M=u.append("g").selectAll("text").data(p).join("text").text(e=>e.displayName).attr("font-size","".concat(11*r,"px")).attr("font-weight","bold").attr("text-anchor","middle").attr("dy",4).attr("fill","#333").style("pointer-events","none");k.on("mouseover",(e,t)=>{g(t.id);let s=new Set([t.id]);j.forEach(e=>{e.source===t.id&&s.add(e.target),e.target===t.id&&s.add(e.source)}),k.style("opacity",e=>s.has(e.id)?1:.3),N.style("opacity",e=>e.source.id===t.id||e.target.id===t.id?.8:.1),M.style("opacity",e=>s.has(e.id)?1:.3)}).on("mouseout",()=>{g(null),k.style("opacity",1),N.style("opacity",.6),M.style("opacity",1)}).on("click",(e,t)=>{b(f===t.id?null:t.id)});let S=l.$Er().on("start",(e,t)=>{e.active||v.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}).on("drag",(e,t)=>{t.fx=e.x,t.fy=e.y}).on("end",(e,t)=>{e.active||v.alphaTarget(0),t.fx=null,t.fy=null});k.call(S),v.on("tick",()=>{N.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),k.attr("cx",e=>e.x).attr("cy",e=>e.y),M.attr("x",e=>e.x).attr("y",e=>e.y)})},[s,n,c,f,y,w,_,C,F,A,D]);if((0,r.useEffect)(()=>{R()},[R]),(0,r.useEffect)(()=>{if(!y)return;let e=()=>{R()};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[y,R]),x)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-gray-600",children:"Loading Wikipedia analysis..."})});if(h)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-red-600",children:h})});let O=y?"fixed inset-0 z-50 bg-white p-4 space-y-4 overflow-y-auto":"p-4 sm:p-6 bg-gray-50 rounded-lg space-y-4 w-full mx-auto";return(0,a.jsxs)("div",{className:O,children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Wikipedia Content Similarity Network"}),(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,a.jsx)("button",{onClick:()=>o("kl"===n?"deflate":"kl"),className:"px-3 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors text-sm",children:"kl"===n?"KL Divergence":"DEFLATE"}),(0,a.jsx)("button",{onClick:()=>d("unified"===c?"president":"president"===c?"country":"unified"),className:"px-3 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 transition-colors text-sm",children:"unified"===c?"All Content":"president"===c?"Presidents":"Countries"}),(0,a.jsxs)("button",{onClick:()=>N(!v),className:"px-3 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors text-sm",children:[v?"Hide":"Show"," Controls"]}),(0,a.jsx)("button",{onClick:()=>j(!y),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:y?"Exit Fullscreen":"Fullscreen"})]})]}),(0,a.jsx)("p",{className:"text-center text-gray-600 text-sm",children:"kl"===n?"Wikipedia content clustered by KL divergence of character frequencies.".concat("unified"===c?" US Presidents vs. Countries comparison.":""):"Wikipedia content clustered by DEFLATE dictionary compression effectiveness.".concat("unified"===c?" Cross-topic similarity analysis.":"")}),s&&(0,a.jsx)("div",{className:"text-center text-sm text-gray-500",children:"unified"===c?"Showing: ".concat(s.metadata.presidents," US presidents, ").concat(s.metadata.countries," countries"):"president"===c?"Showing: ".concat(s.metadata.presidents," US presidents only"):"Showing: ".concat(s.metadata.countries," countries only")}),v&&(0,a.jsxs)("div",{className:"bg-orange-50 rounded-lg border border-orange-200 p-4",children:[(0,a.jsx)("h4",{className:"font-semibold mb-3",children:"Physics Parameters"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Max Distance: ",w.toFixed(2)]}),(0,a.jsx)("input",{type:"range",min:"0.1",max:"1.0",step:"0.05",value:w,onChange:e=>k(parseFloat(e.target.value)),className:"w-full"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Only show connections ≤ this distance"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Base Spring: ",_,"px"]}),(0,a.jsx)("input",{type:"range",min:"20",max:"100",step:"5",value:_,onChange:e=>M(parseInt(e.target.value)),className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Max Spring: ",C,"px"]}),(0,a.jsx)("input",{type:"range",min:"150",max:"400",step:"25",value:C,onChange:e=>S(parseInt(e.target.value)),className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Link Strength: ",F.toFixed(1)]}),(0,a.jsx)("input",{type:"range",min:"0.1",max:"2.0",step:"0.1",value:F,onChange:e=>E(parseFloat(e.target.value)),className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Charge: ",A]}),(0,a.jsx)("input",{type:"range",min:"-1500",max:"-200",step:"50",value:A,onChange:e=>L(parseInt(e.target.value)),className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Collision: ",D,"px"]}),(0,a.jsx)("input",{type:"range",min:"2",max:"20",step:"2",value:D,onChange:e=>z(parseInt(e.target.value)),className:"w-full"})]})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 overflow-hidden",children:(0,a.jsx)("div",{className:"w-full flex justify-center",children:(0,a.jsx)("svg",{ref:t})})}),(p||f)&&s&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsxs)("h4",{className:"font-semibold text-lg mb-2",children:[B(p||f),(0,a.jsxs)("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",s.kl_analysis.baseline.categories[p||f],")"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h5",{className:"font-medium text-gray-700 mb-2",children:["Most Similar Content (","kl"===n?"KL distance":"DEFLATE","):"]}),(()=>{let e="kl"===n?s.kl_analysis.baseline.distance_matrix:s.deflate_analysis.distance_matrix;return e&&e[p||f]?(0,a.jsx)("div",{className:"space-y-1",children:Object.entries(e[p||f]).filter(e=>{let[t]=e;return t!==(p||f)}).sort((e,t)=>{let[,s]=e,[,a]=t;return s-a}).slice(0,5).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm",children:B(t)}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:s.toFixed(3)})]},t)})}):null})()]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium text-gray-700 mb-2",children:"Properties:"}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:["kl"===n&&s.kl_analysis.baseline.entropy_values&&(0,a.jsxs)("div",{children:["Entropy: ",null===(e=s.kl_analysis.baseline.entropy_values[p||f])||void 0===e?void 0:e.toFixed(3)," bits"]}),"deflate"===n&&s.deflate_analysis.compression_benefits&&(0,a.jsxs)("div",{children:["Avg compression benefit: ",(Object.values(s.deflate_analysis.compression_benefits[p||f]).filter((e,t,a)=>Object.keys(s.deflate_analysis.compression_benefits[p||f])[t]!==(p||f)).reduce((e,t)=>e+t,0)/(Object.keys(s.deflate_analysis.compression_benefits).length-1)*100).toFixed(1),"%"]})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Legend"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Circle size:"})," Character entropy (larger = more diverse)"]}),(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Edge thickness:"})," Content similarity strength"]}),(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"US Presidents:"})," Historical figures and political content"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Countries:"})," Geographic and cultural information"]}),(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Distance:"})," Closer nodes = more similar content"]}),(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Cross-topic links:"})," Show president/country relationships"]})]})]})]})]})}},95670:(e,t,s)=>{"use strict";s.d(t,{Tooltip:()=>x});var a=s(58081),r=s(82149),l=s(11436),i=s(13150),n=s.n(i);function o(e,t){let s=[],r=e,l=0;for(;r;){let e=r.match(/!\[([^\]]*)\]\(([^)]+)\)/);if(e){let i=r.substring(0,e.index);i&&s.push(...c(i,"".concat(t,"-").concat(l++)));let o=e[1],d=e[2],x=d.startsWith("/")?"/problens-web".concat(d):d;s.push((0,a.jsx)("img",{src:x,alt:o,className:n()["tooltip-image"]},"".concat(t,"-img-").concat(l++))),r=r.substring(e.index+e[0].length);continue}s.push(...c(r,"".concat(t,"-").concat(l++)));break}return s}function c(e,t){let s=[],r=e,l=0;for(;r;){let e=r.match(/\*\*([^*]+)\*\*/);if(e){let i=r.substring(0,e.index);i&&s.push(...function(e,t){return e?[e]:[]}(i,"".concat(t,"-").concat(l++))),s.push((0,a.jsx)("strong",{className:n()["tooltip-strong"],children:e[1]},"".concat(t,"-bold-").concat(l++))),r=r.substring(e.index+e[0].length);continue}let i=r.match(/\*([^*]+)\*/);if(i){let e=r.substring(0,i.index);e&&s.push(...function(e,t){return e?[e]:[]}(e,"".concat(t,"-").concat(l++))),s.push((0,a.jsx)("em",{className:n()["tooltip-em"],children:i[1]},"".concat(t,"-italic-").concat(l++))),r=r.substring(i.index+i[0].length);continue}let o=r.match(/`([^`]+)`/);if(o){let e=r.substring(0,o.index);e&&s.push(...function(e,t){return e?[e]:[]}(e,"".concat(t,"-").concat(l++))),s.push((0,a.jsx)("code",{className:n()["tooltip-code"],children:o[1]},"".concat(t,"-code-").concat(l++))),r=r.substring(o.index+o[0].length);continue}let c=r.match(/\[([^\]]+)\]\(([^)]+)\)/);if(c){let e=r.substring(0,c.index);e&&s.push(...function(e,t){return e?[e]:[]}(e,"".concat(t,"-").concat(l++))),s.push((0,a.jsx)("a",{href:c[2],className:n()["tooltip-link"],target:"_blank",rel:"noopener noreferrer",children:c[1]},"".concat(t,"-link-").concat(l++))),r=r.substring(c.index+c[0].length);continue}s.push(...function(e,t){return e?[e]:[]}(r,"".concat(t,"-").concat(l++)));break}return s}function d(e,t){return e?[e]:[]}function x(e){let{children:t,tooltip:s,openDelay:i=100,closeDelay:c=300}=e,d=(0,r.useMemo)(()=>"string"==typeof s?function(e){let t=e.split("\n"),s=[];return t.forEach((e,t)=>{if(!e.trim()){s.push((0,a.jsx)("br",{},"br-".concat(t)));return}if(e.trim().startsWith("- ")){let r=o(e.trim().substring(2),t);s.push((0,a.jsxs)("div",{className:n()["tooltip-list-item"],children:["• ",r]},"list-".concat(t)));return}let r=o(e,t);s.push((0,a.jsx)("div",{className:n()["tooltip-line"],children:r},"line-".concat(t)))}),s}(s):s,[s]);return(0,a.jsxs)(l.bL,{openDelay:i,closeDelay:c,children:[(0,a.jsx)(l.l9,{asChild:!0,children:(0,a.jsx)("span",{className:n()["tooltip-trigger"],children:t})}),(0,a.jsx)(l.ZL,{children:(0,a.jsx)(l.UC,{className:n()["tooltip-content"],sideOffset:5,children:(0,a.jsx)("div",{className:n()["tooltip-paragraph"],children:d})})})]})}},96090:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081);s(82149);var r=s(10572);let l=e=>{let{id:t,format:s="number"}=e,{getAllEquations:l}=(0,r.t)(),i=l()[t];return i?"full"===s?(0,a.jsxs)("span",{children:["Equation (",i,")"]}):(0,a.jsxs)("span",{children:["(",i,")"]}):(0,a.jsxs)("span",{style:{color:"red"},children:["[Eq. ",t,"?]"]})}},97613:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(58081),r=s(82149);function l(){var e;let[t,s]=(0,r.useState)([]),[l,i]=(0,r.useState)(""),[n,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{var e;let t=await fetch("".concat("/problens-web","/compression_experiments/llm_compression_summary.json"));if(!t.ok)throw Error("Failed to load LLM summary data: ".concat(t.status));let a=await t.json(),r=[{modelName:"GPT-2",experiments:Object.values(a["gpt-2"]).map(e=>({name:e.name,filename:e.filename,description:e.description,totalChars:e.totalChars,dataPoints:e.dataPoints,averageBitsPerChar:e.averageBitsPerChar}))},{modelName:"Llama 4",experiments:Object.values(a["llama-4"]).map(e=>({name:e.name,filename:e.filename,description:e.description,totalChars:e.totalChars,dataPoints:e.dataPoints,averageBitsPerChar:e.averageBitsPerChar}))}];s(r),(null===(e=r[0])||void 0===e?void 0:e.experiments.length)>0&&i(r[0].experiments[0].filename),o(!1)}catch(e){console.error("Error loading LLM data:",e),d(e instanceof Error?e.message:"Unknown error"),o(!1)}})()},[]);let x=(e,t,s,a)=>{if(0===e.length)return"";let r=s/100,l=a/t,i="M ".concat(e[0].progressPercent*r," ").concat(a-e[0].bitsPerChar*l);for(let t=1;t<e.length;t++){let s=e[t].progressPercent*r,n=a-e[t].bitsPerChar*l;i+=" L ".concat(s," ").concat(n)}return i};if(n)return(0,a.jsx)("div",{className:"llm-progression-widget bg-white border border-gray-200 rounded-lg p-6 my-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-6"}),(0,a.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})});if(c)return(0,a.jsxs)("div",{className:"llm-progression-widget bg-white border border-red-200 rounded-lg p-6 my-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-red-600",children:"Error Loading LLM Data"}),(0,a.jsx)("p",{className:"text-red-500",children:c})]});let m=l?t.map(e=>({modelName:e.modelName,experiment:e.experiments.find(e=>e.filename===l)})).filter(e=>e.experiment):null,h=(null===(e=t[0])||void 0===e?void 0:e.experiments)||[];return(0,a.jsxs)("div",{className:"llm-progression-widget bg-white border border-gray-200 rounded-lg p-6 my-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"LLM Compression Progression"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Shows how compression efficiency (bits per character) changes as models process text from beginning to end. Data is smoothed using a rolling average over 1% of the text."}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Text Sample:"}),(0,a.jsx)("select",{value:l,onChange:e=>i(e.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:h.map(e=>(0,a.jsx)("option",{value:e.filename,children:e.name},e.filename))})]})]}),m&&m.length>0&&(0,a.jsxs)("div",{className:"space-y-6",children:[m.map((e,t)=>{let{modelName:s,experiment:r}=e;if(!r)return null;let l=Math.max(...r.dataPoints.map(e=>e.bitsPerChar)),i=Math.min(...r.dataPoints.map(e=>e.bitsPerChar)),n={top:20,right:30,bottom:40,left:50},o=1200-n.left-n.right,c=200-n.top-n.bottom,d=[];for(let e=0;e<=5;e++)d.push(i+e/5*(l-i));return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 pb-2",children:[(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:s}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[r.description," • ",r.totalChars.toLocaleString()," characters • Average: ",r.averageBitsPerChar.toFixed(3)," bits/char"]})]}),(0,a.jsx)("div",{className:"w-full -mx-2",children:(0,a.jsxs)("svg",{width:"100%",height:200,viewBox:"0 0 ".concat(1200," ").concat(200),className:"block",children:[(0,a.jsx)("rect",{x:n.left,y:n.top,width:o,height:c,fill:"#f9fafb",stroke:"#e5e7eb"}),d.map((e,t)=>{let s=n.top+c-(e-i)/(l-i)*c;return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:n.left,y1:s,x2:n.left+o,y2:s,stroke:"#e5e7eb",strokeDasharray:"2,2"}),(0,a.jsx)("text",{x:n.left-10,y:s+4,textAnchor:"end",fontSize:"12",fill:"#6b7280",children:e.toFixed(2)})]},t)}),[0,25,50,75,100].map(e=>{let t=n.left+e/100*o;return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:t,y1:n.top+c,x2:t,y2:n.top+c+5,stroke:"#6b7280"}),(0,a.jsxs)("text",{x:t,y:n.top+c+20,textAnchor:"middle",fontSize:"12",fill:"#6b7280",children:[e,"%"]})]},e)}),(0,a.jsx)("g",{transform:"translate(".concat(n.left,", ").concat(n.top,")"),children:(0,a.jsx)("path",{d:x(r.dataPoints,l-i,o,c),fill:"none",stroke:0===t?"#3b82f6":"#ef4444",strokeWidth:"2",transform:"translate(0, ".concat(-(i/(l-i))*c,")")})}),(0,a.jsx)("text",{x:600,y:195,textAnchor:"middle",fontSize:"14",fill:"#374151",fontWeight:"500",children:"Progress through text (%)"}),(0,a.jsx)("text",{x:15,y:100,textAnchor:"middle",fontSize:"14",fill:"#374151",fontWeight:"500",transform:"rotate(-90, 15, ".concat(100,")"),children:"Bits per character"})]})})]},s)}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-4 p-3 bg-gray-50 rounded",children:[(0,a.jsx)("strong",{children:"Interpretation:"})," Lower values indicate better compression. The smoothed line shows how model confidence/compression efficiency changes as context builds up through the text. Flat lines suggest consistent predictability, while varying lines indicate changing text structure or complexity."]})]})]})}},99819:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(58081),r=s(82149),l=s(39989);let i=()=>{let e=(0,r.useRef)(null),[t,s]=(0,r.useState)(null),[i,n]=(0,r.useState)("kl"),[o,c]=(0,r.useState)(!0),[d,x]=(0,r.useState)(null),[m,h]=(0,r.useState)(null),[u,p]=(0,r.useState)(null),[g,f]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),[j,v]=(0,r.useState)(null),[N,w]=(0,r.useState)(""),[k,_]=(0,r.useState)(!1),[M,C]=(0,r.useState)({}),[S,F]=(0,r.useState)(.063),[E,A]=(0,r.useState)(40),[L,D]=(0,r.useState)(250),[z,P]=(0,r.useState)(.6),[T,W]=(0,r.useState)(-800),[B,I]=(0,r.useState)(8),[R,O]=(0,r.useState)(4),q={country_france:"#93C5FD",country_japan:"#A5B4FC",country_brazil:"#C7D2FE",country_germany:"#BFDBFE",country_australia:"#7DD3FC",sport_football:"#FCA5A5",sport_basketball:"#F9A8D4",sport_tennis:"#FDA4AF",sport_golf:"#FBCFE8",sport_hockey:"#F0ABFC",animal_lion:"#86EFAC",animal_elephant:"#A7F3D0",animal_dolphin:"#6EE7B7",animal_zebra:"#BBF7D0",animal_giraffe:"#BEF264"},G=e=>e.startsWith("custom_")?"#C084FC":q[e]||"#666666",H=e=>e.startsWith("custom_")?["1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","\uD83D\uDD1F"][Object.keys(M).sort().indexOf(e)]||"\uD83D\uDD17":({country_france:"\uD83C\uDDEB\uD83C\uDDF7",country_japan:"\uD83C\uDDEF\uD83C\uDDF5",country_brazil:"\uD83C\uDDE7\uD83C\uDDF7",country_germany:"\uD83C\uDDE9\uD83C\uDDEA",country_australia:"\uD83C\uDDE6\uD83C\uDDFA",sport_football:"⚽",sport_basketball:"\uD83C\uDFC0",sport_tennis:"\uD83C\uDFBE",sport_golf:"⛳",sport_hockey:"\uD83C\uDFD2",animal_lion:"\uD83E\uDD81",animal_elephant:"\uD83D\uDC18",animal_dolphin:"\uD83D\uDC2C",animal_zebra:"\uD83E\uDD93",animal_giraffe:"\uD83E\uDD92"})[e]||e,K=e=>{if(e.startsWith("custom_")&&M[e]){let t=M[e].url;try{return new URL(t).hostname.replace("www.","")}catch(e){return"Custom URL"}}return e.replace("country_","").replace("sport_","").replace("animal_","").replace("_"," ").replace("hockey","Ice hockey").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")};(0,r.useEffect)(()=>{Q()},[]);let X=async(e,t)=>{let s=Math.random().toString(36).substring(2,12),a=await fetch("https://vaclavrozhon-probabilistic-lenses-widgets.hf.space/queue/join",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:[e,JSON.stringify(t)],event_data:null,fn_index:0,trigger_id:12,session_hash:s})});if(!a.ok)throw Error("Queue join failed: ".concat(a.status));return new Promise((e,t)=>{let a=new EventSource("https://vaclavrozhon-probabilistic-lenses-widgets.hf.space/queue/data?session_hash=".concat(s)),r=setTimeout(()=>{a.close(),t(Error("API processing timeout"))},6e4);a.onmessage=s=>{try{let l=JSON.parse(s.data);"process_completed"===l.msg?(clearTimeout(r),a.close(),l.output&&l.output.data?e(l.output.data[0]):t(Error("No output data"))):"process_errored"===l.msg&&(clearTimeout(r),a.close(),t(Error("API processing error")))}catch(e){}},a.onerror=e=>{clearTimeout(r),a.close(),t(Error("EventSource connection error"))}})},Y=async()=>{if(N&&t){_(!0);try{let e;let s="kl"===i?t.kl_analysis.baseline:t.generalized_divergence_analysis,a={};for(let e of s.languages)try{let t=await fetch("".concat("/problens-web","/data/three_categories/").concat(e,".txt"));t.ok&&(a[e]=await t.text())}catch(t){console.error("Failed to load ".concat(e,":"),t)}console.log("Processing URL:",N),console.log("Reference texts loaded:",Object.keys(a).length),console.log("Calling API for divergence calculations...");let r=await X(N,a);if("string"==typeof r)e=JSON.parse(r);else if("object"==typeof r)e=r;else throw Error("Unexpected result format");if(e.error)throw Error(e.error);let l="custom_".concat(Date.now()),n=Object.keys(M),o={kl:{},zip_div:{},zip_sim:{}};if(n.length>0)for(let e of(console.log("Calculating divergences vs ".concat(n.length," existing custom nodes")),n))try{let t;let s={[e]:M[e].content},a=await X(N,s);if(!(t="string"==typeof a?JSON.parse(a):a).error&&(t.kl_divergences&&(o.kl[e]=t.kl_divergences[e]),t.zip_divergences&&null!==t.zip_divergences[e]&&(o.zip_div[e]=t.zip_divergences[e]),t.zip_similarities&&null!==t.zip_similarities[e]&&(o.zip_sim[e]=t.zip_similarities[e]),t.compression_debug&&t.compression_debug.length>0)){let e={...t.compression_debug[0]};e.comparison="Custom URL vs Custom URL",o.debugInfo||(o.debugInfo=[]),o.debugInfo.push(e)}}catch(t){console.error("Failed to calculate divergence vs ".concat(e,":"),t)}let c={...M};for(let e of n)void 0!==o.kl[e]&&(c[e]={...c[e],kl:{...c[e].kl,[l]:o.kl[e]},zip_div:{...c[e].zip_div||{},[l]:o.zip_div[e]},zip_sim:{...c[e].zip_sim||{},[l]:o.zip_sim[e]}});c[l]={url:N,content:e.full_content||e.content_preview||"",kl:{...e.kl_divergences||{},...o.kl},zip_div:{...e.zip_divergences||{},...o.zip_div},zip_sim:{...e.zip_similarities||{},...o.zip_sim},debugInfo:[...e.compression_debug||[],...o.debugInfo||[]]},C(c),w("")}catch(e){console.error("Failed to add URL:",e),alert("Failed to add URL: "+e.message)}finally{_(!1)}}},Q=async()=>{try{let e;c(!0),x(null);try{if(!(e=await fetch("/data/three_categories_analysis.json")).ok)throw Error("Dev path failed")}catch(t){if(!(e=await fetch("/problens-web/data/three_categories_analysis.json")).ok)throw Error("Failed to fetch three categories data")}let t=await e.json();s(t)}catch(e){x("Failed to load three categories analysis data"),console.error(e)}finally{c(!1)}},U=(0,r.useCallback)(()=>{let s,a,r,n;if(!t||!e.current||("kl"===i?s=t.kl_analysis.baseline:"generalized"===i?s=t.generalized_divergence_analysis:"zip"===i&&t.zip_similarity_analysis&&(s=t.zip_similarity_analysis),!s))return;let o=s.languages,c=l.Ltv(e.current);c.selectAll("*").remove();let d=e.current.parentElement;if(!d)return;g?(a=window.innerWidth-40,r=window.innerHeight-120,n=Math.min(a/1e3,r/700)):(a=d.getBoundingClientRect().width-32,r=500,n=a/1e3);let x=50*n;c.attr("width",a).attr("height",r);let m=c.append("g").attr("transform","translate(".concat(x,", ").concat(x,")")),f=a/2,b=r/2,y=Math.min(a,r)/6,j={country:{x:f-y,y:b-y/2},sport:{x:f+y,y:b-y/2},animal:{x:f,y:b+y}},N=[...o.map((e,t)=>{var a;let r=s.categories[e],l=j[r];return{id:e,category:r,displayName:H(e),size:(null===(a=s.entropy_values)||void 0===a?void 0:a[e])||1,x:l.x+(Math.random()-.5)*5,y:l.y+(Math.random()-.5)*5}}),...Object.keys(M).map((e,t)=>({id:e,category:"country",displayName:H(e),size:1,x:f+(Math.random()-.5)*10,y:b+(Math.random()-.5)*10}))],w=[],k=N.map(e=>e.id);k.forEach(e=>{k.forEach(t=>{if(e<t){var a,r,l,n,o,c,d,x,m,h,u,p,g;let f=0,b=0;if(e.startsWith("custom_")||t.startsWith("custom_")){if(e.startsWith("custom_")&&!t.startsWith("custom_")){let s="kl"===i?null===(r=M[e])||void 0===r?void 0:r.kl:"zip"===i?null===(l=M[e])||void 0===l?void 0:l.zip_sim:null===(n=M[e])||void 0===n?void 0:n.zip_div;f=(null==s?void 0:s[t])||0}else if(!e.startsWith("custom_")&&t.startsWith("custom_")){let s="kl"===i?null===(o=M[t])||void 0===o?void 0:o.kl:"zip"===i?null===(c=M[t])||void 0===c?void 0:c.zip_sim:null===(d=M[t])||void 0===d?void 0:d.zip_div;f=(null==s?void 0:s[e])||0}else{let s="kl"===i?null===(x=M[e])||void 0===x?void 0:x.kl:"zip"===i?null===(m=M[e])||void 0===m?void 0:m.zip_sim:null===(h=M[e])||void 0===h?void 0:h.zip_div,a="kl"===i?null===(u=M[t])||void 0===u?void 0:u.kl:"zip"===i?null===(p=M[t])||void 0===p?void 0:p.zip_sim:null===(g=M[t])||void 0===g?void 0:g.zip_div;f=(null==s?void 0:s[t])||(null==a?void 0:a[e])||.5}}else f=(null===(a=s.distance_matrix[e])||void 0===a?void 0:a[t])||0;b=f,w.push({source:e,target:t,value:1,distance:f,adjustedDistance:b})}})});let _=[...w.map(e=>e.adjustedDistance)].sort((e,t)=>e-t);w.forEach(e=>{let t=0;for(let s=0;s<_.length;s++)_[s]<=e.adjustedDistance&&(t=s+1);e.adjustedDistance=t/_.length});let C=N.length,S=Math.max(C,R*C),F=w.sort((e,t)=>e.adjustedDistance-t.adjustedDistance).slice(0,S),A=Math.max(...F.map(e=>e.adjustedDistance)),D=F.map(e=>({source:e.source,target:e.target,value:A>0?1-e.adjustedDistance/A:1,distance:e.distance})),P=l.tXi(N).force("link",l.kJC(D).id(e=>e.id).distance(e=>(E+(1-e.value)*L)*n).strength(e=>Math.pow(e.value,2)*z)).force("charge",l.xJS().strength(T*n)).force("center",l.jTM((a-2*x)/2,(r-2*x)/2)).force("collision",l.eRw().radius(30+B*n)).force("boundary",()=>{N.forEach(e=>{if(void 0!==e.x&&void 0!==e.y){let t=a-2*x,s=r-2*x;e.x=Math.max(30,Math.min(t-30,e.x)),e.y=Math.max(30,Math.min(s-30,e.y))}})}),W=m.append("g").selectAll("line").data(D).join("line").attr("stroke","#999").attr("stroke-opacity",.6).attr("stroke-width",e=>6*Math.pow(e.value,1.5)*n),I=m.append("g").selectAll("circle").data(N).join("circle").attr("r",30).attr("fill",e=>G(e.id)).attr("stroke","#fff").attr("stroke-width",3).style("cursor","pointer"),O=m.append("g").selectAll("text").data(N).join("text").text(e=>e.displayName).attr("font-size","28px").attr("text-anchor","middle").attr("dy",8).style("pointer-events","none");I.on("mouseover",(t,s)=>{var a;h(s.id);let r=null===(a=e.current)||void 0===a?void 0:a.getBoundingClientRect();r&&v({x:t.clientX-r.left,y:t.clientY-r.top});let l=new Set([s.id]);D.forEach(e=>{e.source===s.id&&l.add(e.target),e.target===s.id&&l.add(e.source)}),I.style("opacity",e=>l.has(e.id)?1:.3),W.style("opacity",e=>e.source.id===s.id||e.target.id===s.id?.8:.1),O.style("opacity",e=>l.has(e.id)?1:.3)}).on("mousemove",t=>{var s;let a=null===(s=e.current)||void 0===s?void 0:s.getBoundingClientRect();a&&v({x:t.clientX-a.left,y:t.clientY-a.top})}).on("mouseout",()=>{h(null),v(null),I.style("opacity",1),W.style("opacity",.6),O.style("opacity",1)}).on("click",(e,t)=>{p(u===t.id?null:t.id)});let q=l.$Er().on("start",(e,t)=>{e.active||P.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}).on("drag",(e,t)=>{t.fx=e.x,t.fy=e.y}).on("end",(e,t)=>{e.active||P.alphaTarget(0),t.fx=null,t.fy=null});I.call(q),P.on("tick",()=>{W.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),I.attr("cx",e=>e.x).attr("cy",e=>e.y),O.attr("x",e=>e.x).attr("y",e=>e.y)})},[t,i,u,g,S,E,L,z,T,B,R,M]);if((0,r.useEffect)(()=>{U()},[U]),(0,r.useEffect)(()=>{var t;let s;if(!(null===(t=e.current)||void 0===t?void 0:t.parentElement))return;let a=e.current.parentElement,r=new ResizeObserver(()=>{cancelAnimationFrame(s),s=requestAnimationFrame(()=>U())});return r.observe(a),s=requestAnimationFrame(()=>U()),()=>{r.disconnect(),cancelAnimationFrame(s)}},[U]),(0,r.useEffect)(()=>{if(!g)return;let e=()=>{U()};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[g,U]),o)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-gray-600",children:"Loading three categories analysis..."})});if(d)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-red-600",children:d})});let V=g?"fixed inset-0 z-50 bg-white p-4 space-y-4 overflow-y-auto":"p-4 sm:p-6 bg-gray-50 rounded-lg space-y-4 w-full mx-auto";return(0,a.jsxs)("div",{className:V,children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800 text-center mb-4",children:"Clustering by divergence"}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 bg-gray-100 rounded-full px-4 py-2",children:[(0,a.jsx)("button",{onClick:()=>n("kl"),className:"text-sm font-medium px-3 py-1 rounded-full transition-colors ".concat("kl"===i?"bg-green-500 text-white":"text-gray-600 hover:text-gray-800"),children:"KL"}),(0,a.jsx)("button",{onClick:()=>n("generalized"),className:"text-sm font-medium px-3 py-1 rounded-full transition-colors ".concat("generalized"===i?"bg-green-500 text-white":"text-gray-600 hover:text-gray-800"),children:"ZIP-div"}),(0,a.jsx)("button",{onClick:()=>n("zip"),className:"text-sm font-medium px-3 py-1 rounded-full transition-colors ".concat("zip"===i?"bg-green-500 text-white":"text-gray-600 hover:text-gray-800"),children:"ZIP-sim"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>y(!b),className:"px-3 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors text-sm",children:[b?"Hide":"Show"," Controls"]}),(0,a.jsx)("button",{onClick:()=>f(!g),className:"px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors text-sm",children:g?"Exit Fullscreen":"Fullscreen"})]})]}),(0,a.jsxs)("p",{className:"text-center text-gray-600 text-sm",children:["Three categories of Wikipedia texts clustered by ","kl"===i?"KL divergence":"generalized"===i?"'ZIP divergence'":"Normalized Compression Distance (NCD)"]}),b&&(0,a.jsxs)("div",{className:"bg-orange-50 rounded-lg border border-orange-200 p-4",children:[(0,a.jsx)("h4",{className:"font-semibold mb-3",children:"Physics Parameters"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Edge Count: ",R,"n = ",t?R*(("kl"===i?t.kl_analysis.baseline.languages.length:t.generalized_divergence_analysis.languages.length)+Object.keys(M).length):0," edges"]}),(0,a.jsx)("input",{type:"range",min:"1",max:"8",step:"1",value:R,onChange:e=>O(parseInt(e.target.value)),className:"w-full"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Show the ",R,"\xd7n closest connections"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Base Spring: ",E,"px"]}),(0,a.jsx)("input",{type:"range",min:"20",max:"100",step:"5",value:E,onChange:e=>A(parseInt(e.target.value)),className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Max Spring: ",L,"px"]}),(0,a.jsx)("input",{type:"range",min:"150",max:"400",step:"25",value:L,onChange:e=>D(parseInt(e.target.value)),className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Link Strength: ",z.toFixed(1)]}),(0,a.jsx)("input",{type:"range",min:"0.1",max:"2.0",step:"0.1",value:z,onChange:e=>P(parseFloat(e.target.value)),className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Charge: ",T]}),(0,a.jsx)("input",{type:"range",min:"-1500",max:"-200",step:"50",value:T,onChange:e=>W(parseInt(e.target.value)),className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Collision: ",B,"px"]}),(0,a.jsx)("input",{type:"range",min:"2",max:"20",step:"2",value:B,onChange:e=>I(parseInt(e.target.value)),className:"w-full"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 overflow-hidden relative",children:[(0,a.jsx)("svg",{ref:e,className:"w-full"}),m&&j&&t&&(0,a.jsxs)("div",{className:"absolute bg-gray-900 text-white p-3 rounded-lg shadow-lg text-sm z-10 pointer-events-none",style:{left:j.x+10,top:j.y-10,maxWidth:"250px"},children:[(0,a.jsxs)("div",{className:"font-semibold mb-2",children:[H(m)," ",K(m)]}),(0,a.jsxs)("div",{className:"text-xs opacity-90",children:[(0,a.jsxs)("div",{className:"mb-1",children:["Closest by ","kl"===i?"KL divergence":"generalized"===i?"compression divergence":"NCD",":"]}),(()=>{var e;if(m.startsWith("custom_")&&M[m]){let e="kl"===i?M[m].kl:"zip"===i?M[m].zip_sim:M[m].zip_div;return e?(0,a.jsx)("div",{className:"space-y-0.5",children:Object.entries(e).filter(e=>{let[t,s]=e;return null!==s&&!isNaN(s)}).sort((e,t)=>{let[,s]=e,[,a]=t;return s-a}).slice(0,5).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,a.jsxs)("span",{children:[H(t)," ",K(t)]}),(0,a.jsx)("span",{className:"opacity-75",children:"zip"===i?"".concat(s.toFixed(3)):"generalized"===i?"".concat(s.toFixed(3)):s.toFixed(3)})]},t)})}):(0,a.jsx)("div",{className:"text-xs opacity-75",children:"No divergence data available"})}let s="kl"===i?t.kl_analysis.baseline.distance_matrix:"zip"===i?null===(e=t.zip_similarity_analysis)||void 0===e?void 0:e.distance_matrix:t.generalized_divergence_analysis.distance_matrix;return s&&s[m]?(0,a.jsx)("div",{className:"space-y-0.5",children:Object.entries(s[m]).filter(e=>{let[t]=e;return t!==m}).sort((e,t)=>{let[,s]=e,[,a]=t;return s-a}).slice(0,5).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,a.jsxs)("span",{children:[H(t)," ",K(t)]}),(0,a.jsx)("span",{className:"opacity-75",children:"zip"===i?"".concat(s.toFixed(3)):"generalized"===i?"".concat(s.toFixed(3)):s.toFixed(3)})]},t)})}):null})()]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center max-w-md mx-auto",children:[(0,a.jsx)("input",{type:"url",value:N,onChange:e=>w(e.target.value),placeholder:"https://en.wikipedia.org/wiki/Horse",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:k}),(0,a.jsx)("button",{onClick:Y,disabled:k||!N,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:k?"Adding...":"Add"})]})]})}}}]);