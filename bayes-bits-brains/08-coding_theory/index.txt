1:"$Sreact.fragment"
2:"$Sreact.strict_mode"
4:I[1063,[],""]
5:I[11483,[],""]
7:I[95125,[],"OutletBoundary"]
a:I[95125,[],"ViewportBoundary"]
c:I[95125,[],"MetadataBoundary"]
e:I[31954,[],""]
:HL["/bayes-bits-brains/_next/static/media/1f3fe8c6df3d47c1-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/bayes-bits-brains/_next/static/media/558ca1a6aa3cb55e-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/bayes-bits-brains/_next/static/css/dbd2812aeb31ae93.css","style"]
:HL["/bayes-bits-brains/_next/static/css/5eacd01f773eed7f.css","style"]
:HL["/bayes-bits-brains/_next/static/css/622677e989ec6b9c.css","style"]
:HL["/bayes-bits-brains/_next/static/css/8870e1553eaf2585.css","style"]
:HL["/bayes-bits-brains/_next/static/css/13ab9833c5f6a889.css","style"]
0:{"P":null,"b":"G9LV8pwmmB789ZWVZT0j8","p":"/bayes-bits-brains","c":["","08-coding_theory",""],"i":false,"f":[[["",{"children":[["path","08-coding_theory","c"],{"children":["__PAGE__",{}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/bayes-bits-brains/_next/static/css/dbd2812aeb31ae93.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/bayes-bits-brains/_next/static/css/5eacd01f773eed7f.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","2",{"rel":"stylesheet","href":"/bayes-bits-brains/_next/static/css/622677e989ec6b9c.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","3",{"rel":"stylesheet","href":"/bayes-bits-brains/_next/static/css/8870e1553eaf2585.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","4",{"rel":"stylesheet","href":"/bayes-bits-brains/_next/static/css/13ab9833c5f6a889.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","className":"__variable_871a3d __variable_e566b6","children":["$","$2",null,{"children":[["$","body",null,{"className":"antialiased","children":"$L3"}],"$undefined"]}]}]]}],{"children":[["path","08-coding_theory","c"],["$","$1","c",{"children":[null,["$","$L4",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L6","$undefined",null,["$","$L7",null,{"children":["$L8","$L9",null]}]]}],{},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","snQQzU6YgJLY3ys-jgs63",{"children":[["$","$La",null,{"children":"$Lb"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],["$","$Lc",null,{"children":"$Ld"}]]}],false]],"m":"$undefined","G":["$e","$undefined"],"s":false,"S":true}
f:I[79444,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"default"]
10:I[60544,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"default"]
11:I[5340,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"default"]
12:I[47950,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],""]
3:["$","div",null,{"className":"min-h-screen flex flex-col bg-white","children":[["$","$Lf",null,{}],["$","$L10",null,{}],["$","div",null,{"className":"flex-1","children":[["$","$L11",null,{"className":"xl:w-60 lg:w-52 hidden lg:block fixed top-16 bottom-0 pt-16 text-base","style":{"left":"var(--sidebar-offset)"}}],["$","main",null,{"className":"Page_main__cWiGN max-w-[var(--content-width)] mx-auto px-4 pt-12 pb-8","children":["$","$L4",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","div",null,{"className":"min-h-screen flex items-center justify-center bg-gray-50","children":["$","div",null,{"className":"max-w-md w-full text-center","children":[["$","h1",null,{"className":"text-6xl font-bold text-gray-900 mb-4","children":"404"}],["$","h2",null,{"className":"text-2xl font-semibold text-gray-700 mb-4","children":"Page Not Found"}],["$","p",null,{"className":"text-gray-600 mb-8","children":"The page you're looking for doesn't exist or has been moved."}],["$","$L12",null,{"href":"/","className":"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors","children":"Go Home"}]]}]}],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]]}],["$","footer",null,{"className":"mt-4","children":["$","div",null,{"className":"max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8","children":["$","div",null,{"className":"pt-4 pb-12","style":{"marginLeft":"calc(max((100% - var(--content-width)) / 2 + 1rem, 0rem))"},"children":["$","p",null,{"className":"text-base text-neutral-500"}]}]}]}]]}]
13:I[10572,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"EquationProvider"]
14:I[36185,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"CitationsProvider"]
15:I[44464,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"FootnotesProvider"]
16:I[75154,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"default"]
17:I[61803,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"default"]
18:I[26949,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"default"]
19:I[96090,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"default"]
1a:I[50749,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"default"]
1b:I[44464,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"Footnote"]
1c:I[23229,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"default"]
1d:I[62808,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"default"]
1e:I[40612,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"default"]
1f:I[35652,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"default"]
20:I[39661,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"default"]
21:I[44464,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"Footnotes"]
22:I[36185,["683","static/chunks/45233be0-cba42a3c5454822d.js","338","static/chunks/4bbad5ef-2b7eebeba98386a5.js","932","static/chunks/f885ef2c-649d91f122a11dff.js","755","static/chunks/0133708f-65d46efc97e0f93d.js","269","static/chunks/91c6c604-01c8ba6fb8219fe8.js","950","static/chunks/950-e6e0e01ad2983f53.js","390","static/chunks/390-7b8633ed8924eb08.js","582","static/chunks/582-781968895face3a7.js","180","static/chunks/app/%5B...path%5D/page-4c83be7a70b80924.js"],"References"]
6:["$","$L13",null,{"children":["$","$L14",null,{"data":{},"children":["$","$L15",null,{"children":["$","article",null,{"className":"Page_article__A_Nud prose prose-neutral max-w-none","children":[[["$","h1",null,{"children":"Coding Theory"}],"\n",["$","p",null,{"children":["Here's one of my favorite science stories. Norbert Wiener was a professor at MIT, known for roaming the corridors and stopping in offices of other researchers. Once, he stopped in the office of Robert Fano, said: \"You know, information is entropy\", and walked out. Fano started to think about what that meant and a few months later, on a train ride to a meeting, he finally worked it out. At that meeting, a guy named Claude Shannon presented an early version of what later became one of the most cited papers, ever - ",["$","$L16",null,{"href":"https://en.wikipedia.org/wiki/A_Mathematical_Theory_of_Communication","children":"The mathematical theory of communication"}],". The topic of the paper was pretty much the same as what Fano worked out: What does the formula for entropy has to do with storing data on a computer. Shannon and Fano hitted it off the next day and information theory was born."]}],"\n",["$","p",null,{"children":"I will explain this connection and we will see what intuitions about large language models it gives us."}],"\n",["$","div",null,{"className":"my-6 rounded-lg overflow-hidden bg-amber-50 border border-amber-200","children":[["$","div",null,{"className":"px-4 py-3 border-b border-amber-200","children":["$","div",null,{"className":"font-medium text-base text-amber-800 flex items-center gap-2","children":[["$","span",null,{"className":"text-lg","children":"💡"}],"If there is one thing you remember from this chapter..."]}]}],["$","div",null,{"className":"px-4 py-3 text-base leading-relaxed text-gray-700","children":["$","p",null,{"children":"Entropy is the unbeatable lower bound for lossless compression, if we treat letters independently."}]}]]}],"\n",["$","h2",null,{"children":"Code intro"}],"\n",["$","p",null,{"children":["Say we've got a long DNA string built from letters ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mo",null,{"stretchy":"false","children":"{"}],["$","mi",null,{"mathvariant":"sans-serif","children":"A"}],["$","mo",null,{"separator":"true","children":","}],["$","mi",null,{"mathvariant":"sans-serif","children":"C"}],["$","mo",null,{"separator":"true","children":","}],["$","mi",null,{"mathvariant":"sans-serif","children":"G"}],["$","mo",null,{"separator":"true","children":","}],["$","mi",null,{"mathvariant":"sans-serif","children":"T"}],["$","mo",null,{"stretchy":"false","children":"}"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\{\\mathsf{A},\\mathsf{C},\\mathsf{G},\\mathsf{T}\\}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mopen","children":"{"}],["$","span",null,{"className":"mord mathsf","children":"A"}],["$","span",null,{"className":"mpunct","children":","}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord mathsf","children":"C"}],["$","span",null,{"className":"mpunct","children":","}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord mathsf","children":"G"}],["$","span",null,{"className":"mpunct","children":","}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord mathsf","children":"T"}],["$","span",null,{"className":"mclose","children":"}"}]]}]}]]}],". We want to store it using as little disk space as possible. Here's a simple plan: We assign a binary code for each letter and encode the string using that code."]}],"\n",["$","p",null,{"children":["For example, we can use ",["$","$L17",null,{"math":"\\mathsf{A} \\rightarrow \\textsf{00}, \\mathsf{C} \\rightarrow \\textsf{01}, \\mathsf{G} \\rightarrow \\textsf{10}, \\mathsf{T} \\rightarrow \\textsf{11} "}],". The string gets stored using just 2 bits per letter. Done!"]}],"\n",["$","p",null,{"children":["Can we do better? Sometimes, yes! Here's a riddle: In the following widget, try to build a code that encodes the following string ",["$","$L17",null,{"math":"\\mathsf{AACATACG}"}]," with just 1.75 bits per letter on average."]}],"\n",["$","p",null,{"children":["While playing, notice that whenever you use a short code name to a letter, e.g. ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"mathvariant":"sans-serif","children":"A"}],["$","mo",null,{"children":"→"}],["$","mtext",null,{"mathvariant":"sans-serif","children":"0"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\mathsf{A} \\rightarrow \\textsf{0}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":[["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord mathsf","children":"A"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel","children":"→"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6556em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord textsf","children":"0"}]}]]}]]}]]}],", no other letter can get a code name starting with the same code name ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mtext",null,{"mathvariant":"sans-serif","children":"0"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\textsf{0}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6556em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord textsf","children":"0"}]}]]}]}]]}],". The reason is that otherwise, the resulting code wouldn't sometimes be decodable. E.g., if you use code names ",["$","$L17",null,{"math":"\\mathsf{A} \\rightarrow \\textsf{0}"}]," and ",["$","$L17",null,{"math":"\\mathsf{C} \\rightarrow \\textsf{00}"}],", the message \"",["$","$L17",null,{"math":"\\textsf{00}"}],"\" has two meanings."]}],"\n",["$","$L18",null,{}],"\n",["$","p",null,{"children":"."}],"\n",["$","p",null,{"children":"."}],"\n",["$","p",null,{"children":"SPOILER"}],"\n",["$","p",null,{"children":"."}],"\n",["$","p",null,{"children":"."}],"\n",["$","p",null,{"children":["Here's the solution: ",["$","$L17",null,{"math":"\\mathsf{A} \\rightarrow \\textsf{0}, \\mathsf{C} \\rightarrow \\textsf{10}, \\mathsf{G} \\rightarrow \\textsf{110}, \\mathsf{T} \\rightarrow \\textsf{111} "}],".\nSince the letter frequencies in the text are ",["$","$L17",null,{"math":"\\frac12, \\frac14, \\frac18, \\frac18"}],", this encoding only uses"]}],"\n",["$","$L17",null,{"displayMode":true,"id":"code-example","math":"\\frac12 \\cdot 1 + \\frac14 \\cdot 2 + \\frac18 \\cdot 3 + \\frac18 \\cdot 3 = 1.75"}],"\n",["$","p",null,{"children":"bits per letter."}],"\n",["$","p",null,{"children":["OK, using shorter codes for more frequent letters makes sense, but what's the best way to do this? Coding theory knows the answer. Roughly speaking, it tells us to ",["$","strong",null,{"children":["try to give a letter with frequency ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","msub",null,{"children":[["$","mi",null,{"children":"p"}],["$","mi",null,{"children":"i"}]]}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"p_i"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.3117em"},"children":["$","span",null,{"style":{"top":"-2.55em","marginLeft":"0em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mathnormal mtight","children":"i"}]}]]}]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.15em"},"children":["$","span",null,{}]}]}]]}]}]]}]]}]}]]}]," a code-name of length ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"log"}],["$","mo",null,{"children":"⁡"}],["$","mn",null,{"children":"1"}],["$","mi",null,{"mathvariant":"normal","children":"/"}],["$","msub",null,{"children":[["$","mi",null,{"children":"p"}],["$","mi",null,{"children":"i"}]]}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\log 1/p_i"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mop","children":["lo",["$","span",null,{"style":{"marginRight":"0.01389em"},"children":"g"}]]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord","children":"1/"}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.3117em"},"children":["$","span",null,{"style":{"top":"-2.55em","marginLeft":"0em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mathnormal mtight","children":"i"}]}]]}]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.15em"},"children":["$","span",null,{}]}]}]]}]}]]}]]}]}]]}]]}],"."]}],"\n",["$","p",null,{"children":["For example, looking at ",["$","$L19",null,{"id":"code-example"}],", you can rewrite the left-hand side as:"]}],"\n",["$","$L17",null,{"displayMode":true,"id":"code-example2","math":" \\frac12 \\cdot \\log \\frac{1}{1/2} + \\frac14 \\cdot \\log \\frac{1}{1/4} + \\frac18 \\cdot \\log \\frac{1}{1/8} + \\frac18 \\cdot \\log\\frac{1}{1/8}. "}],"\n",["$","p",null,{"children":["Every letter with frequency ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"p"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"p"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathnormal","children":"p"}]]}]}]]}]," got code-name of length exactly ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"log"}],["$","mo",null,{"children":"⁡"}],["$","mn",null,{"children":"1"}],["$","mi",null,{"mathvariant":"normal","children":"/"}],["$","mi",null,{"children":"p"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\log 1/p"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mop","children":["lo",["$","span",null,{"style":{"marginRight":"0.01389em"},"children":"g"}]]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord","children":"1/"}],["$","span",null,{"className":"mord mathnormal","children":"p"}]]}]}]]}],"! Notice that for general strings of length ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"N"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"N"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6833em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.10903em"},"children":"N"}]]}]}]]}],", the length of codes satisfying the ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"p"}],["$","mo",null,{"children":"→"}],["$","mi",null,{"children":"log"}],["$","mo",null,{"children":"⁡"}],["$","mn",null,{"children":"1"}],["$","mi",null,{"mathvariant":"normal","children":"/"}],["$","mi",null,{"children":"p"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"p \\rightarrow \\log 1/p"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":[["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel","children":"→"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mop","children":["lo",["$","span",null,{"style":{"marginRight":"0.01389em"},"children":"g"}]]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord","children":"1/"}],["$","span",null,{"className":"mord mathnormal","children":"p"}]]}]]}]]}]," rule is this:"]}],"\n",["$","$L17",null,{"displayMode":true,"math":"N \\cdot \\sum_{i = 1}^k p_i \\cdot \\log \\frac{1}{p_i} = N \\cdot H(p)."}],"\n",["$","p",null,{"children":["That is, if you manage to construct a code with ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"p"}],["$","mo",null,{"children":"→"}],["$","mi",null,{"children":"log"}],["$","mo",null,{"children":"⁡"}],["$","mn",null,{"children":"1"}],["$","mi",null,{"mathvariant":"normal","children":"/"}],["$","mi",null,{"children":"p"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"p \\rightarrow \\log 1/p"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":[["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel","children":"→"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mop","children":["lo",["$","span",null,{"style":{"marginRight":"0.01389em"},"children":"g"}]]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord","children":"1/"}],["$","span",null,{"className":"mord mathnormal","children":"p"}]]}]]}]]}],", you spend ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"H"}],["$","mo",null,{"stretchy":"false","children":"("}],["$","mi",null,{"children":"p"}],["$","mo",null,{"stretchy":"false","children":")"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"H(p)"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.08125em"},"children":"H"}],["$","span",null,{"className":"mopen","children":"("}],["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"mclose","children":")"}]]}]}]]}]," bits per letter on average."]}],"\n",["$","p",null,{"children":["If we implement our ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"p"}],["$","mo",null,{"children":"→"}],["$","mi",null,{"children":"log"}],["$","mo",null,{"children":"⁡"}],["$","mn",null,{"children":"1"}],["$","mi",null,{"mathvariant":"normal","children":"/"}],["$","mi",null,{"children":"p"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"p \\rightarrow \\log 1/p"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":[["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel","children":"→"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mop","children":["lo",["$","span",null,{"style":{"marginRight":"0.01389em"},"children":"g"}]]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord","children":"1/"}],["$","span",null,{"className":"mord mathnormal","children":"p"}]]}]]}]]}],"-rule-of-thumb with the most direct algorithm possible, we get what's known as Shannon's code. This code sorts the letter-frequencies down from the largest one, and assigns to each letter of frequency ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"p"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"p"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathnormal","children":"p"}]]}]}]]}]," a code of length ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mo",null,{"stretchy":"false","children":"⌈"}],["$","mi",null,{"children":"log"}],["$","mo",null,{"children":"⁡"}],["$","mfrac",null,{"children":[["$","mn",null,{"children":"1"}],["$","mi",null,{"children":"p"}]]}],["$","mo",null,{"stretchy":"false","children":"⌉"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\lceil \\log \\frac{1}{p} \\rceil"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1.3262em","verticalAlign":"-0.4811em"}}],["$","span",null,{"className":"mopen","children":"⌈"}],["$","span",null,{"className":"mop","children":["lo",["$","span",null,{"style":{"marginRight":"0.01389em"},"children":"g"}]]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mopen nulldelimiter"}],["$","span",null,{"className":"mfrac","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.8451em"},"children":[["$","span",null,{"style":{"top":"-2.655em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"3em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mtight","children":["$","span",null,{"className":"mord mathnormal mtight","children":"p"}]}]}]]}],["$","span",null,{"style":{"top":"-3.23em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"3em"}}],["$","span",null,{"className":"frac-line","style":{"borderBottomWidth":"0.04em"}}]]}],["$","span",null,{"style":{"top":"-3.394em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"3em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mtight","children":["$","span",null,{"className":"mord mtight","children":"1"}]}]}]]}]]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.4811em"},"children":["$","span",null,{}]}]}]]}]}],["$","span",null,{"className":"mclose nulldelimiter"}]]}],["$","span",null,{"className":"mclose","children":"⌉"}]]}]}]]}]," (we round up because we can't have a code name with 1.5 bits). Here it is for English alphabet:"]}],"\n",["$","$L1a",null,{}],"\n",["$","p",null,{"children":["You can notice that the number of bits per letter (also called ",["$","em",null,{"children":"rate"}],") is a bit north of the entropy of the underlying distribution. This is because of the rounding ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"log"}],["$","mo",null,{"children":"⁡"}],["$","mn",null,{"children":"1"}],["$","mi",null,{"mathvariant":"normal","children":"/"}],["$","mi",null,{"children":"p"}],["$","mo",null,{"children":"→"}],["$","mo",null,{"stretchy":"false","children":"⌈"}],["$","mi",null,{"children":"log"}],["$","mo",null,{"children":"⁡"}],["$","mn",null,{"children":"1"}],["$","mi",null,{"mathvariant":"normal","children":"/"}],["$","mi",null,{"children":"p"}],["$","mo",null,{"stretchy":"false","children":"⌉"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\log 1/p \\rightarrow \\lceil \\log 1/p \\rceil"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":[["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mop","children":["lo",["$","span",null,{"style":{"marginRight":"0.01389em"},"children":"g"}]]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord","children":"1/"}],["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel","children":"→"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mopen","children":"⌈"}],["$","span",null,{"className":"mop","children":["lo",["$","span",null,{"style":{"marginRight":"0.01389em"},"children":"g"}]]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord","children":"1/"}],["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"mclose","children":"⌉"}]]}]]}]]}],". For example, if there is a letter with frequency ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"p"}],["$","mo",null,{"children":"="}],["$","mn",null,{"children":"0.49"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"p = 0.49"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":[["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel","children":"="}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6444em"}}],["$","span",null,{"className":"mord","children":"0.49"}]]}]]}]]}],", we would like to give it a code name of length ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"log"}],["$","mo",null,{"children":"⁡"}],["$","mfrac",null,{"children":[["$","mn",null,{"children":"1"}],["$","mn",null,{"children":"0.49"}]]}],["$","mo",null,{"children":"≈"}],["$","mn",null,{"children":"1.03"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\log \\frac{1}{0.49} \\approx 1.03"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":[["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1.1901em","verticalAlign":"-0.345em"}}],["$","span",null,{"className":"mop","children":["lo",["$","span",null,{"style":{"marginRight":"0.01389em"},"children":"g"}]]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mopen nulldelimiter"}],["$","span",null,{"className":"mfrac","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.8451em"},"children":[["$","span",null,{"style":{"top":"-2.655em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"3em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mtight","children":["$","span",null,{"className":"mord mtight","children":"0.49"}]}]}]]}],["$","span",null,{"style":{"top":"-3.23em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"3em"}}],["$","span",null,{"className":"frac-line","style":{"borderBottomWidth":"0.04em"}}]]}],["$","span",null,{"style":{"top":"-3.394em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"3em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mtight","children":["$","span",null,{"className":"mord mtight","children":"1"}]}]}]]}]]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.345em"},"children":["$","span",null,{}]}]}]]}]}],["$","span",null,{"className":"mclose nulldelimiter"}]]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel","children":"≈"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6444em"}}],["$","span",null,{"className":"mord","children":"1.03"}]]}]]}]]}],". Too bad that code names have to be integers and Shannon's code assigns it a code name of length ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mn",null,{"children":"2"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"2"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6444em"}}],["$","span",null,{"className":"mord","children":"2"}]]}]}]]}],". As a general rule, Shannon's code can use up to 1 bit per letter more than what's the entropy. ",["$","$L1b",null,{"children":"Try to work out the details of what's happening in Shannon's code. Especially: Why does Shannon's algorithm of assigning letters never runs out of available code names? "}]]}],"\n",["$","p",null,{"children":["Unfortunately, there are situations where Shannon's code is really almost 1 bit worse than the entropy. Take a string that uses just two characters ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"mathvariant":"sans-serif","children":"A"}],["$","mo",null,{"separator":"true","children":","}],["$","mi",null,{"mathvariant":"sans-serif","children":"B"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\mathsf{A}, \\mathsf{B}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.8889em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathsf","children":"A"}],["$","span",null,{"className":"mpunct","children":","}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord mathsf","children":"B"}]]}]}]]}],", but the frequency of ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"mathvariant":"sans-serif","children":"B"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\mathsf{B}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord mathsf","children":"B"}]]}]}]]}]," is close to zero. Then, the entropy is close to zero, but Shannon can't do better than 1 bit per letter."]}],"\n",["$","h3",null,{"children":["The source coding theorem ",["$","a",null,{"id":"source-coding"}]]}],"\n",["$","p",null,{"children":["The ",["$","$L16",null,{"href":"https://en.wikipedia.org/wiki/Shannon%27s_source_coding_theorem","children":"source coding theorem"}]," is the most important theorem in coding theory. It basically says that on one hand, there are codes that get very close to the entropy bound. On the other hand, you can't beat that bound."]}],"\n",["$","p",null,{"children":["Here's the setup of the theorem more precisely. We model texts like this: There is a source that has a distribution over letters. This source keeps sampling letters independently, and sends them to us. This goes on for a long time, say ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"n"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"n"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.4306em"}}],["$","span",null,{"className":"mord mathnormal","children":"n"}]]}]}]]}]," steps; our goal is to save some binary string to the memory so that later on, we can recover from that string what ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"n"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"n"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.4306em"}}],["$","span",null,{"className":"mord mathnormal","children":"n"}]]}]}]]}]," letters the source sent."]}],"\n",["$","p",null,{"children":["This setup with the source sampling independent letters models that we only want to think about the problem of giving code names to letters based on frequencies. We are not trying to use the ",["$","em",null,{"children":"correlations"}]," like '",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"mathvariant":"sans-serif","children":"t"}],["$","mi",null,{"mathvariant":"sans-serif","children":"h"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\mathsf{th}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord","children":["$","span",null,{"className":"mord mathsf","children":"th"}]}]]}]}]]}]," often follows by ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"mathvariant":"sans-serif","children":"e"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\mathsf{e}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.4444em"}}],["$","span",null,{"className":"mord mathsf","children":"e"}]]}]}]]}],"' to get better compression."]}],"\n",["$","p",null,{"children":["The source coding theorem says that first, there's a way to store the emitted string, using close to ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"H"}],["$","mo",null,{"stretchy":"false","children":"("}],["$","mi",null,{"children":"p"}],["$","mo",null,{"stretchy":"false","children":")"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"H(p)"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.08125em"},"children":"H"}],["$","span",null,{"className":"mopen","children":"("}],["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"mclose","children":")"}]]}]}]]}]," bits per letter. We have come close to that bound above - Shannon's code is only 1 bit worse than entropy. But with more complicated codes, we can even get rid of this 1-bit slack (at the expense that the code is no longer as simple as mapping single letters to code names)."]}],"\n",["$","$L1c",null,{"advanced":true,"headline":"More on better codes","children":[["$","a",null,{"id":"better"}],["$","p",null,{"children":["Think of constructing Shannon's code not for every letter, but for every ",["$","em",null,{"children":"pair of letters"}]," (i.e., the alphabet grows from ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mn",null,{"children":"26"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"26"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6444em"}}],["$","span",null,{"className":"mord","children":"26"}]]}]}]]}]," to ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","msup",null,{"children":[["$","mn",null,{"children":"26"}],["$","mn",null,{"children":"2"}]]}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"26^2"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.8141em"}}],["$","span",null,{"className":"mord","children":"2"}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord","children":"6"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t","children":["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.8141em"},"children":["$","span",null,{"style":{"top":"-3.063em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mtight","children":"2"}]}]]}]}]}]}]}]]}]]}]}]]}],"). If Shannon's code loses 1 bit per encoded letter-pair, it means it loses ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mn",null,{"children":"1"}],["$","mi",null,{"mathvariant":"normal","children":"/"}],["$","mn",null,{"children":"2"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"1/2"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mord","children":"1/2"}]]}]}]]}]," bits per actual letter! Doing this trick not for a pair of letters but a tuple of several letters can bring us arbitrarily close to a code that spends ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"H"}],["$","mo",null,{"stretchy":"false","children":"("}],["$","mi",null,{"children":"p"}],["$","mo",null,{"stretchy":"false","children":")"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"H(p)"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.08125em"},"children":"H"}],["$","span",null,{"className":"mopen","children":"("}],["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"mclose","children":")"}]]}]}]]}]," bits per letter."]}],["$","p",null,{"children":["Doing this is not very practical, since the alphabet gets very larger pretty soon (",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","msup",null,{"children":[["$","mn",null,{"children":"26"}],["$","mn",null,{"children":"2"}]]}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"26^2"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.8141em"}}],["$","span",null,{"className":"mord","children":"2"}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord","children":"6"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t","children":["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.8141em"},"children":["$","span",null,{"style":{"top":"-3.063em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mtight","children":"2"}]}]]}]}]}]}]}]]}]]}]}]]}]," for pairs, ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","msup",null,{"children":[["$","mn",null,{"children":"26"}],["$","mn",null,{"children":"3"}]]}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"26^3"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.8141em"}}],["$","span",null,{"className":"mord","children":"2"}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord","children":"6"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t","children":["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.8141em"},"children":["$","span",null,{"style":{"top":"-3.063em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mtight","children":"3"}]}]]}]}]}]}]}]]}]]}]}]]}]," for triples, ...). Check out ",["$","$L16",null,{"href":"https://en.wikipedia.org/wiki/Arithmetic_coding","children":"arithmetic coding"}]," for a practical code approaching the entropy limit."]}]]}],"\n",["$","p",null,{"children":["The second part of the theorem says that we can't beat the rate ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"H"}],["$","mo",null,{"stretchy":"false","children":"("}],["$","mi",null,{"children":"p"}],["$","mo",null,{"stretchy":"false","children":")"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"H(p)"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.08125em"},"children":"H"}],["$","span",null,{"className":"mopen","children":"("}],["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"mclose","children":")"}]]}]}]]}],". Details for that in the expand box."]}],"\n",["$","$L1c",null,{"advanced":true,"headline":"Beating entropy is impossible","children":[["$","p",null,{"children":["I will prove that codes that simply map each letter to a code-name can't beat ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"H"}],["$","mo",null,{"stretchy":"false","children":"("}],["$","mi",null,{"children":"p"}],["$","mo",null,{"stretchy":"false","children":")"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"H(p)"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.08125em"},"children":"H"}],["$","span",null,{"className":"mopen","children":"("}],["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"mclose","children":")"}]]}]}]]}],".\nTo see why, we will have to understand ",["$","$L16",null,{"href":"https://en.wikipedia.org/wiki/Kraft%E2%80%93McMillan_inequality","children":"Kraft's inequality"}],". This inequality says that if we work with alphabet with ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"k"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"k"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.03148em"},"children":"k"}]]}]}]]}]," letters and we build a code with words of lengths ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","msub",null,{"children":[["$","mi",null,{"mathvariant":"normal","children":"ℓ"}],["$","mn",null,{"children":"1"}]]}],["$","mo",null,{"separator":"true","children":","}],["$","mo",null,{"children":"…"}],["$","mo",null,{"separator":"true","children":","}],["$","msub",null,{"children":[["$","mi",null,{"mathvariant":"normal","children":"ℓ"}],["$","mi",null,{"children":"k"}]]}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\ell_1, \\dots, \\ell_k"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.8889em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord","children":"ℓ"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.3011em"},"children":["$","span",null,{"style":{"top":"-2.55em","marginLeft":"0em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mtight","children":"1"}]}]]}]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.15em"},"children":["$","span",null,{}]}]}]]}]}]]}],["$","span",null,{"className":"mpunct","children":","}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"minner","children":"…"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mpunct","children":","}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord","children":"ℓ"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.3361em"},"children":["$","span",null,{"style":{"top":"-2.55em","marginLeft":"0em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mathnormal mtight","style":{"marginRight":"0.03148em"},"children":"k"}]}]]}]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.15em"},"children":["$","span",null,{}]}]}]]}]}]]}]]}]}]]}],", then it has to be the case that"]}],["$","$L17",null,{"id":"kraft","displayMode":true,"math":"\\sum_{i = 1}^k 2^{- \\ell_i} \\le 1. "}],["$","p",null,{"children":["To understand this inequality, go back to widgets above - whenever we give a code-name to a letter, like ",["$","$L17",null,{"math":"\\mathsf{e} \\rightarrow \\textsf{000}"}],", we can no longer use codewords that start with ",["$","$L17",null,{"math":"\\textsf{000}"}]," for other letters, since that would create clashes. The node with ",["$","$L17",null,{"math":"\\textsf{000}"}]," has to be a ",["$","em",null,{"children":"leaf"}],". Some leaves 'take more space' than others - for example, using code name of ",["$","$L17",null,{"math":"\\textsf{0}"}]," intuitively kills off half of the space of possibilities."]}],["$","p",null,{"children":["A bit more formally, imagine continuing the full binary tree up to some very large depth ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"N"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"N"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6833em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.10903em"},"children":"N"}]]}]}]]}],". Then a code word of length ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","msub",null,{"children":[["$","mi",null,{"mathvariant":"normal","children":"ℓ"}],["$","mi",null,{"children":"i"}]]}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\ell_i"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.8444em","verticalAlign":"-0.15em"}}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord","children":"ℓ"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.3117em"},"children":["$","span",null,{"style":{"top":"-2.55em","marginLeft":"0em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mathnormal mtight","children":"i"}]}]]}]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.15em"},"children":["$","span",null,{}]}]}]]}]}]]}]]}]}]]}]," is above ",["$","$L17",null,{"math":"2^{N - \\ell_i}"}]," of nodes at depth ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"N"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"N"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6833em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.10903em"},"children":"N"}]]}]}]]}],". Since different code words cover disjoint intervals of depth-",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"N"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"N"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6833em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.10903em"},"children":"N"}]]}]}]]}]," nodes, and there are ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","msup",null,{"children":[["$","mn",null,{"children":"2"}],["$","mi",null,{"children":"N"}]]}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"2^N"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.8413em"}}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord","children":"2"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t","children":["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.8413em"},"children":["$","span",null,{"style":{"top":"-3.063em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mathnormal mtight","style":{"marginRight":"0.10903em"},"children":"N"}]}]]}]}]}]}]}]]}]]}]}]]}]," nodes at depth ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"N"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"N"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6833em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.10903em"},"children":"N"}]]}]}]]}],", it has to be the case for any valid code that"]}],["$","$L17",null,{"displayMode":true,"math":"\\sum_{i = 1}^k 2^{N - \\ell_i} \\le 2^N"}],["$","p",null,{"children":["Divide by ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","msup",null,{"children":[["$","mn",null,{"children":"2"}],["$","mi",null,{"children":"N"}]]}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"2^N"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.8413em"}}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord","children":"2"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t","children":["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.8413em"},"children":["$","span",null,{"style":{"top":"-3.063em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mathnormal mtight","style":{"marginRight":"0.10903em"},"children":"N"}]}]]}]}]}]}]}]]}]]}]}]]}]," and you get Kraft's inequality ",["$","$L19",null,{"id":"kraft"}],"."]}],["$","p",null,{"children":["I actually like to think about Kraft's inequality as equality. Why? Well, if your code is such that the left-hand side is really smaller than ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mn",null,{"children":"1"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"1"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6444em"}}],["$","span",null,{"className":"mord","children":"1"}]]}]}]]}],", then you are stupid. ",["$","$L1b",null,{"children":["You can notice that Shannon's code above is 'stupid' since for English, it leaves some space at the right of the binary tree. In fact, Shannon's code is useful mostly for didactical reasons and in practice you would construct the code by ",["$","$L16",null,{"href":"https://en.wikipedia.org/wiki/Huffman_coding","children":"Huffman's algorithm"}],". "]}]," In the widget below, you can see how codes can be iteratively improved to get equality."]}],["$","$L1d",null,{}],["$","p",null,{"children":["The reason why this is helpful is that I like to think about the numbers ",["$","$L17",null,{"math":"q_i = 2^{-\\ell_i}"}]," as some kind of idealized probabilities. Widget above shows that we can pretty much assume that the numbers ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","msub",null,{"children":[["$","mi",null,{"children":"q"}],["$","mi",null,{"children":"i"}]]}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"q_i"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.03588em"},"children":"q"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.3117em"},"children":["$","span",null,{"style":{"top":"-2.55em","marginLeft":"-0.0359em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mathnormal mtight","children":"i"}]}]]}]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.15em"},"children":["$","span",null,{}]}]}]]}]}]]}]]}]}]]}]," always sum up to 1. You can think about the numbers ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","msub",null,{"children":[["$","mi",null,{"children":"q"}],["$","mi",null,{"children":"i"}]]}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"q_i"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.03588em"},"children":"q"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.3117em"},"children":["$","span",null,{"style":{"top":"-2.55em","marginLeft":"-0.0359em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mathnormal mtight","children":"i"}]}]]}]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.15em"},"children":["$","span",null,{}]}]}]]}]}]]}]]}]}]]}]," as the probability distribution ",["$","em",null,{"children":"implied"}]," by your code-name lengths ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","msub",null,{"children":[["$","mi",null,{"mathvariant":"normal","children":"ℓ"}],["$","mi",null,{"children":"i"}]]}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\ell_i"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.8444em","verticalAlign":"-0.15em"}}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord","children":"ℓ"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.3117em"},"children":["$","span",null,{"style":{"top":"-2.55em","marginLeft":"0em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mathnormal mtight","children":"i"}]}]]}]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.15em"},"children":["$","span",null,{}]}]}]]}]}]]}]]}]}]]}],". Intuitively, the code is optimized for the distribution ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"q"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"q"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.03588em"},"children":"q"}]]}]}]]}],", not ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"p"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"p"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathnormal","children":"p"}]]}]}]]}],"."]}],["$","p",null,{"children":["This setup with ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"p"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"p"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathnormal","children":"p"}]]}]}]]}]," and ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"q"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"q"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.03588em"},"children":"q"}]]}]}]]}]," is little bit like our discussions in the first two chapters. In fact, let's write down the fact that KL divergence between ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"p"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"p"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathnormal","children":"p"}]]}]}]]}]," and ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"q"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"q"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.03588em"},"children":"q"}]]}]}]]}]," is always nonnegative. Let's write it down in the form ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"H"}],["$","mo",null,{"stretchy":"false","children":"("}],["$","mi",null,{"children":"p"}],["$","mo",null,{"separator":"true","children":","}],["$","mi",null,{"children":"q"}],["$","mo",null,{"stretchy":"false","children":")"}],["$","mo",null,{"children":"≥"}],["$","mi",null,{"children":"H"}],["$","mo",null,{"stretchy":"false","children":"("}],["$","mi",null,{"children":"p"}],["$","mo",null,{"stretchy":"false","children":")"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"H(p, q) \\ge H(p)"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":[["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.08125em"},"children":"H"}],["$","span",null,{"className":"mopen","children":"("}],["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"mpunct","children":","}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.03588em"},"children":"q"}],["$","span",null,{"className":"mclose","children":")"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel","children":"≥"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.08125em"},"children":"H"}],["$","span",null,{"className":"mopen","children":"("}],["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"mclose","children":")"}]]}]]}]]}],":"]}],["$","$L17",null,{"displayMode":true,"math":"\\sum_{i = 1}^k p_i \\log \\frac{1}{q_i} \\ge \\sum_{i = 1}^k p_i \\log \\frac{1}{p_i}"}],["$","p",null,{"children":["Plugging in ",["$","$L17",null,{"math":"q_i = 2^{-\\ell_i}"}],", we get"]}],["$","$L17",null,{"displayMode":true,"math":"\\sum_{i = 1}^k p_i \\ell_i \\ge H(p)."}],["$","p",null,{"children":["That is, the average code-name length is at least ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"H"}],["$","mo",null,{"stretchy":"false","children":"("}],["$","mi",null,{"children":"p"}],["$","mo",null,{"stretchy":"false","children":")"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"H(p)"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.08125em"},"children":"H"}],["$","span",null,{"className":"mopen","children":"("}],["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"mclose","children":")"}]]}]}]]}],". This works for any code, hence the second part of ",["$","$L16",null,{"href":"https://en.wikipedia.org/wiki/Shannon%27s_source_coding_theorem","children":"Shannon's source coding theorem"}],"."]}]]}],"\n",["$","h2",null,{"children":"Prediction = Compression"}],"\n",["$","p",null,{"children":"Using the fact that good codes can achieve a rate close to entropy can give us a lot of intuition!"}],"\n",["$","p",null,{"children":"Let's go through the terms in our dictionary and see how we can interpret them using the coding-theory language."}],"\n",["$","p",null,{"children":["We defined the ",["$","em",null,{"children":"surprisal"}]," ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"log"}],["$","mo",null,{"children":"⁡"}],["$","mn",null,{"children":"1"}],["$","mi",null,{"mathvariant":"normal","children":"/"}],["$","mi",null,{"children":"p"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\log 1/p"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mop","children":["lo",["$","span",null,{"style":{"marginRight":"0.01389em"},"children":"g"}]]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord","children":"1/"}],["$","span",null,{"className":"mord mathnormal","children":"p"}]]}]}]]}]," as a way of measuring how surprised we are given an outcome that happens with probability ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"p"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"p"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathnormal","children":"p"}]]}]}]]}],". But equivalently, it's also how many bits you need to store the outcome in memory, using the optimal code."]}],"\n",["$","p",null,{"children":["We introduced entropy as the \"average surprisal\" of a distribution. But equivalently, it's the rate of how many bits on average we need to store outcomes sampled from a distribution ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"p"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"p"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathnormal","children":"p"}]]}]}]]}],": We can interpret the formula ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","msubsup",null,{"children":[["$","mo",null,{"children":"∑"}],["$","mrow",null,{"children":[["$","mi",null,{"children":"i"}],["$","mo",null,{"children":"="}],["$","mn",null,{"children":"1"}]]}],["$","mi",null,{"children":"n"}]]}],["$","msub",null,{"children":[["$","mi",null,{"children":"p"}],["$","mi",null,{"children":"i"}]]}],["$","mi",null,{"children":"log"}],["$","mo",null,{"children":"⁡"}],["$","mn",null,{"children":"1"}],["$","mi",null,{"mathvariant":"normal","children":"/"}],["$","msub",null,{"children":[["$","mi",null,{"children":"p"}],["$","mi",null,{"children":"i"}]]}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\sum_{i = 1}^n p_i \\log 1/p_i"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1.104em","verticalAlign":"-0.2997em"}}],["$","span",null,{"className":"mop","children":[["$","span",null,{"className":"mop op-symbol small-op","style":{"position":"relative","top":"0em"},"children":"∑"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.8043em"},"children":[["$","span",null,{"style":{"top":"-2.4003em","marginLeft":"0em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mtight","children":[["$","span",null,{"className":"mord mathnormal mtight","children":"i"}],["$","span",null,{"className":"mrel mtight","children":"="}],["$","span",null,{"className":"mord mtight","children":"1"}]]}]}]]}],["$","span",null,{"style":{"top":"-3.2029em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mathnormal mtight","children":"n"}]}]]}]]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.2997em"},"children":["$","span",null,{}]}]}]]}]}]]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.3117em"},"children":["$","span",null,{"style":{"top":"-2.55em","marginLeft":"0em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mathnormal mtight","children":"i"}]}]]}]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.15em"},"children":["$","span",null,{}]}]}]]}]}]]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mop","children":["lo",["$","span",null,{"style":{"marginRight":"0.01389em"},"children":"g"}]]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord","children":"1/"}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.3117em"},"children":["$","span",null,{"style":{"top":"-2.55em","marginLeft":"0em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mathnormal mtight","children":"i"}]}]]}]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.15em"},"children":["$","span",null,{}]}]}]]}]}]]}]]}]}]]}]," as \"The ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"i"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"i"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6595em"}}],["$","span",null,{"className":"mord mathnormal","children":"i"}]]}]}]]}],"-th symbol comes with frequency ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","msub",null,{"children":[["$","mi",null,{"children":"p"}],["$","mi",null,{"children":"i"}]]}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"p_i"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.3117em"},"children":["$","span",null,{"style":{"top":"-2.55em","marginLeft":"0em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mathnormal mtight","children":"i"}]}]]}]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.15em"},"children":["$","span",null,{}]}]}]]}]}]]}]]}]}]]}]," and whenever it comes, we need ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"log"}],["$","mo",null,{"children":"⁡"}],["$","mn",null,{"children":"1"}],["$","mi",null,{"mathvariant":"normal","children":"/"}],["$","msub",null,{"children":[["$","mi",null,{"children":"p"}],["$","mi",null,{"children":"i"}]]}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\log 1/p_i"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mop","children":["lo",["$","span",null,{"style":{"marginRight":"0.01389em"},"children":"g"}]]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord","children":"1/"}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.3117em"},"children":["$","span",null,{"style":{"top":"-2.55em","marginLeft":"0em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mathnormal mtight","children":"i"}]}]]}]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.15em"},"children":["$","span",null,{}]}]}]]}]}]]}]]}]}]]}]," bits to store it\"."]}],"\n",["$","p",null,{"children":["The cross-entropy is very similar; it's how many bits we need when data comes from ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"p"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"p"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathnormal","children":"p"}]]}]}]]}]," but we store them using the code that's optimized for a different distribution ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"q"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"q"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.03588em"},"children":"q"}]]}]}]]}],". Finally, KL divergence (relative entropy) is how much worse our mismatched code is compared to the optimal one."]}],"\n",["$","p",null,{"children":"Here it is again, more concisely in a table:"}],"\n",["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"style":{"minWidth":"7rem"},"children":"Concept"}],["$","th",null,{"children":"Formula"}],["$","th",null,{"children":"Bayesian detective"}],["$","th",null,{"children":"Compression"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":"Surprisal"}],["$","td",null,{"children":["$","$L17",null,{"math":"\\log \\frac{1}{p}"}]}],["$","td",null,{"children":"Surprise of an outcome"}],["$","td",null,{"children":"Bits to store a letter"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"Entropy"}],["$","td",null,{"children":["$","$L17",null,{"math":"\\sum p_i \\log \\frac{1}{p_i}"}]}],["$","td",null,{"children":"Expected surprisal"}],["$","td",null,{"children":"Average bits per letter"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"Cross-entropy"}],["$","td",null,{"children":["$","$L17",null,{"math":"\\sum p_i \\log \\frac{1}{q_i}"}]}],["$","td",null,{"children":"Expected surprisal of model q"}],["$","td",null,{"children":"Average bits per letter for code optimized for q"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"KL divergence"}],["$","td",null,{"children":["$","$L17",null,{"math":"\\sum p_i \\log \\frac{p_i}{q_i}"}]}],["$","td",null,{"children":"Additional surprise from p ≠ q"}],["$","td",null,{"children":"Additional storage from p ≠ q"}]]}]]}]]}],"\n",["$","h2",null,{"children":"LLM compression"}],"\n",["$","p",null,{"children":["So far, all our discussion was about encoding each letter independently of its context. The real fun starts when we want to compress a given text as much as possible, period. Now we definitely want to use the fact that ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mtext",null,{"mathvariant":"sans-serif","children":"th"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\textsf{th}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord textsf","children":"th"}]}]]}]}]]}]," usually follows by ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mtext",null,{"mathvariant":"sans-serif","children":"e"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\textsf{e}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.4444em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord textsf","children":"e"}]}]]}]}]]}]," as much as possible."]}],"\n",["$","p",null,{"children":"I want to explain a hypothetical compression algorithm based on an LLM."}],"\n",["$","p",null,{"children":["First, a technicality we have to go through quickly. Although ",["$","$L16",null,{"href":"04-mle#llm","children":"we discussed"}]," that LLMs are predicting the next letter, that's a simplification. Before training any LLM, we split all texts into ",["$","em",null,{"children":"tokens"}]," and the input and output of LLMs consists of tokens, not letters. There is no fixed definition of what a token is, but for example GPT-2 works with around ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mn",null,{"children":"50"}],["$","mtext",null,{"children":" "}],["$","mn",null,{"children":"000"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"50\\,000"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6444em"}}],["$","span",null,{"className":"mord","children":"50"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord","children":"000"}]]}]}]]}]," different tokens. That's enough to cover all frequent syllables, medium-length words, common names, and special symbols."]}],"\n",["$","p",null,{"children":["LLMs can be used to compress text. Here's how: We will assume that both the compression and the decompression algorithm have access to the same LLM, say GPT-2. The compression algorithm runs GPT-2 on the input text; for each position ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"i"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"i"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6595em"}}],["$","span",null,{"className":"mord mathnormal","children":"i"}]]}]}]]}]," in the text, GPT-2 generates a probability distribution ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","msub",null,{"children":[["$","mi",null,{"children":"q"}],["$","mrow",null,{"children":[["$","mi",null,{"children":"L"}],["$","mi",null,{"children":"L"}],["$","mi",null,{"children":"M"}]]}]]}],["$","mo",null,{"stretchy":"false","children":"("}],["$","msub",null,{"children":[["$","mi",null,{"children":"t"}],["$","mi",null,{"children":"i"}]]}],["$","mo",null,{"stretchy":"false","children":")"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"q_{LLM}(t_i)"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.03588em"},"children":"q"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.3283em"},"children":["$","span",null,{"style":{"top":"-2.55em","marginLeft":"-0.0359em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mtight","children":[["$","span",null,{"className":"mord mathnormal mtight","children":"LL"}],["$","span",null,{"className":"mord mathnormal mtight","style":{"marginRight":"0.10903em"},"children":"M"}]]}]}]]}]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.15em"},"children":["$","span",null,{}]}]}]]}]}]]}],["$","span",null,{"className":"mopen","children":"("}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord mathnormal","children":"t"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.3117em"},"children":["$","span",null,{"style":{"top":"-2.55em","marginLeft":"0em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mathnormal mtight","children":"i"}]}]]}]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.15em"},"children":["$","span",null,{}]}]}]]}]}]]}],["$","span",null,{"className":"mclose","children":")"}]]}]}]]}]," over the ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"i"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"i"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6595em"}}],["$","span",null,{"className":"mord mathnormal","children":"i"}]]}]}]]}]," token, based on the tokens ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","msub",null,{"children":[["$","mi",null,{"children":"t"}],["$","mn",null,{"children":"1"}]]}],["$","mo",null,{"separator":"true","children":","}],["$","mo",null,{"children":"…"}],["$","mo",null,{"separator":"true","children":","}],["$","msub",null,{"children":[["$","mi",null,{"children":"t"}],["$","mrow",null,{"children":[["$","mi",null,{"children":"i"}],["$","mo",null,{"children":"−"}],["$","mn",null,{"children":"1"}]]}]]}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"t_1, \\dots, t_{i-1}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.8234em","verticalAlign":"-0.2083em"}}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord mathnormal","children":"t"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.3011em"},"children":["$","span",null,{"style":{"top":"-2.55em","marginLeft":"0em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mtight","children":"1"}]}]]}]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.15em"},"children":["$","span",null,{}]}]}]]}]}]]}],["$","span",null,{"className":"mpunct","children":","}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"minner","children":"…"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mpunct","children":","}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord mathnormal","children":"t"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.3117em"},"children":["$","span",null,{"style":{"top":"-2.55em","marginLeft":"0em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mtight","children":[["$","span",null,{"className":"mord mathnormal mtight","children":"i"}],["$","span",null,{"className":"mbin mtight","children":"−"}],["$","span",null,{"className":"mord mtight","children":"1"}]]}]}]]}]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.2083em"},"children":["$","span",null,{}]}]}]]}]}]]}]]}]}]]}],". We can use a code like Shannon's code to turn this distribution to a code assignment. For example, if GPT-2 predicts that ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mtext",null,{"mathvariant":"sans-serif","children":"the"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\textsf{the}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord textsf","children":"the"}]}]]}]}]]}]," has 50% probability of coming next, the Shannon's code would assign the code ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mtext",null,{"mathvariant":"sans-serif","children":"0"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\textsf{0}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6556em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord textsf","children":"0"}]}]]}]}]]}]," to ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mtext",null,{"mathvariant":"sans-serif","children":"the"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\textsf{the}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord textsf","children":"the"}]}]]}]}]]}],". We encode the ",["$","em",null,{"children":"actual"}]," next token ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","msub",null,{"children":[["$","mi",null,{"children":"t"}],["$","mi",null,{"children":"i"}]]}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"t_i"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.7651em","verticalAlign":"-0.15em"}}],["$","span",null,{"className":"mord","children":[["$","span",null,{"className":"mord mathnormal","children":"t"}],["$","span",null,{"className":"msupsub","children":["$","span",null,{"className":"vlist-t vlist-t2","children":[["$","span",null,{"className":"vlist-r","children":[["$","span",null,{"className":"vlist","style":{"height":"0.3117em"},"children":["$","span",null,{"style":{"top":"-2.55em","marginLeft":"0em","marginRight":"0.05em"},"children":[["$","span",null,{"className":"pstrut","style":{"height":"2.7em"}}],["$","span",null,{"className":"sizing reset-size6 size3 mtight","children":["$","span",null,{"className":"mord mathnormal mtight","children":"i"}]}]]}]}],["$","span",null,{"className":"vlist-s","children":"​"}]]}],["$","span",null,{"className":"vlist-r","children":["$","span",null,{"className":"vlist","style":{"height":"0.15em"},"children":["$","span",null,{}]}]}]]}]}]]}]]}]}]]}]," using this code."]}],"\n",["$","p",null,{"children":["That is, our compression algorithm uses ",["$","em",null,{"children":"a different code for each token"}],", each code corresponding to the distribution over that token predicted by GPT-2. The decoding algorithm works analogously: For each token, it uses GPT-2 & Shannon's code to construct the code used to read the next token code."]}],"\n",["$","p",null,{"children":["The overall length of the encoded text is ",["$","$L17",null,{"math":"\\sum_{i = 1}^n \\lceil \\log \\frac{1}{q_{LLM}(t_i)} \\rceil "}]," if we use Shannon's code. In the next widget, you can see how it works."]}],"\n",["$","$L1e",null,{}],"\n",["$","p",null,{"children":"Our compression algorithm is not very practical, it's very slow. More importantly, both parties also have to have GPT-2 stored on their computer, so we are getting some compression only if the text is much larger than the size of GPT-2, which is in gigabytes."}],"\n",["$","p",null,{"children":["But here's the punchline. ",["$","$L16",null,{"href":"08-coding_theory#better","children":"Using more complicated codes"}],", we can get rid of the annoying ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mo",null,{"stretchy":"false","children":"⌈"}],["$","mo",null,{"stretchy":"false","children":"⌉"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\lceil \\rceil"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mopen","children":"⌈"}],["$","span",null,{"className":"mclose","children":"⌉"}]]}]}]]}]," and encode the input text with length very close to"]}],"\n",["$","$L17",null,{"displayMode":true,"math":"\\sum_{i = 1}^n \\log \\frac{1}{q_{LLM}(t_i)}. "}],"\n",["$","p",null,{"children":["This is exactly the cross-entropy loss used to train neural nets, as ",["$","$L16",null,{"href":"04-mle#cross-loss","children":"we discussed earlier"}],". We are now getting an equivalent definition of what neural nets are being trained for! ",["$","strong",null,{"children":"LLMs are trained to compress the Internet as much as possible"}],"!"]}],"\n",["$","p",null,{"children":["I think that this is a powerful intuition that can help us understand where the knowledge / intelligence of LLMs is coming from. If you want to compress text efficiently, you have to learn the patterns in it so that you can recreate the same text just by storing a few hints about what it was about. To be good in compression, you have to learn that ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mtext",null,{"mathvariant":"sans-serif","children":"th"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\textsf{th}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord textsf","children":"th"}]}]]}]}]]}]," often follows by ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mtext",null,{"mathvariant":"sans-serif","children":"e"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\textsf{e}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.4444em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord textsf","children":"e"}]}]]}]}]]}],", texts about ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mtext",null,{"mathvariant":"sans-serif","children":"Paris"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\textsf{Paris}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord textsf","children":"Paris"}]}]]}]}]]}]," often involve ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mtext",null,{"mathvariant":"sans-serif","children":"France"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\textsf{France}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord textsf","children":"France"}]}]]}]}]]}],", and what kinds of talking points might a virtue-ethicist use to critique conseqentialist ethics."]}],"\n",["$","p",null,{"children":"This is a complementary intuition to our intuition that being good in the text-prediction game requires knowledge. Indeed, prediction and compression are two sides of the same coin!"}],"\n",["$","h2",null,{"children":["Cracking riddles ",["$","a",null,{"id":"compression"}]]}],"\n",["$","p",null,{"children":"Let's go back to our Wikipedia compression riddle, the last riddle we haven't discussed yet."}],"\n",["$","$L1f",null,{"id":"wikipedia","children":[["$","p",null,{"children":["Remember, ",["$","$L16",null,{"href":"00-riddles#wikipedia","children":"our Wikipedia riddle"}]," was about Hutter's compression challenge: How much can we compress a single 1GB file of English Wikipedia. Hutter is an AI researcher and he started his challenge because he understands very well the topic of this chapter - if you can compress text, you can also predict it, and that implies you have to have relevant knowledge /intelligence."]}],["$","p",null,{"children":["The honest answer to what's the best way to compress Wikipedia is that we don't know (see the following ",["$","$L16",null,{"href":"09-kolmogorov","children":"Kolmogorov complexity"}]," chapter), but we at least broadly understand how well different algorithms compress English text."]}],["$","p",null,{"children":"There are more approaches to compress text files. Let's go through them and you can see in the next widget how they fare for various types of data."}],["$","ul",null,{"children":["\n",["$","li",null,{"children":["\n",["$","p",null,{"children":[["$","em",null,{"children":"Baseline"}],": The stadard way to store text files is UTF-8. Simplifying a bit, this format store each letter using 8 bits. ",["$","$L1b",null,{"children":["Why is it lying? ",["$","$L16",null,{"href":"https://en.wikipedia.org/wiki/UTF-8","children":"UTF-8"}]," itself is a beautiful example of good engineering inspired by coding theory. There are around 100 characters (English letters, digits) that are stored using 8 bits, fancier letters from reasonable alphabets are stored using 16 bits, and emojis like 😀 or hieroglyphs like 𓀀 take 32 bits. Classic coding theory—rare stuff gets longer codes. But English Wiki is mostly standard English letters, so 8 bits per character it is. "]}]]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":[["$","em",null,{"children":"Optimal letter code"}],": Treat letters as independent, we can encode them using ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mi",null,{"children":"H"}],["$","mo",null,{"stretchy":"false","children":"("}],["$","mi",null,{"children":"p"}],["$","mo",null,{"stretchy":"false","children":")"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"H(p)"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mord mathnormal","style":{"marginRight":"0.08125em"},"children":"H"}],["$","span",null,{"className":"mopen","children":"("}],["$","span",null,{"className":"mord mathnormal","children":"p"}],["$","span",null,{"className":"mclose","children":")"}]]}]}]]}]," bits per letter on average, where ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":["$","mi",null,{"children":"p"}]}],["$","annotation",null,{"encoding":"application/x-tex","children":"p"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.625em","verticalAlign":"-0.1944em"}}],["$","span",null,{"className":"mord mathnormal","children":"p"}]]}]}]]}]," is the distribution of English letter frequencies. ",["$","$L16",null,{"href":"../02-crossentropy#construction","children":"In the Shannon's coding widget above"}],", we saw that the entropy is around 4.2 bits. So, we can shrink the file by almost ",["$","strong",null,{"children":"2x"}]," just by using that different letters have different frequencies."]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":[["$","em",null,{"children":"Zipping"}],": Standard compression algorithms like those used in ZIP implement dictionaries to catch patterns that are often reused in the text. They can compress English text up to a factor around ",["$","strong",null,{"children":"3x"}],"."]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":[["$","em",null,{"children":"LLMs"}],": Large Language Models are trained to predict text, hence they compress it. If we disregard the fact that technically speaking, LLM size should count toward the size of the compressed text, they compress English text around ",["$","strong",null,{"children":"7x"}]," for old LLMs like GPT-2 and up to perhaps ",["$","strong",null,{"children":"10x"}]," for state-of-the-art networks."]}],"\n"]}],"\n"]}],["$","p",null,{"children":"I encourage you to play with the following widget, especially making GPT-2 compress your texts. 🙂"}],["$","$L20",null,{}],["$","p",null,{"children":"The best algorithms in Hutter's competition have compress by a factor of about 9x. But unfortunately, while the challenge is backed by a very deep understanding of the nature of intelligence, the precise parameters of the challenge make it hard to interpret the leading algorithms as the best algorithms in 'understanding'. Since the file size is only 1GB, the compression-by-LLM approach doesn't easily work. You have to append the LLM to the compressed text and it becomes huge. The winning algorithms are thus used on more 'combinatorial' approaches, like those used in ZIP."}]]}]],["$","$L21",null,{"headerLevel":0}],["$","$L22",null,{}],["$","div",null,{"className":"mt-16 pt-8 border-t border-gray-200","children":["$","div",null,{"className":"flex justify-between items-center","children":[["$","div",null,{"className":"flex-1","children":["$","$L12",null,{"href":"/07-machine_learning/","className":"inline-flex items-center text-blue-600 hover:text-blue-800 transition-colors","children":[["$","svg",null,{"className":"w-5 h-5 mr-2","fill":"none","stroke":"currentColor","viewBox":"0 0 24 24","children":["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","strokeWidth":2,"d":"M15 19l-7-7 7-7"}]}],["$","div",null,{"className":"text-left","children":[["$","div",null,{"className":"text-sm text-gray-500","children":"Previous"}],["$","div",null,{"className":"font-medium","children":"Loss functions"}]]}]]}]}],["$","div",null,{"className":"flex-1 text-right","children":["$","$L12",null,{"href":"/09-kolmogorov/","className":"inline-flex items-center justify-end text-blue-600 hover:text-blue-800 transition-colors","children":[["$","div",null,{"className":"text-right","children":[["$","div",null,{"className":"text-sm text-gray-500","children":"Next"}],["$","div",null,{"className":"font-medium","children":"Kolmogorov complexity"}]]}],["$","svg",null,{"className":"w-5 h-5 ml-2","fill":"none","stroke":"currentColor","viewBox":"0 0 24 24","children":["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","strokeWidth":2,"d":"M9 5l7 7-7 7"}]}]]}]}]]}]}]]}]}]}]}]
b:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
8:null
9:null
d:[["$","title","0",{"children":"Bayes, bits & brains"}],["$","meta","1",{"name":"description","content":"Bayes, bits & brains"}]]
